(function(){var a=window.nv||{};window.nv=a;a.dev=false;a.tooltip=a.tooltip||{};a.utils=a.utils||{};a.models=a.models||{};a.charts={};a.graphs=[];a.logs={};a.dispatch=d3.dispatch("render_start","render_end");if(!Function.prototype.bind){Function.prototype.bind=function(c){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var h=Array.prototype.slice.call(arguments,1),g=this,e=function(){},f=function(){return g.apply(this instanceof e&&c?this:c,h.concat(Array.prototype.slice.call(arguments)))};e.prototype=this.prototype;f.prototype=new e();return f}}if(a.dev){a.dispatch.on("render_start",function(c){a.logs.startTime=+new Date()});a.dispatch.on("render_end",function(c){a.logs.endTime=+new Date();a.logs.totalTime=a.logs.endTime-a.logs.startTime;a.log("total",a.logs.totalTime)})}a.log=function(){if(a.dev&&window.console&&console.log&&console.log.apply){console.log.apply(console,arguments)}else{if(a.dev&&window.console&&typeof console.log=="function"&&Function.prototype.bind){var c=Function.prototype.bind.call(console.log,console);c.apply(console,arguments)}}return arguments[arguments.length-1]};a.deprecated=function(c){if(a.dev&&console&&console.warn){console.warn("`"+c+"` has been deprecated.")}};a.render=function b(c){c=c||1;a.render.active=true;a.dispatch.render_start();setTimeout(function(){var f,g;for(var e=0;e<c&&(g=a.render.queue[e]);e++){f=g.generate();if(typeof g.callback==typeof(Function)){g.callback(f)}a.graphs.push(f)}a.render.queue.splice(0,e);if(a.render.queue.length){setTimeout(arguments.callee,0)}else{a.dispatch.render_end();a.render.active=false}},0)};a.render.active=false;a.render.queue=[];a.addGraph=function(c){if(typeof arguments[0]===typeof(Function)){c={generate:arguments[0],callback:arguments[1]}}a.render.queue.push(c);if(!a.render.active){a.render()}};a.interactiveGuideline=function(){var n=a.models.tooltip();var c=null;var m=null;var f={left:0,top:0},l=d3.scale.linear(),e=d3.scale.linear(),i=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick"),j=true;var h=null;var k="ActiveXObject" in window;function g(o){o.each(function(s){var p=d3.select(this);var r=(c||960),u=(m||400);var q=p.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([s]);var v=q.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");v.append("g").attr("class","nv-interactiveGuideLine");if(!h){return}function t(){var z=d3.mouse(this);var y=z[0];var x=z[1];var A=true;var B=false;if(k){y=d3.event.offsetX;x=d3.event.offsetY;if(d3.event.target.tagName!=="svg"){A=false}if(d3.event.target.className.baseVal.match("nv-legend")){B=true}}if(A){y-=f.left;x-=f.top}if(y<0||x<0||y>r||x>u||(d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===undefined)||B){if(k){if(d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===undefined&&d3.event.relatedTarget.className.match(n.nvPointerEventsClass)){return}}i.elementMouseout({mouseX:y,mouseY:x});g.renderGuideLine(null);return}var w=l.invert(y);i.elementMousemove({mouseX:y,mouseY:x,pointXValue:w});if(d3.event.type==="dblclick"){i.elementDblclick({mouseX:y,mouseY:x,pointXValue:w})}if(d3.event.type==="click"){i.elementClick({mouseX:y,mouseY:x,pointXValue:w})}}h.on("mousemove",t,true).on("mouseout",t,true).on("dblclick",t).on("click",t);g.renderGuideLine=function(w){if(!j){return}var y=q.select(".nv-interactiveGuideLine").selectAll("line").data((w!=null)?[a.utils.NaNtoZero(w)]:[],String);y.enter().append("line").attr("class","nv-guideline").attr("x1",function(x){return x}).attr("x2",function(x){return x}).attr("y1",u).attr("y2",0);y.exit().remove()}})}g.dispatch=i;g.tooltip=n;g.margin=function(o){if(!arguments.length){return f}f.top=typeof o.top!="undefined"?o.top:f.top;f.left=typeof o.left!="undefined"?o.left:f.left;return g};g.width=function(o){if(!arguments.length){return c}c=o;return g};g.height=function(o){if(!arguments.length){return m}m=o;return g};g.xScale=function(o){if(!arguments.length){return l}l=o;return g};g.showGuideLine=function(o){if(!arguments.length){return j}j=o;return g};g.svgContainer=function(o){if(!arguments.length){return h}h=o;return g};return g};a.interactiveBisect=function(f,e,j){if(!(f instanceof Array)){return null}if(typeof j!=="function"){j=function(m,l){return m.x}}var k=d3.bisector(j).left;var g=d3.max([0,k(f,e)-1]);var i=j(f[g],g);if(typeof i==="undefined"){i=g}if(i===e){return g}var c=d3.min([g+1,f.length-1]);var h=j(f[c],c);if(typeof h==="undefined"){h=c}if(Math.abs(h-e)>=Math.abs(i-e)){return g}else{return c}};a.nearestValueIndex=function(f,e,c){var h=Infinity,g=null;f.forEach(function(k,j){var l=Math.abs(e-k);if(l<=h&&l<c){h=l;g=j}});return g};(function(){window.nv.tooltip={};window.nv.models.tooltip=function(){var r=null;var w=null;var h="w",g=50,o=25,e=null,t=null,s=null,m=null,v={left:null,top:null},l=true;var p="nvtooltip-"+Math.floor(Math.random()*100000);var j="nv-pointer-events-none";var c=function(y,x){return y};var q=function(x){return x};var f=function(B){if(r!=null){return r}if(B==null){return""}var A=d3.select(document.createElement("table"));var x=A.selectAll("thead").data([B]).enter().append("thead");x.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",true).html(q(B.value));var C=A.selectAll("tbody").data([B]).enter().append("tbody");var y=C.selectAll("tr").data(function(D){return D.series}).enter().append("tr").classed("highlight",function(D){return D.highlight});y.append("td").classed("legend-color-guide",true).append("div").style("background-color",function(D){return D.color});y.append("td").classed("key",true).html(function(D){return D.key});y.append("td").classed("value",true).html(function(E,D){return c(E.value,D)});y.selectAll("td").each(function(F){if(F.highlight){var E=d3.scale.linear().domain([0,1]).range(["#fff",F.color]);var D=0.6;d3.select(this).style("border-bottom-color",E(D)).style("border-top-color",E(D))}});var z=A.node().outerHTML;if(B.footer!==undefined){z+="<div class='footer'>"+B.footer+"</div>"}return z};var i=function(x){if(x&&x.series&&x.series.length>0){return true}return false};function k(){if(s){var x=d3.select(s);if(x.node().tagName!=="svg"){x=x.select("svg")}var z=(x.node())?x.attr("viewBox"):null;if(z){z=z.split(" ");var y=parseInt(x.style("width"))/z[2];v.left=v.left*y;v.top=v.top*y}}}function u(z){var x;if(s){x=d3.select(s)}else{x=d3.select("body")}var y=x.select(".nvtooltip");if(y.node()===null){y=x.append("div").attr("class","nvtooltip "+(t?t:"xy-tooltip")).attr("id",p)}y.node().innerHTML=z;y.style("top",0).style("left",0).style("opacity",0);y.selectAll("div, table, td, tr").classed(j,true);y.classed(j,true);return y.node()}function n(){if(!l){return}if(!i(w)){return}k();var A=v.left;var D=(e!=null)?e:v.top;var z=u(f(w));m=z;if(s){var C=s.getElementsByTagName("svg")[0];var x=(C)?C.getBoundingClientRect():s.getBoundingClientRect();var F={left:0,top:0};if(C){var y=C.getBoundingClientRect();var E=s.getBoundingClientRect();var B=y.top;if(B<0){var G=s.getBoundingClientRect();B=(Math.abs(B)>G.height)?0:B}F.top=Math.abs(B-E.top);F.left=Math.abs(y.left-E.left)}A+=s.offsetLeft+F.left-2*s.scrollLeft;D+=s.offsetTop+F.top-2*s.scrollTop}if(o&&o>0){D=Math.floor(D/o)*o}a.tooltip.calcTooltipPosition([A,D],h,g,z);return n}n.nvPointerEventsClass=j;n.content=function(x){if(!arguments.length){return r}r=x;return n};n.tooltipElem=function(){return m};n.contentGenerator=function(x){if(!arguments.length){return f}if(typeof x==="function"){f=x}return n};n.data=function(x){if(!arguments.length){return w}w=x;return n};n.gravity=function(x){if(!arguments.length){return h}h=x;return n};n.distance=function(x){if(!arguments.length){return g}g=x;return n};n.snapDistance=function(x){if(!arguments.length){return o}o=x;return n};n.classes=function(x){if(!arguments.length){return t}t=x;return n};n.chartContainer=function(x){if(!arguments.length){return s}s=x;return n};n.position=function(x){if(!arguments.length){return v}v.left=(typeof x.left!=="undefined")?x.left:v.left;v.top=(typeof x.top!=="undefined")?x.top:v.top;return n};n.fixedTop=function(x){if(!arguments.length){return e}e=x;return n};n.enabled=function(x){if(!arguments.length){return l}l=x;return n};n.valueFormatter=function(x){if(!arguments.length){return c}if(typeof x==="function"){c=x}return n};n.headerFormatter=function(x){if(!arguments.length){return q}if(typeof x==="function"){q=x}return n};n.id=function(){return p};return n};a.tooltip.show=function(k,g,j,i,h,f){var e=document.createElement("div");e.className="nvtooltip "+(f?f:"xy-tooltip");var c=h;if(!h||h.tagName.match(/g|svg/i)){c=document.getElementsByTagName("body")[0]}e.style.left=0;e.style.top=0;e.style.opacity=0;if(typeof g!=="string"){e.appendChild(g)}else{e.innerHTML=g}c.appendChild(e);if(h){k[0]=k[0]-h.scrollLeft;k[1]=k[1]-h.scrollTop}a.tooltip.calcTooltipPosition(k,j,i,e)};a.tooltip.findFirstNonSVGParent=function(c){while(c.tagName.match(/^g|svg$/i)!==null){c=c.parentNode}return c};a.tooltip.findTotalOffsetTop=function(c,f){var e=f;do{if(!isNaN(c.offsetTop)){e+=(c.offsetTop)}}while(c=c.offsetParent);return e};a.tooltip.findTotalOffsetLeft=function(e,c){var f=c;do{if(!isNaN(e.offsetLeft)){f+=(e.offsetLeft)}}while(e=e.offsetParent);return f};a.tooltip.calcTooltipPosition=function(p,s,n,e){var r=parseInt(e.offsetHeight),f=parseInt(e.offsetWidth),h=a.utils.windowSize().width,c=a.utils.windowSize().height,g=window.pageYOffset,j=window.pageXOffset,i,o;c=window.innerWidth>=document.body.scrollWidth?c:c-16;h=window.innerHeight>=document.body.scrollHeight?h:h-16;s=s||"s";n=n||20;var k=function(t){return a.tooltip.findTotalOffsetTop(t,o)};var q=function(t){return a.tooltip.findTotalOffsetLeft(t,i)};switch(s){case"e":i=p[0]-f-n;o=p[1]-(r/2);var m=q(e);var l=k(e);if(m<j){i=p[0]+n>j?p[0]+n:j-m+i}if(l<g){o=g-l+o}if(l+r>g+c){o=g+c-l+o-r}break;case"w":i=p[0]+n;o=p[1]-(r/2);var m=q(e);var l=k(e);if(m+f>h){i=p[0]-f-n}if(l<g){o=g+5}if(l+r>g+c){o=g+c-l+o-r}break;case"n":i=p[0]-(f/2)-5;o=p[1]+n;var m=q(e);var l=k(e);if(m<j){i=j+5}if(m+f>h){i=i-f/2+5}if(l+r>g+c){o=g+c-l+o-r}break;case"s":i=p[0]-(f/2);o=p[1]-r-n;var m=q(e);var l=k(e);if(m<j){i=j+5}if(m+f>h){i=i-f/2+5}if(g>l){o=g}break;case"none":i=p[0];o=p[1]-n;var m=q(e);var l=k(e);break}e.style.left=i+"px";e.style.top=o+"px";e.style.opacity=1;e.style.position="absolute";return e};a.tooltip.cleanup=function(){var c=document.getElementsByClassName("nvtooltip");var e=[];while(c.length){e.push(c[0]);c[0].style.transitionDelay="0 !important";c[0].style.opacity=0;c[0].className="nvtooltip-pending-removal"}setTimeout(function(){while(e.length){var f=e.pop();f.parentNode.removeChild(f)}},500)}})();a.utils.windowSize=function(){var c={width:640,height:480};if(document.body&&document.body.offsetWidth){c.width=document.body.offsetWidth;c.height=document.body.offsetHeight}if(document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){c.width=document.documentElement.offsetWidth;c.height=document.documentElement.offsetHeight}if(window.innerWidth&&window.innerHeight){c.width=window.innerWidth;c.height=window.innerHeight}return(c)};a.utils.windowResize=function(c){if(window.addEventListener){window.addEventListener("resize",c)}else{a.log("ERROR: Failed to bind to window.resize with: ",c)}return{callback:c,clear:function(){window.removeEventListener("resize",c)}}};a.utils.getColor=function(c){if(!arguments.length){return a.utils.defaultColor()}else{if(c instanceof Array){return function(f,e){return f.color||c[e%c.length]}}else{return c}}};a.utils.defaultColor=function(){var c=d3.scale.category20().range();return function(f,e){return f.color||c[e%c.length]}};a.utils.customTheme=function(g,e,f){e=e||function(h){return h.key};f=f||d3.scale.category20().range();var c=f.length;return function(j,h){var i=e(j);if(typeof g[i]==="function"){return g[i]()}else{if(g[i]!==undefined){return g[i]}else{if(!c){c=f.length}c=c-1;return f[c]}}}};a.utils.pjax=function(c,e){var f=function(g){d3.html(g,function(h){var i=d3.select(e).node();i.parentNode.replaceChild(d3.select(h).select(e).node(),i);a.utils.pjax(c,e)})};d3.selectAll(c).on("click",function(){history.pushState(this.href,this.textContent,this.href);f(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){if(d3.event.state){f(d3.event.state)}})};a.utils.calcApproxTextWidth=function(c){if(typeof c.style==="function"&&typeof c.text==="function"){var f=parseInt(c.style("font-size").replace("px",""));var e=c.text().length;return e*f*0.5}return 0};a.utils.NaNtoZero=function(c){if(typeof c!=="number"||isNaN(c)||c===null||c===Infinity||c===-Infinity){return 0}return c};d3.selection.prototype.watchTransition=function(e){var c=[this].concat([].slice.call(arguments,1));return e.transition.apply(e,c)};a.utils.renderWatch=function(f,g){if(!(this instanceof a.utils.renderWatch)){return new a.utils.renderWatch(f,g)}var h=g!==undefined?g:250;var c=[];var e=this;this.models=function(i){i=[].slice.call(arguments,0);i.forEach(function(j){j.__rendered=false;(function(k){k.dispatch.on("renderEnd",function(l){k.__rendered=true;e.renderEnd("model")})})(j);if(c.indexOf(j)<0){c.push(j)}});return this};this.reset=function(i){if(i!==undefined){h=i}c=[]};this.transition=function(j,i,k){i=arguments.length>1?[].slice.call(arguments,1):[];if(i.length>1){k=i.pop()}else{k=h!==undefined?h:250}j.__rendered=false;if(c.indexOf(j)<0){c.push(j)}if(k===0){j.__rendered=true;j.delay=function(){return this};j.duration=function(){return this};return j}else{if(j.length===0){j.__rendered=true}else{if(j.every(function(m){return !m.length})){j.__rendered=true}else{j.__rendered=false}}var l=0;return j.transition().duration(k).each(function(){++l}).each("end",function(n,m){if(--l===0){j.__rendered=true;e.renderEnd.apply(this,i)}})}};this.renderEnd=function(){if(c.every(function(i){return i.__rendered})){c.forEach(function(i){i.__rendered=false});f.renderEnd.apply(this,arguments)}}};a.utils.deepExtend=function(e){var c=arguments.length>1?[].slice.call(arguments,1):[];c.forEach(function(i){for(key in i){var g=e[key] instanceof Array;var f=typeof e[key]==="object";var h=typeof i[key]==="object";if(f&&!g&&h){a.utils.deepExtend(e[key],i[key])}else{e[key]=i[key]}}})};a.utils.state=function(){if(!(this instanceof a.utils.state)){return new a.utils.state()}var g={};var e=this;var j=function(){};var f=function(){return{}};var i=null;var h=null;this.dispatch=d3.dispatch("change","set");this.dispatch.on("set",function(k){j(k,true)});this.getter=function(k){f=k;return this};this.setter=function(k,l){if(!l){l=function(){}}j=function(m,n){k(m);if(n){l()}};return this};this.init=function(k){i=i||{};a.utils.deepExtend(i,k)};var c=function(){var l=f();if(JSON.stringify(l)===JSON.stringify(g)){return false}for(var k in l){if(g[k]===undefined){g[k]={}}g[k]=l[k];h=true}return true};this.update=function(){if(i){j(i,false);i=null}if(c.call(this)){this.dispatch.change(g)}}};a.utils.optionsFunc=function(c){a.deprecated("nv.utils.optionsFunc");if(c){d3.map(c).forEach((function(e,f){if(typeof this[e]==="function"){this[e](f)}}).bind(this))}return this};a.utils.calcTicksX=function(h,g){var c=1;var f=0;for(f;f<g.length;f+=1){var e=g[f]&&g[f].values?g[f].values.length:0;c=e>c?e:c}a.log("Requested number of ticks: ",h);a.log("Calculated max values to be: ",c);h=h>c?h=c-1:h;h=h<1?1:h;h=Math.floor(h);a.log("Calculating tick count as: ",h);return h};a.utils.calcTicksY=function(e,c){return a.utils.calcTicksX(e,c)};a.utils.initOption=function(e,c){if(e._calls&&e._calls[c]){e[c]=e._calls[c]}else{e[c]=function(f){if(!arguments.length){return e._options[c]}e._options[c]=f;return e}}};a.utils.initOptions=function(g){var f=Object.getOwnPropertyNames(g._options||{});var e=Object.getOwnPropertyNames(g._calls||{});f=f.concat(e);for(var c in f){a.utils.initOption(g,f[c])}};a.utils.inheritOptionsD3=function(e,c,f){e._d3options=f.concat(e._d3options||[]);f.unshift(c);f.unshift(e);d3.rebind.apply(this,f)};a.utils.arrayUnique=function(c){return c.sort().filter(function(e,f){return !f||e!=c[f-1]})};a.utils.symbolMap=d3.map();a.utils.symbol=function(){var e,c=64;function f(k,h){var g=e.call(this,k,h);var j=c.call(this,k,h);if(d3.svg.symbolTypes.indexOf(g)!==-1){return d3.svg.symbol().type(g).size(j)()}else{return a.utils.symbolMap.get(g)(j)}}f.type=function(g){if(!arguments.length){return e}e=d3.functor(g);return f};f.size=function(g){if(!arguments.length){return c}c=d3.functor(g);return f};return f};a.utils.inheritOptions=function(j,i){var h=Object.getOwnPropertyNames(i._options||{});var g=Object.getOwnPropertyNames(i._calls||{});var c=i._inherited||[];var e=i._d3options||[];var f=h.concat(g).concat(c).concat(e);f.unshift(i);f.unshift(j);d3.rebind.apply(this,f);j._inherited=a.utils.arrayUnique(h.concat(g).concat(c).concat(h).concat(j._inherited||[]));j._d3options=a.utils.arrayUnique(e.concat(j._d3options||[]))};a.utils.initSVG=function(c){c.classed({"nvd3-svg":true})};a.models.axis=function(){var f=d3.svg.axis();var x=d3.scale.linear();var n={top:0,right:0,bottom:0,left:0},q=75,o=60,j=null,t=true,p=true,g=0,u=true,e=false,r=false,v=null,l=0,c=250,w=d3.dispatch("renderEnd"),k=false,i=false;f.scale(x).orient("bottom").tickFormat(function(y){return y});var s;var h=a.utils.renderWatch(w,c);function m(y){h.reset();y.each(function(J){var A=d3.select(this);a.utils.initSVG(A);var C=A.selectAll("g.nv-wrap.nv-axis").data([J]);var F=C.enter().append("g").attr("class","nvd3 nv-wrap nv-axis");var z=F.append("g");var L=C.select("g");if(v!==null){f.ticks(v)}else{if(f.orient()=="top"||f.orient()=="bottom"){f.ticks(Math.abs(x.range()[1]-x.range()[0])/100)}}L.watchTransition(h,"axis").call(f);s=s||f.scale();var E=f.tickFormat();if(E==null){E=s.tickFormat()}var D=L.selectAll("text.nv-axislabel").data([j||null]);D.exit().remove();switch(f.orient()){case"top":D.enter().append("text").attr("class","nv-axislabel");var N;if(x.range().length<2){N=0}else{if(x.range().length===2){N=x.range()[1]}else{N=x.range()[x.range().length-1]+(x.range()[1]-x.range()[0])}}D.attr("text-anchor","middle").attr("y",0).attr("x",N/2);if(t){var K=C.selectAll("g.nv-axisMaxMin").data(x.domain());K.enter().append("g").attr("class","nv-axisMaxMin").append("text");K.exit().remove();K.attr("transform",function(P,O){return"translate("+a.utils.NaNtoZero(x(P))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-f.tickPadding()).attr("text-anchor","middle").text(function(Q,P){var O=E(Q);return(""+O).match("NaN")?"":O});K.watchTransition(h,"min-max top").attr("transform",function(P,O){return"translate("+a.utils.NaNtoZero(x.range()[O])+",0)"})}break;case"bottom":var I=l+36;var B=30;var G=L.selectAll("g").select("text");if(g%360){G.each(function(Q,O){var P=this.getBoundingClientRect().width;if(P>B){B=P}});var M=Math.abs(Math.sin(g*Math.PI/180));var I=(M?M*B:B)+30;G.attr("transform",function(Q,P,O){return"rotate("+g+" 0,0)"}).style("text-anchor",g%360>0?"start":"end")}D.enter().append("text").attr("class","nv-axislabel");var N;if(x.range().length<2){N=0}else{if(x.range().length===2){N=x.range()[1]}else{N=x.range()[x.range().length-1]+(x.range()[1]-x.range()[0])}}D.attr("text-anchor","middle").attr("y",I).attr("x",N/2);if(t){var K=C.selectAll("g.nv-axisMaxMin").data([x.domain()[0],x.domain()[x.domain().length-1]]);K.enter().append("g").attr("class","nv-axisMaxMin").append("text");K.exit().remove();K.attr("transform",function(P,O){return"translate("+a.utils.NaNtoZero((x(P)+(r?x.rangeBand()/2:0)))+",0)"}).select("text").attr("dy",".71em").attr("y",f.tickPadding()).attr("transform",function(Q,P,O){return"rotate("+g+" 0,0)"}).style("text-anchor",g?(g%360>0?"start":"end"):"middle").text(function(Q,P){var O=E(Q);return(""+O).match("NaN")?"":O});K.watchTransition(h,"min-max bottom").attr("transform",function(P,O){return"translate("+a.utils.NaNtoZero((x(P)+(r?x.rangeBand()/2:0)))+",0)"})}if(e){G.attr("transform",function(P,O){return"translate(0,"+(O%2==0?"0":"12")+")"})}break;case"right":D.enter().append("text").attr("class","nv-axislabel");D.style("text-anchor",u?"middle":"begin").attr("transform",u?"rotate(90)":"").attr("y",u?(-Math.max(n.right,q)+12):-10).attr("x",u?(x.range()[0]/2):f.tickPadding());if(t){var K=C.selectAll("g.nv-axisMaxMin").data(x.domain());K.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0);K.exit().remove();K.attr("transform",function(P,O){return"translate(0,"+a.utils.NaNtoZero(x(P))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",f.tickPadding()).style("text-anchor","start").text(function(Q,P){var O=E(Q);return(""+O).match("NaN")?"":O});K.watchTransition(h,"min-max right").attr("transform",function(P,O){return"translate(0,"+a.utils.NaNtoZero(x.range()[O])+")"}).select("text").style("opacity",1)}break;case"left":D.enter().append("text").attr("class","nv-axislabel");D.style("text-anchor",u?"middle":"end").attr("transform",u?"rotate(-90)":"").attr("y",u?(-Math.max(n.left,q)+25-(l||0)):-10).attr("x",u?(-x.range()[0]/2):-f.tickPadding());if(t){var K=C.selectAll("g.nv-axisMaxMin").data(x.domain());K.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0);K.exit().remove();K.attr("transform",function(P,O){return"translate(0,"+a.utils.NaNtoZero(s(P))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-f.tickPadding()).attr("text-anchor","end").text(function(Q,P){var O=E(Q);return(""+O).match("NaN")?"":O});K.watchTransition(h,"min-max right").attr("transform",function(P,O){return"translate(0,"+a.utils.NaNtoZero(x.range()[O])+")"}).select("text").style("opacity",1)}break}D.text(function(O){return O});if(t&&(f.orient()==="left"||f.orient()==="right")){L.selectAll("g").each(function(P,O){d3.select(this).select("text").attr("opacity",1);if(x(P)<x.range()[1]+10||x(P)>x.range()[0]-10){if(P>1e-10||P<-1e-10){d3.select(this).attr("opacity",0)}d3.select(this).select("text").attr("opacity",0)}});if(x.domain()[0]==x.domain()[1]&&x.domain()[0]==0){C.selectAll("g.nv-axisMaxMin").style("opacity",function(P,O){return !O?1:0})}}if(t&&(f.orient()==="top"||f.orient()==="bottom")){var H=[];C.selectAll("g.nv-axisMaxMin").each(function(Q,O){try{if(O){H.push(x(Q)-this.getBoundingClientRect().width-4)}else{H.push(x(Q)+this.getBoundingClientRect().width+4)}}catch(P){if(O){H.push(x(Q)-4)}else{H.push(x(Q)+4)}}});L.selectAll("g").each(function(P,O){if(x(P)<H[0]||x(P)>H[1]){if(P>1e-10||P<-1e-10){d3.select(this).remove()}else{d3.select(this).select("text").remove()}}})}if(p){L.selectAll(".tick").filter(function(O){return !parseFloat(Math.round(this.__data__*100000)/1000000)&&(this.__data__!==undefined)}).classed("zero",true)}s=x.copy()});h.renderEnd("axis immediate");return m}m.axis=f;m.dispatch=w;m.options=a.utils.optionsFunc.bind(m);m._options=Object.create({},{axisLabelDistance:{get:function(){return l},set:function(y){l=y}},staggerLabels:{get:function(){return e},set:function(y){e=y}},rotateLabels:{get:function(){return g},set:function(y){g=y}},rotateYLabel:{get:function(){return u},set:function(y){u=y}},highlightZero:{get:function(){return p},set:function(y){p=y}},showMaxMin:{get:function(){return t},set:function(y){t=y}},axisLabel:{get:function(){return j},set:function(y){j=y}},height:{get:function(){return o},set:function(y){o=y}},ticks:{get:function(){return v},set:function(y){v=y}},width:{get:function(){return q},set:function(y){q=y}},margin:{get:function(){return n},set:function(y){n.top=y.top!==undefined?y.top:n.top;n.right=y.right!==undefined?y.right:n.right;n.bottom=y.bottom!==undefined?y.bottom:n.bottom;n.left=y.left!==undefined?y.left:n.left}},duration:{get:function(){return c},set:function(y){c=y;h.reset(c)}},scale:{get:function(){return x},set:function(y){x=y;f.scale(x);r=typeof x.rangeBands==="function";a.utils.inheritOptionsD3(m,x,["domain","range","rangeBand","rangeBands"])}}});a.utils.initOptions(m);a.utils.inheritOptionsD3(m,f,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]);a.utils.inheritOptionsD3(m,x,["domain","range","rangeBand","rangeBands"]);return m};a.models.bullet=function(){var j={top:0,right:0,bottom:0,left:0},l="left",p=false,e=function(t){return t.ranges},k=function(t){return t.markers?t.markers:[0]},c=function(t){return t.measures},n=function(t){return t.rangeLabels?t.rangeLabels:[]},r=function(t){return t.markerLabels?t.markerLabels:[]},g=function(t){return t.measureLabels?t.measureLabels:[]},m=[0],f=380,s=30,h=null,i=a.utils.getColor(["#1f77b4"]),o=d3.dispatch("elementMouseover","elementMouseout");function q(t){t.each(function(R,M){var u=f-j.left-j.right,v=s-j.top-j.bottom,J=d3.select(this);a.utils.initSVG(J);var S=e.call(this,R,M).slice().sort(d3.descending),K=k.call(this,R,M).slice().sort(d3.descending),H=c.call(this,R,M).slice().sort(d3.descending),I=n.call(this,R,M).slice(),z=r.call(this,R,M).slice(),P=g.call(this,R,M).slice();var O=d3.scale.linear().domain(d3.extent(d3.merge([m,S]))).range(p?[u,0]:[0,u]);var Q=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(O.range());this.__chart__=O;var x=d3.min(S),A=d3.max(S),w=S[1];var C=J.selectAll("g.nv-wrap.nv-bullet").data([R]);var y=C.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet");var L=y.append("g");var N=C.select("g");L.append("rect").attr("class","nv-range nv-rangeMax");L.append("rect").attr("class","nv-range nv-rangeAvg");L.append("rect").attr("class","nv-range nv-rangeMin");L.append("rect").attr("class","nv-measure");L.append("path").attr("class","nv-markerTriangle");C.attr("transform","translate("+j.left+","+j.top+")");var G=function(T){return Math.abs(Q(T)-Q(0))},E=function(T){return Math.abs(O(T)-O(0))};var F=function(T){return T<0?Q(T):Q(0)},D=function(T){return T<0?O(T):O(0)};N.select("rect.nv-rangeMax").attr("height",v).attr("width",E(A>0?A:x)).attr("x",D(A>0?A:x)).datum(A>0?A:x);N.select("rect.nv-rangeAvg").attr("height",v).attr("width",E(w)).attr("x",D(w)).datum(w);N.select("rect.nv-rangeMin").attr("height",v).attr("width",E(A)).attr("x",D(A)).attr("width",E(A>0?x:A)).attr("x",D(A>0?x:A)).datum(A>0?x:A);N.select("rect.nv-measure").style("fill",i).attr("height",v/3).attr("y",v/3).attr("width",H<0?O(0)-O(H[0]):O(H[0])-O(0)).attr("x",D(H)).on("mouseover",function(){o.elementMouseover({value:H[0],label:P[0]||"Current",pos:[O(H[0]),v/2]})}).on("mouseout",function(){o.elementMouseout({value:H[0],label:P[0]||"Current"})});var B=v/6;if(K[0]){N.selectAll("path.nv-markerTriangle").attr("transform",function(T){return"translate("+O(K[0])+","+(v/2)+")"}).attr("d","M0,"+B+"L"+B+","+(-B)+" "+(-B)+","+(-B)+"Z").on("mouseover",function(){o.elementMouseover({value:K[0],label:z[0]||"Previous",pos:[O(K[0]),v/2]})}).on("mouseout",function(){o.elementMouseout({value:K[0],label:z[0]||"Previous"})})}else{N.selectAll("path.nv-markerTriangle").remove()}C.selectAll(".nv-range").on("mouseover",function(V,U){var T=I[U]||(!U?"Maximum":U==1?"Mean":"Minimum");o.elementMouseover({value:V,label:T,pos:[O(V),v/2]})}).on("mouseout",function(V,U){var T=I[U]||(!U?"Maximum":U==1?"Mean":"Minimum");o.elementMouseout({value:V,label:T})})});return q}q.dispatch=o;q.options=a.utils.optionsFunc.bind(q);q._options=Object.create({},{ranges:{get:function(){return e},set:function(t){e=t}},markers:{get:function(){return k},set:function(t){k=t}},measures:{get:function(){return c},set:function(t){c=t}},forceX:{get:function(){return m},set:function(t){m=t}},width:{get:function(){return f},set:function(t){f=t}},height:{get:function(){return s},set:function(t){s=t}},tickFormat:{get:function(){return h},set:function(t){h=t}},margin:{get:function(){return j},set:function(t){j.top=t.top!==undefined?t.top:j.top;j.right=t.right!==undefined?t.right:j.right;j.bottom=t.bottom!==undefined?t.bottom:j.bottom;j.left=t.left!==undefined?t.left:j.left}},orient:{get:function(){return l},set:function(t){l=t;p=l=="right"||l=="bottom"}},color:{get:function(){return i},set:function(t){i=a.utils.getColor(t)}}});a.utils.initOptions(q);return q};a.models.bulletChart=function(){var c=a.models.bullet();var k="left",m=false,i={top:5,right:40,bottom:20,left:120},f=function(t){return t.ranges},j=function(t){return t.markers?t.markers:[0]},e=function(t){return t.measures},g=null,r=55,h=null,o=true,s=function(u,t,z,w,v){return"<h3>"+t+"</h3><p>"+z+"</p>"},q="No Data Available.",l=d3.dispatch("tooltipShow","tooltipHide");var p=function(x,t){var w=x.pos[0]+(t.offsetLeft||0)+i.left,v=x.pos[1]+(t.offsetTop||0)+i.top,u=s(x.key,x.label,x.value,x,n);a.tooltip.show([w,v],u,x.value<0?"e":"w",null,t)};function n(t){t.each(function(O,I){var E=d3.select(this);a.utils.initSVG(E);var u=(g||parseInt(E.style("width"))||960)-i.left-i.right,v=r-i.top-i.bottom,y=this;n.update=function(){n(t)};n.container=this;if(!O||!f.call(this,O,I)){var A=E.selectAll(".nv-noData").data([q]);A.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");A.attr("x",i.left+u/2).attr("y",18+i.top+v/2).text(function(S){return S});return n}else{E.selectAll(".nv-noData").remove()}var R=f.call(this,O,I).slice().sort(d3.descending),G=j.call(this,O,I).slice().sort(d3.descending),C=e.call(this,O,I).slice().sort(d3.descending);var z=E.selectAll("g.nv-wrap.nv-bulletChart").data([O]);var w=z.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart");var H=w.append("g");var L=z.select("g");H.append("g").attr("class","nv-bulletWrap");H.append("g").attr("class","nv-titles");z.attr("transform","translate("+i.left+","+i.top+")");var M=d3.scale.linear().domain([0,Math.max(R[0],G[0],C[0])]).range(m?[u,0]:[0,u]);var N=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(M.range());this.__chart__=M;var D=function(S){return Math.abs(N(S)-N(0))},B=function(S){return Math.abs(M(S)-M(0))};var Q=H.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(r-i.top-i.bottom)/2+")");Q.append("text").attr("class","nv-title").text(function(S){return S.title});Q.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(S){return S.subtitle});c.width(u).height(v);var P=L.select(".nv-bulletWrap");d3.transition(P).call(c);var K=h||M.tickFormat(u/100);var J=L.selectAll("g.nv-tick").data(M.ticks(u/50),function(S){return this.textContent||K(S)});var F=J.enter().append("g").attr("class","nv-tick").attr("transform",function(S){return"translate("+N(S)+",0)"}).style("opacity",0.000001);F.append("line").attr("y1",v).attr("y2",v*7/6);F.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",v*7/6).text(K);var x=d3.transition(J).attr("transform",function(S){return"translate("+M(S)+",0)"}).style("opacity",1);x.select("line").attr("y1",v).attr("y2",v*7/6);x.select("text").attr("y",v*7/6);d3.transition(J.exit()).attr("transform",function(S){return"translate("+M(S)+",0)"}).style("opacity",0.000001).remove();l.on("tooltipShow",function(S){S.key=O.title;if(o){p(S,y.parentNode)}})});d3.timer.flush();return n}c.dispatch.on("elementMouseover.tooltip",function(t){l.tooltipShow(t)});c.dispatch.on("elementMouseout.tooltip",function(t){l.tooltipHide(t)});l.on("tooltipHide",function(){if(o){a.tooltip.cleanup()}});n.bullet=c;n.dispatch=l;n.options=a.utils.optionsFunc.bind(n);n._options=Object.create({},{ranges:{get:function(){return f},set:function(t){f=t}},markers:{get:function(){return j},set:function(t){j=t}},measures:{get:function(){return e},set:function(t){e=t}},width:{get:function(){return g},set:function(t){g=t}},height:{get:function(){return r},set:function(t){r=t}},tickFormat:{get:function(){return h},set:function(t){h=t}},tooltips:{get:function(){return o},set:function(t){o=t}},tooltipContent:{get:function(){return s},set:function(t){s=t}},noData:{get:function(){return q},set:function(t){q=t}},margin:{get:function(){return i},set:function(t){i.top=t.top!==undefined?t.top:i.top;i.right=t.right!==undefined?t.right:i.right;i.bottom=t.bottom!==undefined?t.bottom:i.bottom;i.left=t.left!==undefined?t.left:i.left}},orient:{get:function(){return k},set:function(t){k=t;m=k=="right"||k=="bottom"}}});a.utils.inheritOptions(n,c);a.utils.initOptions(n);return n};a.models.cumulativeLineChart=function(){var z=a.models.line(),r=a.models.axis(),n=a.models.axis(),F=a.models.legend(),t=a.models.legend(),J=a.interactiveGuideline();var j={top:30,right:30,bottom:50,left:60},v=a.utils.defaultColor(),c=null,f=null,q=true,h=true,I=true,M=false,H=true,k=true,g=false,K=true,A=function(T,S,W,V,U){return"<h3>"+T+"</h3><p>"+W+" at "+S+"</p>"},E,C,B=z.id(),Q=a.utils.state(),u=null,m="No Data Available.",p=function(x){return x.average},G=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),L=250,s=250,N=false;Q.index=0;Q.rescaleY=K;r.orient("bottom").tickPadding(7);n.orient((M)?"right":"left");t.updateState(false);var i=d3.scale.linear(),w={i:0,x:0},D=a.utils.renderWatch(G,s);var R=function(X,T){var W=X.pos[0]+(T.offsetLeft||0),V=X.pos[1]+(T.offsetTop||0),S=r.tickFormat()(z.x()(X.point,X.pointIndex)),Y=n.tickFormat()(z.y()(X.point,X.pointIndex)),U=A(X.series.key,S,Y,X,O);a.tooltip.show([W,V],U,null,null,T)};var P=function(x){return function(){return{active:x.map(function(y){return !y.disabled}),index:w.i,rescaleY:K}}};var l=function(x){return function(y){if(y.index!==undefined){w.i=y.index}if(y.rescaleY!==undefined){K=y.rescaleY}if(y.active!==undefined){x.forEach(function(T,S){T.disabled=!y.active[S]})}}};function O(x){D.reset();D.models(z);if(h){D.models(r)}if(I){D.models(n)}x.each(function(ao){var ab=d3.select(this);a.utils.initSVG(ab);ab.classed("nv-chart-"+B,true);var Y=this;var S=(c||parseInt(ab.style("width"))||960)-j.left-j.right,U=(f||parseInt(ab.style("height"))||400)-j.top-j.bottom;O.update=function(){if(s===0){ab.call(O)}else{ab.transition().duration(s).call(O)}};O.container=this;Q.setter(l(ao),O.update).getter(P(ao)).update();Q.disabled=ao.map(function(aq){return !!aq.disabled});if(!u){var ap;u={};for(ap in Q){if(Q[ap] instanceof Array){u[ap]=Q[ap].slice(0)}else{u[ap]=Q[ap]}}}var an=d3.behavior.drag().on("dragstart",al).on("drag",am).on("dragend",ag);function al(ar,aq){d3.select(O.container).style("cursor","ew-resize")}function am(ar,aq){w.x=d3.event.x;w.i=Math.round(i.invert(w.x));ae()}function ag(ar,aq){d3.select(O.container).style("cursor","auto");Q.index=w.i;G.stateChange(Q)}if(!ao||!ao.length||!ao.filter(function(aq){return aq.values.length}).length){var aa=ab.selectAll(".nv-noData").data([m]);aa.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");aa.attr("x",j.left+S/2).attr("y",j.top+U/2).text(function(aq){return aq});return O}else{ab.selectAll(".nv-noData").remove()}E=z.xScale();C=z.yScale();if(!K){var T=ao.filter(function(aq){return !aq.disabled}).map(function(at,ar){var aq=d3.extent(at.values,z.y());if(aq[0]<-0.95){aq[0]=-0.95}return[(aq[0]-aq[1])/(1+aq[1]),(aq[1]-aq[0])/(1+aq[0])]});var V=[d3.min(T,function(aq){return aq[0]}),d3.max(T,function(aq){return aq[1]})];z.yDomain(V)}else{z.yDomain(null)}i.domain([0,ao[0].values.length-1]).range([0,S]).clamp(true);var ao=e(w.i,ao);var aj=(g)?"none":"all";var Z=ab.selectAll("g.nv-wrap.nv-cumulativeLine").data([ao]);var ad=Z.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g");var ak=Z.select("g");ad.append("g").attr("class","nv-interactive");ad.append("g").attr("class","nv-x nv-axis").style("pointer-events","none");ad.append("g").attr("class","nv-y nv-axis");ad.append("g").attr("class","nv-background");ad.append("g").attr("class","nv-linesWrap").style("pointer-events",aj);ad.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");ad.append("g").attr("class","nv-legendWrap");ad.append("g").attr("class","nv-controlsWrap");if(q){F.width(S);ak.select(".nv-legendWrap").datum(ao).call(F);if(j.top!=F.height()){j.top=F.height();U=(f||parseInt(ab.style("height"))||400)-j.top-j.bottom}ak.select(".nv-legendWrap").attr("transform","translate(0,"+(-j.top)+")")}if(k){var X=[{key:"Re-scale y-axis",disabled:!K}];t.width(140).color(["#444","#444","#444"]).rightAlign(false).margin({top:5,right:0,bottom:5,left:20});ak.select(".nv-controlsWrap").datum(X).attr("transform","translate(0,"+(-j.top)+")").call(t)}Z.attr("transform","translate("+j.left+","+j.top+")");if(M){ak.select(".nv-y.nv-axis").attr("transform","translate("+S+",0)")}var y=ao.filter(function(aq){return aq.tempDisabled});Z.select(".tempDisabled").remove();if(y.length){Z.append("text").attr("class","tempDisabled").attr("x",S/2).attr("y","-.71em").style("text-anchor","end").text(y.map(function(aq){return aq.key}).join(", ")+" values cannot be calculated for this time period.")}if(g){J.width(S).height(U).margin({left:j.left,top:j.top}).svgContainer(ab).xScale(E);Z.select(".nv-interactive").call(J)}ad.select(".nv-background").append("rect");ak.select(".nv-background rect").attr("width",S).attr("height",U);z.y(function(aq){return aq.display.y}).width(S).height(U).color(ao.map(function(ar,aq){return ar.color||v(ar,aq)}).filter(function(ar,aq){return !ao[aq].disabled&&!ao[aq].tempDisabled}));var af=ak.select(".nv-linesWrap").datum(ao.filter(function(aq){return !aq.disabled&&!aq.tempDisabled}));af.call(z);ao.forEach(function(ar,aq){ar.seriesIndex=aq});var ai=ao.filter(function(aq){return !aq.disabled&&!!p(aq)});var ah=ak.select(".nv-avgLinesWrap").selectAll("line").data(ai,function(aq){return aq.key});var W=function(ar){var aq=C(p(ar));if(aq<0){return 0}if(aq>U){return U}return aq};ah.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(ar,aq){return z.color()(ar,ar.seriesIndex)}).attr("x1",0).attr("x2",S).attr("y1",W).attr("y2",W);ah.style("stroke-opacity",function(ar){var aq=C(p(ar));if(aq<0||aq>U){return 0}return 1}).attr("x1",0).attr("x2",S).attr("y1",W).attr("y2",W);ah.exit().remove();var ac=af.selectAll(".nv-indexLine").data([w]);ac.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",0.5).style("pointer-events","all").call(an);ac.attr("transform",function(aq){return"translate("+i(aq.i)+",0)"}).attr("height",U);if(h){r.scale(E).ticks(a.utils.calcTicksX(S/70,ao)).tickSize(-U,0);ak.select(".nv-x.nv-axis").attr("transform","translate(0,"+C.range()[0]+")");ak.select(".nv-x.nv-axis").call(r)}if(I){n.scale(C).ticks(a.utils.calcTicksY(U/36,ao)).tickSize(-S,0);ak.select(".nv-y.nv-axis").call(n)}function ae(){ac.data([w]);var aq=O.duration();O.duration(0);O.update();O.duration(aq)}ak.select(".nv-background rect").on("click",function(){w.x=d3.mouse(this)[0];w.i=Math.round(i.invert(w.x));Q.index=w.i;G.stateChange(Q);ae()});z.dispatch.on("elementClick",function(aq){w.i=aq.pointIndex;w.x=i(w.i);Q.index=w.i;G.stateChange(Q);ae()});t.dispatch.on("legendClick",function(ar,aq){ar.disabled=!ar.disabled;K=!ar.disabled;Q.rescaleY=K;G.stateChange(Q);O.update()});F.dispatch.on("stateChange",function(ar){for(var aq in ar){Q[aq]=ar[aq]}G.stateChange(Q);O.update()});J.dispatch.on("elementMousemove",function(ax){z.clearHighlights();var av,aA,at,aq=[];ao.filter(function(aC,aB){aC.seriesIndex=aB;return !aC.disabled}).forEach(function(aD,aC){aA=a.interactiveBisect(aD.values,ax.pointXValue,O.x());z.highlightPoint(aC,aA,true);var aB=aD.values[aA];if(typeof aB==="undefined"){return}if(typeof av==="undefined"){av=aB}if(typeof at==="undefined"){at=O.xScale()(O.x()(aB,aA))}aq.push({key:aD.key,value:O.y()(aB,aA),color:v(aD,aD.seriesIndex)})});if(aq.length>2){var az=O.yScale().invert(ax.mouseY);var ar=Math.abs(O.yScale().domain()[0]-O.yScale().domain()[1]);var aw=0.03*ar;var ay=a.nearestValueIndex(aq.map(function(aB){return aB.value}),az,aw);if(ay!==null){aq[ay].highlight=true}}var au=r.tickFormat()(O.x()(av,aA),aA);J.tooltip.position({left:at+j.left,top:ax.mouseY+j.top}).chartContainer(Y.parentNode).enabled(H).valueFormatter(function(aC,aB){return n.tickFormat()(aC)}).data({value:au,series:aq})();J.renderGuideLine(at)});J.dispatch.on("elementMouseout",function(aq){G.tooltipHide();z.clearHighlights()});G.on("tooltipShow",function(aq){if(H){R(aq,Y.parentNode)}});G.on("changeState",function(aq){if(typeof aq.disabled!=="undefined"){ao.forEach(function(at,ar){at.disabled=aq.disabled[ar]});Q.disabled=aq.disabled}if(typeof aq.index!=="undefined"){w.i=aq.index;w.x=i(w.i);Q.index=aq.index;ac.data([w])}if(typeof aq.rescaleY!=="undefined"){K=aq.rescaleY}O.update()})});D.renderEnd("cumulativeLineChart immediate");return O}z.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+j.left,x.pos[1]+j.top];G.tooltipShow(x)});z.dispatch.on("elementMouseout.tooltip",function(x){G.tooltipHide(x)});G.on("tooltipHide",function(){if(H){a.tooltip.cleanup()}});var o=null;function e(x,y){if(!o){o=z.y()}return y.map(function(T,V){if(!T.values){return T}var S=T.values[x];if(S==null){return T}var U=o(S,x);if(U<-0.95&&!N){T.tempDisabled=true;return T}T.tempDisabled=false;T.values=T.values.map(function(W,X){W.display={y:(o(W,X)-U)/(1+U)};return W});return T})}O.dispatch=G;O.lines=z;O.legend=F;O.xAxis=r;O.yAxis=n;O.interactiveLayer=J;O.state=Q;O.options=a.utils.optionsFunc.bind(O);O._options=Object.create({},{width:{get:function(){return c},set:function(x){c=x}},height:{get:function(){return f},set:function(x){f=x}},rescaleY:{get:function(){return K},set:function(x){K=x}},showControls:{get:function(){return k},set:function(x){k=x}},showLegend:{get:function(){return q},set:function(x){q=x}},average:{get:function(){return p},set:function(x){p=x}},tooltips:{get:function(){return H},set:function(x){H=x}},tooltipContent:{get:function(){return A},set:function(x){A=x}},defaultState:{get:function(){return u},set:function(x){u=x}},noData:{get:function(){return m},set:function(x){m=x}},showXAxis:{get:function(){return h},set:function(x){h=x}},showYAxis:{get:function(){return I},set:function(x){I=x}},noErrorCheck:{get:function(){return N},set:function(x){N=x}},margin:{get:function(){return j},set:function(x){j.top=x.top!==undefined?x.top:j.top;j.right=x.right!==undefined?x.right:j.right;j.bottom=x.bottom!==undefined?x.bottom:j.bottom;j.left=x.left!==undefined?x.left:j.left}},color:{get:function(){return v},set:function(x){v=a.utils.getColor(x);F.color(v)}},useInteractiveGuideline:{get:function(){return g},set:function(x){g=x;if(x===true){O.interactive(false);O.useVoronoi(false)}}},rightAlignYAxis:{get:function(){return M},set:function(x){M=x;n.orient((x)?"right":"left")}},duration:{get:function(){return s},set:function(x){s=x;z.duration(s);r.duration(s);n.duration(s);D.reset(s)}}});a.utils.inheritOptions(O,z);a.utils.initOptions(O);return O};a.models.discreteBar=function(){var l={top:0,right:0,bottom:0,left:0},p=960,n=500,o=Math.floor(Math.random()*10000),j=d3.scale.ordinal(),i=d3.scale.linear(),w=function(x){return x.x},u=function(x){return x.y},f=[0],t=a.utils.defaultColor(),z=false,h=d3.format(",.2f"),r,q,m,s,B=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),A="discreteBar",c=250;var v,e;var g=a.utils.renderWatch(B,c);function k(x){g.reset();x.each(function(J){var M=p-l.left-l.right,F=n-l.top-l.bottom,C=d3.select(this);a.utils.initSVG(C);J.forEach(function(O,N){O.values.forEach(function(P){P.series=N})});var E=(r&&q)?[]:J.map(function(N){return N.values.map(function(P,O){return{x:w(P,O),y:u(P,O),y0:P.y0}})});j.domain(r||d3.merge(E).map(function(N){return N.x})).rangeBands(m||[0,M],0.1);i.domain(q||d3.extent(d3.merge(E).map(function(N){return N.y}).concat(f)));if(z){i.range(s||[F-(i.domain()[0]<0?12:0),i.domain()[1]>0?12:0])}else{i.range(s||[F,0])}v=v||j;e=e||i.copy().range([i(0),i(0)]);var D=C.selectAll("g.nv-wrap.nv-discretebar").data([J]);var H=D.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar");var y=H.append("g");var K=D.select("g");y.append("g").attr("class","nv-groups");D.attr("transform","translate("+l.left+","+l.top+")");var G=D.select(".nv-groups").selectAll(".nv-group").data(function(N){return N},function(N){return N.key});G.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);G.exit().watchTransition(g,"discreteBar: exit groups").style("stroke-opacity",0.000001).style("fill-opacity",0.000001).remove();G.attr("class",function(O,N){return"nv-group nv-series-"+N}).classed("hover",function(N){return N.hover});G.watchTransition(g,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",0.75);var L=G.selectAll("g.nv-bar").data(function(N){return N.values});L.exit().remove();var I=L.enter().append("g").attr("transform",function(P,O,N){return"translate("+(j(w(P,O))+j.rangeBand()*0.05)+", "+i(0)+")"}).on("mouseover",function(O,N){d3.select(this).classed("hover",true);B.elementMouseover({value:u(O,N),point:O,series:J[O.series],pos:[j(w(O,N))+(j.rangeBand()*(O.series+0.5)/J.length),i(u(O,N))],pointIndex:N,seriesIndex:O.series,e:d3.event})}).on("mouseout",function(O,N){d3.select(this).classed("hover",false);B.elementMouseout({value:u(O,N),point:O,series:J[O.series],pointIndex:N,seriesIndex:O.series,e:d3.event})}).on("click",function(O,N){B.elementClick({value:u(O,N),point:O,series:J[O.series],pos:[j(w(O,N))+(j.rangeBand()*(O.series+0.5)/J.length),i(u(O,N))],pointIndex:N,seriesIndex:O.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",function(O,N){B.elementDblClick({value:u(O,N),point:O,series:J[O.series],pos:[j(w(O,N))+(j.rangeBand()*(O.series+0.5)/J.length),i(u(O,N))],pointIndex:N,seriesIndex:O.series,e:d3.event});d3.event.stopPropagation()});I.append("rect").attr("height",0).attr("width",j.rangeBand()*0.9/J.length);if(z){I.append("text").attr("text-anchor","middle");L.select("text").text(function(O,N){return h(u(O,N))}).watchTransition(g,"discreteBar: bars text").attr("x",j.rangeBand()*0.9/2).attr("y",function(O,N){return u(O,N)<0?i(u(O,N))-i(0)+12:-4})}else{L.selectAll("text").remove()}L.attr("class",function(O,N){return u(O,N)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(O,N){return O.color||t(O,N)}).style("stroke",function(O,N){return O.color||t(O,N)}).select("rect").attr("class",A).watchTransition(g,"discreteBar: bars rect").attr("width",j.rangeBand()*0.9/J.length);L.watchTransition(g,"discreteBar: bars").attr("transform",function(Q,N){var P=j(w(Q,N))+j.rangeBand()*0.05,O=u(Q,N)<0?i(0):i(0)-i(u(Q,N))<1?i(0)-1:i(u(Q,N));return"translate("+P+", "+O+")"}).select("rect").attr("height",function(O,N){return Math.max(Math.abs(i(u(O,N))-i((q&&q[0])||0))||1)});v=j.copy();e=i.copy()});g.renderEnd("discreteBar immediate");return k}k.dispatch=B;k.options=a.utils.optionsFunc.bind(k);k._options=Object.create({},{width:{get:function(){return p},set:function(x){p=x}},height:{get:function(){return n},set:function(x){n=x}},forceY:{get:function(){return f},set:function(x){f=x}},showValues:{get:function(){return z},set:function(x){z=x}},x:{get:function(){return w},set:function(x){w=x}},y:{get:function(){return u},set:function(x){u=x}},xScale:{get:function(){return j},set:function(x){j=x}},yScale:{get:function(){return i},set:function(x){i=x}},xDomain:{get:function(){return r},set:function(x){r=x}},yDomain:{get:function(){return q},set:function(x){q=x}},xRange:{get:function(){return m},set:function(x){m=x}},yRange:{get:function(){return s},set:function(x){s=x}},valueFormat:{get:function(){return h},set:function(x){h=x}},id:{get:function(){return o},set:function(x){o=x}},rectClass:{get:function(){return A},set:function(x){A=x}},margin:{get:function(){return l},set:function(x){l.top=x.top!==undefined?x.top:l.top;l.right=x.right!==undefined?x.right:l.right;l.bottom=x.bottom!==undefined?x.bottom:l.bottom;l.left=x.left!==undefined?x.left:l.left}},color:{get:function(){return t},set:function(x){t=a.utils.getColor(x)}},duration:{get:function(){return c},set:function(x){c=x;g.reset(c)}}});a.utils.initOptions(k);return k};a.models.discreteBarChart=function(){var w=a.models.discreteBar(),m=a.models.axis(),e=a.models.axis();var r={top:15,right:10,bottom:50,left:60},t=null,s=null,u=a.utils.getColor(),v=true,p=true,l=false,g=false,f=true,j=function(B,A,E,D,C){return"<h3>"+A+"</h3><p>"+E+"</p>"},o,n,i="No Data Available.",z=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate","renderEnd"),c=250;m.orient("bottom").highlightZero(false).showMaxMin(false).tickFormat(function(x){return x});e.orient((l)?"right":"left").tickFormat(d3.format(",.1f"));var h=function(F,B){var E=F.pos[0]+(B.offsetLeft||0),D=F.pos[1]+(B.offsetTop||0),A=m.tickFormat()(w.x()(F.point,F.pointIndex)),G=e.tickFormat()(w.y()(F.point,F.pointIndex)),C=j(F.series.key,A,G,F,q);a.tooltip.show([E,D],C,F.value<0?"n":"s",null,B)};var k=a.utils.renderWatch(z,c);function q(x){k.reset();k.models(w);if(v){k.models(m)}if(p){k.models(e)}x.each(function(G){var A=d3.select(this),J=this;a.utils.initSVG(A);var K=(t||parseInt(A.style("width"))||960)-r.left-r.right,E=(s||parseInt(A.style("height"))||400)-r.top-r.bottom;q.update=function(){z.beforeUpdate();A.transition().duration(c).call(q)};q.container=this;if(!G||!G.length||!G.filter(function(L){return L.values.length}).length){var B=A.selectAll(".nv-noData").data([i]);B.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");B.attr("x",r.left+K/2).attr("y",r.top+E/2).text(function(L){return L});return q}else{A.selectAll(".nv-noData").remove()}o=w.xScale();n=w.yScale().clamp(true);var C=A.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([G]);var y=C.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g");var D=y.append("defs");var H=C.select("g");y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");y.append("g").attr("class","nv-barsWrap");H.attr("transform","translate("+r.left+","+r.top+")");if(l){H.select(".nv-y.nv-axis").attr("transform","translate("+K+",0)")}w.width(K).height(E);var I=H.select(".nv-barsWrap").datum(G.filter(function(L){return !L.disabled}));I.transition().call(w);D.append("clipPath").attr("id","nv-x-label-clip-"+w.id()).append("rect");H.select("#nv-x-label-clip-"+w.id()+" rect").attr("width",o.rangeBand()*(g?2:1)).attr("height",16).attr("x",-o.rangeBand()/(g?1:2));if(v){m.scale(o).ticks(a.utils.calcTicksX(K/100,G)).tickSize(-E,0);H.select(".nv-x.nv-axis").attr("transform","translate(0,"+(n.range()[0]+((w.showValues()&&n.domain()[0]<0)?16:0))+")");H.select(".nv-x.nv-axis").call(m);var F=H.select(".nv-x.nv-axis").selectAll("g");if(g){F.selectAll("text").attr("transform",function(N,M,L){return"translate(0,"+(L%2==0?"5":"17")+")"})}}if(p){e.scale(n).ticks(a.utils.calcTicksY(E/36,G)).tickSize(-K,0);H.select(".nv-y.nv-axis").call(e)}H.select(".nv-zeroLine line").attr("x1",0).attr("x2",K).attr("y1",n(0)).attr("y2",n(0));z.on("tooltipShow",function(L){if(f){h(L,J.parentNode)}})});k.renderEnd("discreteBar chart immediate");return q}w.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+r.left,x.pos[1]+r.top];z.tooltipShow(x)});w.dispatch.on("elementMouseout.tooltip",function(x){z.tooltipHide(x)});z.on("tooltipHide",function(){if(f){a.tooltip.cleanup()}});q.dispatch=z;q.discretebar=w;q.xAxis=m;q.yAxis=e;q.options=a.utils.optionsFunc.bind(q);q._options=Object.create({},{width:{get:function(){return t},set:function(x){t=x}},height:{get:function(){return s},set:function(x){s=x}},staggerLabels:{get:function(){return g},set:function(x){g=x}},showXAxis:{get:function(){return v},set:function(x){v=x}},showYAxis:{get:function(){return p},set:function(x){p=x}},tooltips:{get:function(){return f},set:function(x){f=x}},tooltipContent:{get:function(){return j},set:function(x){j=x}},noData:{get:function(){return i},set:function(x){i=x}},margin:{get:function(){return r},set:function(x){r.top=x.top!==undefined?x.top:r.top;r.right=x.right!==undefined?x.right:r.right;r.bottom=x.bottom!==undefined?x.bottom:r.bottom;r.left=x.left!==undefined?x.left:r.left}},duration:{get:function(){return c},set:function(x){c=x;k.reset(c);w.duration(c);m.duration(c);e.duration(c)}},color:{get:function(){return u},set:function(x){u=a.utils.getColor(x);w.color(u)}},rightAlignYAxis:{get:function(){return l},set:function(x){l=x;e.orient((x)?"right":"left")}}});a.utils.inheritOptions(q,w);a.utils.initOptions(q);return q};a.models.distribution=function(){var h={top:0,right:0,bottom:0,left:0},c=400,p=8,e="x",k=function(q){return q[e]},i=a.utils.defaultColor(),f=d3.scale.linear(),j,g=250,n=d3.dispatch("renderEnd");var m;var l=a.utils.renderWatch(n,g);function o(q){l.reset();q.each(function(v){var w=c-(e==="x"?h.left+h.right:h.top+h.bottom),z=e=="x"?"y":"x",s=d3.select(this);a.utils.initSVG(s);m=m||f;var t=s.selectAll("g.nv-distribution").data([v]);var u=t.enter().append("g").attr("class","nvd3 nv-distribution");var r=u.append("g");var x=t.select("g");t.attr("transform","translate("+h.left+","+h.top+")");var A=x.selectAll("g.nv-dist").data(function(B){return B},function(B){return B.key});A.enter().append("g");A.attr("class",function(C,B){return"nv-dist nv-series-"+B}).style("stroke",function(C,B){return i(C,B)});var y=A.selectAll("line.nv-dist"+e).data(function(B){return B.values});y.enter().append("line").attr(e+"1",function(C,B){return m(k(C,B))}).attr(e+"2",function(C,B){return m(k(C,B))});l.transition(A.exit().selectAll("line.nv-dist"+e),"dist exit").attr(e+"1",function(C,B){return f(k(C,B))}).attr(e+"2",function(C,B){return f(k(C,B))}).style("stroke-opacity",0).remove();y.attr("class",function(C,B){return"nv-dist"+e+" nv-dist"+e+"-"+B}).attr(z+"1",0).attr(z+"2",p);l.transition(y,"dist").attr(e+"1",function(C,B){return f(k(C,B))}).attr(e+"2",function(C,B){return f(k(C,B))});m=f.copy()});l.renderEnd("distribution immediate");return o}o.options=a.utils.optionsFunc.bind(o);o.dispatch=n;o.margin=function(q){if(!arguments.length){return h}h.top=typeof q.top!="undefined"?q.top:h.top;h.right=typeof q.right!="undefined"?q.right:h.right;h.bottom=typeof q.bottom!="undefined"?q.bottom:h.bottom;h.left=typeof q.left!="undefined"?q.left:h.left;return o};o.width=function(q){if(!arguments.length){return c}c=q;return o};o.axis=function(q){if(!arguments.length){return e}e=q;return o};o.size=function(q){if(!arguments.length){return p}p=q;return o};o.getData=function(q){if(!arguments.length){return k}k=d3.functor(q);return o};o.scale=function(q){if(!arguments.length){return f}f=q;return o};o.color=function(q){if(!arguments.length){return i}i=a.utils.getColor(q);return o};o.duration=function(q){if(!arguments.length){return g}g=q;l.reset(g);return o};return o};a.models.historicalBar=function(){var k={top:0,right:0,bottom:0,left:0},o=null,m=null,n=Math.floor(Math.random()*10000),h=d3.scale.linear(),g=d3.scale.linear(),u=function(x){return x.x},t=function(x){return x.y},e=[],c=[0],i=false,w=true,s=a.utils.defaultColor(),q,p,l,r,z=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),v=true;var f=a.utils.renderWatch(z,0);function j(x){x.each(function(G){f.reset();var A=d3.select(this);var J=(o||parseInt(A.style("width"))||960)-k.left-k.right;var C=(m||parseInt(A.style("height"))||400)-k.top-k.bottom;a.utils.initSVG(A);h.domain(q||d3.extent(G[0].values.map(u).concat(e)));if(i){h.range(l||[J*0.5/G[0].values.length,J*(G[0].values.length-0.5)/G[0].values.length])}else{h.range(l||[0,J])}g.domain(p||d3.extent(G[0].values.map(t).concat(c))).range(r||[C,0]);if(h.domain()[0]===h.domain()[1]){h.domain()[0]?h.domain([h.domain()[0]-h.domain()[0]*0.01,h.domain()[1]+h.domain()[1]*0.01]):h.domain([-1,1])}if(g.domain()[0]===g.domain()[1]){g.domain()[0]?g.domain([g.domain()[0]+g.domain()[0]*0.01,g.domain()[1]-g.domain()[1]*0.01]):g.domain([-1,1])}var B=A.selectAll("g.nv-wrap.nv-historicalBar-"+n).data([G[0].values]);var E=B.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+n);var D=E.append("defs");var y=E.append("g");var H=B.select("g");y.append("g").attr("class","nv-bars");B.attr("transform","translate("+k.left+","+k.top+")");A.on("click",function(L,K){z.chartClick({data:L,index:K,pos:d3.event,id:n})});D.append("clipPath").attr("id","nv-chart-clip-path-"+n).append("rect");B.select("#nv-chart-clip-path-"+n+" rect").attr("width",J).attr("height",C);H.attr("clip-path",w?"url(#nv-chart-clip-path-"+n+")":"");var I=B.select(".nv-bars").selectAll(".nv-bar").data(function(K){return K},function(L,K){return u(L,K)});I.exit().remove();var F=I.enter().append("rect").attr("x",0).attr("y",function(L,K){return a.utils.NaNtoZero(g(Math.max(0,t(L,K))))}).attr("height",function(L,K){return a.utils.NaNtoZero(Math.abs(g(t(L,K))-g(0)))}).attr("transform",function(L,K){return"translate("+(h(u(L,K))-J/G[0].values.length*0.45)+",0)"}).on("mouseover",function(L,K){if(!v){return}d3.select(this).classed("hover",true);z.elementMouseover({point:L,series:G[0],pos:[h(u(L,K)),g(t(L,K))],pointIndex:K,seriesIndex:0,e:d3.event})}).on("mouseout",function(L,K){if(!v){return}d3.select(this).classed("hover",false);z.elementMouseout({point:L,series:G[0],pointIndex:K,seriesIndex:0,e:d3.event})}).on("click",function(L,K){if(!v){return}z.elementClick({value:t(L,K),data:L,index:K,pos:[h(u(L,K)),g(t(L,K))],e:d3.event,id:n});d3.event.stopPropagation()}).on("dblclick",function(L,K){if(!v){return}z.elementDblClick({value:t(L,K),data:L,index:K,pos:[h(u(L,K)),g(t(L,K))],e:d3.event,id:n});d3.event.stopPropagation()});I.attr("fill",function(L,K){return s(L,K)}).attr("class",function(M,L,K){return(t(M,L)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+K+"-"+L}).watchTransition(f,"bars").attr("transform",function(L,K){return"translate("+(h(u(L,K))-J/G[0].values.length*0.45)+",0)"}).attr("width",(J/G[0].values.length)*0.9);I.watchTransition(f,"bars").attr("y",function(M,K){var L=t(M,K)<0?g(0):g(0)-g(t(M,K))<1?g(0)-1:g(t(M,K));return a.utils.NaNtoZero(L)}).attr("height",function(L,K){return a.utils.NaNtoZero(Math.max(Math.abs(g(t(L,K))-g(0)),1))})});f.renderEnd("historicalBar immediate");return j}j.highlightPoint=function(y,x){d3.select(".nv-historicalBar-"+n).select(".nv-bars .nv-bar-0-"+y).classed("hover",x)};j.clearHighlights=function(){d3.select(".nv-historicalBar-"+n).select(".nv-bars .nv-bar.hover").classed("hover",false)};j.dispatch=z;j.options=a.utils.optionsFunc.bind(j);j._options=Object.create({},{width:{get:function(){return o},set:function(x){o=x}},height:{get:function(){return m},set:function(x){m=x}},forceX:{get:function(){return e},set:function(x){e=x}},forceY:{get:function(){return c},set:function(x){c=x}},padData:{get:function(){return i},set:function(x){i=x}},x:{get:function(){return u},set:function(x){u=x}},y:{get:function(){return t},set:function(x){t=x}},xScale:{get:function(){return h},set:function(x){h=x}},yScale:{get:function(){return g},set:function(x){g=x}},xDomain:{get:function(){return q},set:function(x){q=x}},yDomain:{get:function(){return p},set:function(x){p=x}},xRange:{get:function(){return l},set:function(x){l=x}},yRange:{get:function(){return r},set:function(x){r=x}},clipEdge:{get:function(){return w},set:function(x){w=x}},id:{get:function(){return n},set:function(x){n=x}},interactive:{get:function(){return v},set:function(x){v=x}},margin:{get:function(){return k},set:function(x){k.top=x.top!==undefined?x.top:k.top;k.right=x.right!==undefined?x.right:k.right;k.bottom=x.bottom!==undefined?x.bottom:k.bottom;k.left=x.left!==undefined?x.left:k.left}},color:{get:function(){return s},set:function(x){s=a.utils.getColor(x)}}});a.utils.initOptions(j);return j};a.models.historicalBarChart=function(F){var w=F||a.models.historicalBar(),n=a.models.axis(),c=a.models.axis(),f=a.models.legend(),z=a.interactiveGuideline();var u={top:30,right:90,bottom:50,left:90},B=a.utils.defaultColor(),A=null,v=null,C=false,D=true,r=true,m=false,q=false,e=true,j=function(H,G,K,J,I){return"<h3>"+H+"</h3><p>"+K+" at "+G+"</p>"},p,o,i={},l=null,h="No Data Available.",E=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),s=250;n.orient("bottom").tickPadding(7);c.orient((m)?"right":"left");var g=function(J,O){if(O){var H=d3.select(O).select("svg");var P=(H.node())?H.attr("viewBox"):null;if(P){P=P.split(" ");var K=parseInt(H.style("width"))/P[2];J.pos[0]=J.pos[0]*K;J.pos[1]=J.pos[1]*K}}var G=J.pos[0]+(O.offsetLeft||0),M=J.pos[1]+(O.offsetTop||0),N=n.tickFormat()(w.x()(J.point,J.pointIndex)),L=c.tickFormat()(w.y()(J.point,J.pointIndex)),I=j(J.series.key,N,L,J,t);a.tooltip.show([G,M],I,null,null,O)};var k=a.utils.renderWatch(E,0);function t(x){x.each(function(K){k.reset();k.models(w);if(D){k.models(n)}if(r){k.models(c)}var G=d3.select(this),N=this;a.utils.initSVG(G);var P=(A||parseInt(G.style("width"))||960)-u.left-u.right,J=(v||parseInt(G.style("height"))||400)-u.top-u.bottom;t.update=function(){G.transition().duration(s).call(t)};t.container=this;i.disabled=K.map(function(Q){return !!Q.disabled});if(!l){var O;l={};for(O in i){if(i[O] instanceof Array){l[O]=i[O].slice(0)}else{l[O]=i[O]}}}if(!K||!K.length||!K.filter(function(Q){return Q.values.length}).length){var H=G.selectAll(".nv-noData").data([h]);H.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");H.attr("x",u.left+P/2).attr("y",u.top+J/2).text(function(Q){return Q});return t}else{G.selectAll(".nv-noData").remove()}p=w.xScale();o=w.yScale();var I=G.selectAll("g.nv-wrap.nv-historicalBarChart").data([K]);var y=I.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g");var L=I.select("g");y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis");y.append("g").attr("class","nv-barsWrap");y.append("g").attr("class","nv-legendWrap");y.append("g").attr("class","nv-interactive");if(C){f.width(P);L.select(".nv-legendWrap").datum(K).call(f);if(u.top!=f.height()){u.top=f.height();J=(v||parseInt(G.style("height"))||400)-u.top-u.bottom}I.select(".nv-legendWrap").attr("transform","translate(0,"+(-u.top)+")")}I.attr("transform","translate("+u.left+","+u.top+")");if(m){L.select(".nv-y.nv-axis").attr("transform","translate("+P+",0)")}if(q){z.width(P).height(J).margin({left:u.left,top:u.top}).svgContainer(G).xScale(p);I.select(".nv-interactive").call(z)}w.width(P).height(J).color(K.map(function(R,Q){return R.color||B(R,Q)}).filter(function(R,Q){return !K[Q].disabled}));var M=L.select(".nv-barsWrap").datum(K.filter(function(Q){return !Q.disabled}));M.transition().call(w);if(D){n.scale(p).tickSize(-J,0);L.select(".nv-x.nv-axis").attr("transform","translate(0,"+o.range()[0]+")");L.select(".nv-x.nv-axis").transition().call(n)}if(r){c.scale(o).ticks(a.utils.calcTicksY(J/36,K)).tickSize(-P,0);L.select(".nv-y.nv-axis").transition().call(c)}z.dispatch.on("elementMousemove",function(V){w.clearHighlights();var U,T,Q,S=[];K.filter(function(X,W){X.seriesIndex=W;return !X.disabled}).forEach(function(Y,X){T=a.interactiveBisect(Y.values,V.pointXValue,t.x());w.highlightPoint(T,true);var W=Y.values[T];if(typeof W==="undefined"){return}if(typeof U==="undefined"){U=W}if(typeof Q==="undefined"){Q=t.xScale()(t.x()(W,T))}S.push({key:Y.key,value:t.y()(W,T),color:B(Y,Y.seriesIndex),data:Y.values[T]})});var R=n.tickFormat()(t.x()(U,T));z.tooltip.position({left:Q+u.left,top:V.mouseY+u.top}).chartContainer(N.parentNode).enabled(e).valueFormatter(function(X,W){return c.tickFormat()(X)}).data({value:R,series:S})();z.renderGuideLine(Q)});z.dispatch.on("elementMouseout",function(Q){E.tooltipHide();w.clearHighlights()});f.dispatch.on("legendClick",function(R,Q){R.disabled=!R.disabled;if(!K.filter(function(S){return !S.disabled}).length){K.map(function(S){S.disabled=false;I.selectAll(".nv-series").classed("disabled",false);return S})}i.disabled=K.map(function(S){return !!S.disabled});E.stateChange(i);x.transition().call(t)});f.dispatch.on("legendDblclick",function(Q){K.forEach(function(R){R.disabled=true});Q.disabled=false;i.disabled=K.map(function(R){return !!R.disabled});E.stateChange(i);t.update()});E.on("tooltipShow",function(Q){if(e){g(Q,N.parentNode)}});E.on("changeState",function(Q){if(typeof Q.disabled!=="undefined"){K.forEach(function(S,R){S.disabled=Q.disabled[R]});i.disabled=Q.disabled}t.update()})});k.renderEnd("historicalBarChart immediate");return t}w.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+u.left,x.pos[1]+u.top];E.tooltipShow(x)});w.dispatch.on("elementMouseout.tooltip",function(x){E.tooltipHide(x)});E.on("tooltipHide",function(){if(e){a.tooltip.cleanup()}});t.dispatch=E;t.bars=w;t.legend=f;t.xAxis=n;t.yAxis=c;t.interactiveLayer=z;t.options=a.utils.optionsFunc.bind(t);t._options=Object.create({},{width:{get:function(){return A},set:function(x){A=x}},height:{get:function(){return v},set:function(x){v=x}},showLegend:{get:function(){return C},set:function(x){C=x}},showXAxis:{get:function(){return D},set:function(x){D=x}},showYAxis:{get:function(){return r},set:function(x){r=x}},tooltips:{get:function(){return e},set:function(x){e=x}},tooltipContent:{get:function(){return j},set:function(x){j=x}},defaultState:{get:function(){return l},set:function(x){l=x}},noData:{get:function(){return h},set:function(x){h=x}},margin:{get:function(){return u},set:function(x){u.top=x.top!==undefined?x.top:u.top;u.right=x.right!==undefined?x.right:u.right;u.bottom=x.bottom!==undefined?x.bottom:u.bottom;u.left=x.left!==undefined?x.left:u.left}},color:{get:function(){return B},set:function(x){B=a.utils.getColor(x);f.color(B);w.color(B)}},duration:{get:function(){return s},set:function(x){s=x;k.reset(s);c.duration(s);n.duration(s)}},rightAlignYAxis:{get:function(){return m},set:function(x){m=x;c.orient((x)?"right":"left")}},useInteractiveGuideline:{get:function(){return q},set:function(x){q=x;if(x===true){t.interactive(false)}}}});a.utils.inheritOptions(t,w);a.utils.initOptions(t);return t};a.models.ohlcBarChart=function(){var c=a.models.historicalBarChart(a.models.ohlcBar());c.useInteractiveGuideline(true);c.interactiveLayer.tooltip.contentGenerator(function(f){var g=f.series[0].data;var e=g.open<g.close?"2ca02c":"d62728";return'<h3 style="color: #'+e+'">'+f.value+"</h3><table><tr><td>open:</td><td>"+c.yAxis.tickFormat()(g.open)+"</td></tr><tr><td>close:</td><td>"+c.yAxis.tickFormat()(g.close)+"</td></tr><tr><td>high</td><td>"+c.yAxis.tickFormat()(g.high)+"</td></tr><tr><td>low:</td><td>"+c.yAxis.tickFormat()(g.low)+"</td></tr></table>"});return c};a.models.legend=function(){var g={top:5,right:0,bottom:5,left:0},e=400,m=20,i=function(o){return o.key},h=a.utils.defaultColor(),k=true,f=true,n=true,c=false,j=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");function l(o){o.each(function(I){var p=e-g.left-g.right,A=d3.select(this);a.utils.initSVG(A);var y=A.selectAll("g.nv-legend").data([I]);var E=y.enter().append("g").attr("class","nvd3 nv-legend").append("g");var H=y.select("g");y.attr("transform","translate("+g.left+","+g.top+")");var z=H.selectAll(".nv-series").data(function(J){return J});var t=z.enter().append("g").attr("class","nv-series").on("mouseover",function(K,J){j.legendMouseover(K,J)}).on("mouseout",function(K,J){j.legendMouseout(K,J)}).on("click",function(K,J){j.legendClick(K,J);if(n){if(c){I.forEach(function(L){L.disabled=true});K.disabled=false}else{K.disabled=!K.disabled;if(I.every(function(L){return L.disabled})){I.forEach(function(L){L.disabled=false})}}j.stateChange({disabled:I.map(function(L){return !!L.disabled})})}}).on("dblclick",function(K,J){j.legendDblclick(K,J);if(n){I.forEach(function(L){L.disabled=true});K.disabled=false;j.stateChange({disabled:I.map(function(L){return !!L.disabled})})}});t.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);t.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");z.classed("nv-disabled",function(J){return J.disabled});z.exit().remove();z.select("circle").style("fill",function(K,J){return K.color||h(K,J)}).style("stroke",function(K,J){return K.color||h(K,J)});z.select("text").text(i);if(k){var s=[];z.each(function(N,L){var K=d3.select(this).select("text");var J;try{J=K.node().getComputedTextLength();if(J<=0){throw Error()}}catch(M){J=a.utils.calcApproxTextWidth(K)}s.push(J+28)});var w=0;var D=0;var B=[];while(D<p&&w<s.length){B[w]=s[w];D+=s[w++]}if(w===0){w=1}while(D>p&&w>1){B=[];w--;for(var F=0;F<s.length;F++){if(s[F]>(B[F%w]||0)){B[F%w]=s[F]}}D=B.reduce(function(K,L,J,M){return K+L})}var q=[];for(var G=0,x=0;G<w;G++){q[G]=x;x+=B[G]}z.attr("transform",function(K,J){return"translate("+q[J%w]+","+(5+Math.floor(J/w)*20)+")"});if(f){H.attr("transform","translate("+(e-g.right-D)+","+g.top+")")}else{H.attr("transform","translate(0,"+g.top+")")}m=g.top+g.bottom+(Math.ceil(s.length/w)*20)}else{var u=5,v=5,C=0,r;z.attr("transform",function(L,J){var K=d3.select(this).select("text").node().getComputedTextLength()+28;r=v;if(e<g.left+g.right+r+K){v=r=5;u+=20}v+=K;if(v>C){C=v}return"translate("+r+","+u+")"});H.attr("transform","translate("+(e-g.right-C)+","+g.top+")");m=g.top+g.bottom+u+15}});return l}l.dispatch=j;l.options=a.utils.optionsFunc.bind(l);l._options=Object.create({},{width:{get:function(){return e},set:function(o){e=o}},height:{get:function(){return m},set:function(o){m=o}},key:{get:function(){return i},set:function(o){i=o}},align:{get:function(){return k},set:function(o){k=o}},rightAlign:{get:function(){return f},set:function(o){f=o}},updateState:{get:function(){return n},set:function(o){n=o}},radioButtonMode:{get:function(){return c},set:function(o){c=o}},margin:{get:function(){return g},set:function(o){g.top=o.top!==undefined?o.top:g.top;g.right=o.right!==undefined?o.right:g.right;g.bottom=o.bottom!==undefined?o.bottom:g.bottom;g.left=o.left!==undefined?o.left:g.left}},color:{get:function(){return h},set:function(o){h=a.utils.getColor(o)}}});a.utils.initOptions(l);return l};a.models.line=function(){var k=a.models.scatter();var m={top:0,right:0,bottom:0,left:0},o=960,n=500,p=a.utils.defaultColor(),r=function(w){return w.x},q=function(w){return w.y},e=function(x,w){return !isNaN(q(x,w))&&q(x,w)!==null},t=function(w){return w.area},u=false,j,i,h="linear",c=250,v=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");k.pointSize(16).pointDomain([16,256]);var s,f,g=a.utils.renderWatch(v,c);function l(w){g.reset();g.models(k);w.each(function(G){var J=o-m.left-m.right,B=n-m.top-m.bottom,y=d3.select(this);a.utils.initSVG(y);j=k.xScale();i=k.yScale();s=s||j;f=f||i;var z=y.selectAll("g.nv-wrap.nv-line").data([G]);var E=z.enter().append("g").attr("class","nvd3 nv-wrap nv-line");var C=E.append("defs");var x=E.append("g");var H=z.select("g");x.append("g").attr("class","nv-groups");x.append("g").attr("class","nv-scatterWrap");z.attr("transform","translate("+m.left+","+m.top+")");k.width(J).height(B);var A=z.select(".nv-scatterWrap");A.call(k);C.append("clipPath").attr("id","nv-edge-clip-"+k.id()).append("rect");z.select("#nv-edge-clip-"+k.id()+" rect").attr("width",J).attr("height",(B>0)?B:0);H.attr("clip-path",u?"url(#nv-edge-clip-"+k.id()+")":"");A.attr("clip-path",u?"url(#nv-edge-clip-"+k.id()+")":"");var D=z.select(".nv-groups").selectAll(".nv-group").data(function(K){return K},function(K){return K.key});D.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);D.exit().remove();D.attr("class",function(L,K){return"nv-group nv-series-"+K}).classed("hover",function(K){return K.hover}).style("fill",function(L,K){return p(L,K)}).style("stroke",function(L,K){return p(L,K)});D.watchTransition(g,"line: groups").style("stroke-opacity",1).style("fill-opacity",0.5);var I=D.selectAll("path.nv-area").data(function(K){return t(K)?[K]:[]});I.enter().append("path").attr("class","nv-area").attr("d",function(K){return d3.svg.area().interpolate(h).defined(e).x(function(M,L){return a.utils.NaNtoZero(s(r(M,L)))}).y0(function(M,L){return a.utils.NaNtoZero(f(q(M,L)))}).y1(function(M,L){return f(i.domain()[0]<=0?i.domain()[1]>=0?0:i.domain()[1]:i.domain()[0])}).apply(this,[K.values])});D.exit().selectAll("path.nv-area").remove();I.watchTransition(g,"line: areaPaths").attr("d",function(K){return d3.svg.area().interpolate(h).defined(e).x(function(M,L){return a.utils.NaNtoZero(j(r(M,L)))}).y0(function(M,L){return a.utils.NaNtoZero(i(q(M,L)))}).y1(function(M,L){return i(i.domain()[0]<=0?i.domain()[1]>=0?0:i.domain()[1]:i.domain()[0])}).apply(this,[K.values])});var F=D.selectAll("path.nv-line").data(function(K){return[K.values]});F.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(h).defined(e).x(function(L,K){return a.utils.NaNtoZero(s(r(L,K)))}).y(function(L,K){return a.utils.NaNtoZero(f(q(L,K)))}));F.watchTransition(g,"line: linePaths").attr("d",d3.svg.line().interpolate(h).defined(e).x(function(L,K){return a.utils.NaNtoZero(j(r(L,K)))}).y(function(L,K){return a.utils.NaNtoZero(i(q(L,K)))}));s=j.copy();f=i.copy()});g.renderEnd("line immediate");return l}l.dispatch=v;l.scatter=k;k.dispatch.on("elementClick",function(){v.elementClick.apply(this,arguments)});k.dispatch.on("elementMouseover",function(){v.elementMouseover.apply(this,arguments)});k.dispatch.on("elementMouseout",function(){v.elementMouseout.apply(this,arguments)});l.options=a.utils.optionsFunc.bind(l);l._options=Object.create({},{width:{get:function(){return o},set:function(w){o=w}},height:{get:function(){return n},set:function(w){n=w}},defined:{get:function(){return e},set:function(w){e=w}},interpolate:{get:function(){return h},set:function(w){h=w}},clipEdge:{get:function(){return u},set:function(w){u=w}},margin:{get:function(){return m},set:function(w){m.top=w.top!==undefined?w.top:m.top;m.right=w.right!==undefined?w.right:m.right;m.bottom=w.bottom!==undefined?w.bottom:m.bottom;m.left=w.left!==undefined?w.left:m.left}},duration:{get:function(){return c},set:function(w){c=w;g.reset(c);k.duration(c)}},isArea:{get:function(){return t},set:function(w){t=d3.functor(w)}},x:{get:function(){return r},set:function(w){r=w;k.x(w)}},y:{get:function(){return q},set:function(w){q=w;k.y(w)}},color:{get:function(){return p},set:function(w){p=a.utils.getColor(w);k.color(p)}}});a.utils.inheritOptions(l,k);a.utils.initOptions(l);return l};a.models.lineChart=function(){var f=a.models.line(),q=a.models.axis(),e=a.models.axis(),h=a.models.legend(),A=a.interactiveGuideline();var w={top:30,right:20,bottom:50,left:60},C=a.utils.defaultColor(),B=null,z=null,E=true,F=true,u=true,p=false,t=false,g=true,l=function(I,H,L,K,J){return"<h3>"+I+"</h3><p>"+L+" at "+H+"</p>"},s,r,k=a.utils.state(),n=null,j="No Data Available.",G=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),c=250;q.orient("bottom").tickPadding(7);e.orient((p)?"right":"left");var i=function(M,I){var L=M.pos[0]+(I.offsetLeft||0),K=M.pos[1]+(I.offsetTop||0),H=q.tickFormat()(f.x()(M.point,M.pointIndex)),N=e.tickFormat()(f.y()(M.point,M.pointIndex)),J=l(M.series.key,H,N,M,v);a.tooltip.show([L,K],J,null,null,I)};var m=a.utils.renderWatch(G,c);var o=function(x){return function(){return{active:x.map(function(y){return !y.disabled})}}};var D=function(x){return function(y){if(y.active!==undefined){x.forEach(function(I,H){I.disabled=!y.active[H]})}}};function v(x){m.reset();m.models(f);if(F){m.models(q)}if(u){m.models(e)}x.each(function(M){var I=d3.select(this),O=this;a.utils.initSVG(I);var Q=(B||parseInt(I.style("width"))||960)-w.left-w.right,L=(z||parseInt(I.style("height"))||400)-w.top-w.bottom;v.update=function(){if(c===0){I.call(v)}else{I.transition().duration(c).call(v)}};v.container=this;k.setter(D(M),v.update).getter(o(M)).update();k.disabled=M.map(function(R){return !!R.disabled});if(!n){var P;n={};for(P in k){if(k[P] instanceof Array){n[P]=k[P].slice(0)}else{n[P]=k[P]}}}if(!M||!M.length||!M.filter(function(R){return R.values.length}).length){var J=I.selectAll(".nv-noData").data([j]);J.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");J.attr("x",w.left+Q/2).attr("y",w.top+L/2).text(function(R){return R});return v}else{I.selectAll(".nv-noData").remove()}s=f.xScale();r=f.yScale();var K=I.selectAll("g.nv-wrap.nv-lineChart").data([M]);var y=K.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g");var N=K.select("g");y.append("rect").style("opacity",0);y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis");y.append("g").attr("class","nv-linesWrap");y.append("g").attr("class","nv-legendWrap");y.append("g").attr("class","nv-interactive");N.select("rect").attr("width",Q).attr("height",(L>0)?L:0);if(E){h.width(Q);N.select(".nv-legendWrap").datum(M).call(h);if(w.top!=h.height()){w.top=h.height();L=(z||parseInt(I.style("height"))||400)-w.top-w.bottom}K.select(".nv-legendWrap").attr("transform","translate(0,"+(-w.top)+")")}K.attr("transform","translate("+w.left+","+w.top+")");if(p){N.select(".nv-y.nv-axis").attr("transform","translate("+Q+",0)")}if(t){A.width(Q).height(L).margin({left:w.left,top:w.top}).svgContainer(I).xScale(s);K.select(".nv-interactive").call(A)}f.width(Q).height(L).color(M.map(function(S,R){return S.color||C(S,R)}).filter(function(S,R){return !M[R].disabled}));var H=N.select(".nv-linesWrap").datum(M.filter(function(R){return !R.disabled}));H.call(f);if(F){q.scale(s).ticks(a.utils.calcTicksX(Q/100,M)).tickSize(-L,0);N.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")");N.select(".nv-x.nv-axis").call(q)}if(u){e.scale(r).ticks(a.utils.calcTicksY(L/36,M)).tickSize(-Q,0);N.select(".nv-y.nv-axis").call(e)}h.dispatch.on("stateChange",function(S){for(var R in S){k[R]=S[R]}G.stateChange(k);v.update()});A.dispatch.on("elementMousemove",function(X){f.clearHighlights();var V,aa,T,R=[];M.filter(function(ac,ab){ac.seriesIndex=ab;return !ac.disabled}).forEach(function(ad,ac){aa=a.interactiveBisect(ad.values,X.pointXValue,v.x());f.highlightPoint(ac,aa,true);var ab=ad.values[aa];if(typeof ab==="undefined"){return}if(typeof V==="undefined"){V=ab}if(typeof T==="undefined"){T=v.xScale()(v.x()(ab,aa))}R.push({key:ad.key,value:v.y()(ab,aa),color:C(ad,ad.seriesIndex)})});if(R.length>2){var Z=v.yScale().invert(X.mouseY);var S=Math.abs(v.yScale().domain()[0]-v.yScale().domain()[1]);var W=0.03*S;var Y=a.nearestValueIndex(R.map(function(ab){return ab.value}),Z,W);if(Y!==null){R[Y].highlight=true}}var U=q.tickFormat()(v.x()(V,aa));A.tooltip.position({left:T+w.left,top:X.mouseY+w.top}).chartContainer(O.parentNode).enabled(g).valueFormatter(function(ac,ab){return e.tickFormat()(ac)}).data({value:U,series:R})();A.renderGuideLine(T)});A.dispatch.on("elementClick",function(T){var R,S=[];M.filter(function(V,U){V.seriesIndex=U;return !V.disabled}).forEach(function(V){var X=a.interactiveBisect(V.values,T.pointXValue,v.x());var U=V.values[X];if(typeof U==="undefined"){return}if(typeof R==="undefined"){R=v.xScale()(v.x()(U,X))}var W=v.yScale()(v.y()(U,X));S.push({point:U,pointIndex:X,pos:[R,W],seriesIndex:V.seriesIndex,series:V})});f.dispatch.elementClick(S)});A.dispatch.on("elementMouseout",function(R){G.tooltipHide();f.clearHighlights()});G.on("tooltipShow",function(R){if(g){i(R,O.parentNode)}});G.on("changeState",function(R){if(typeof R.disabled!=="undefined"&&M.length===R.disabled.length){M.forEach(function(T,S){T.disabled=R.disabled[S]});k.disabled=R.disabled}v.update()})});m.renderEnd("lineChart immediate");return v}f.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+w.left,x.pos[1]+w.top];G.tooltipShow(x)});f.dispatch.on("elementMouseout.tooltip",function(x){G.tooltipHide(x)});G.on("tooltipHide",function(){if(g){a.tooltip.cleanup()}});v.dispatch=G;v.lines=f;v.legend=h;v.xAxis=q;v.yAxis=e;v.interactiveLayer=A;v.dispatch=G;v.options=a.utils.optionsFunc.bind(v);v._options=Object.create({},{width:{get:function(){return B},set:function(x){B=x}},height:{get:function(){return z},set:function(x){z=x}},showLegend:{get:function(){return E},set:function(x){E=x}},showXAxis:{get:function(){return F},set:function(x){F=x}},showYAxis:{get:function(){return u},set:function(x){u=x}},tooltips:{get:function(){return g},set:function(x){g=x}},tooltipContent:{get:function(){return l},set:function(x){l=x}},defaultState:{get:function(){return n},set:function(x){n=x}},noData:{get:function(){return j},set:function(x){j=x}},margin:{get:function(){return w},set:function(x){w.top=x.top!==undefined?x.top:w.top;w.right=x.right!==undefined?x.right:w.right;w.bottom=x.bottom!==undefined?x.bottom:w.bottom;w.left=x.left!==undefined?x.left:w.left}},duration:{get:function(){return c},set:function(x){c=x;m.reset(c);f.duration(c);q.duration(c);e.duration(c)}},color:{get:function(){return C},set:function(x){C=a.utils.getColor(x);h.color(C);f.color(C)}},rightAlignYAxis:{get:function(){return p},set:function(x){p=x;e.orient(p?"right":"left")}},useInteractiveGuideline:{get:function(){return t},set:function(x){t=x;if(t){f.interactive(false);f.useVoronoi(false)}}}});a.utils.inheritOptions(v,f);a.utils.initOptions(v);return v};a.models.linePlusBarChart=function(){var A=a.models.line(),p=a.models.line(),z=a.models.historicalBar(),F=a.models.historicalBar(),r=a.models.axis(),v=a.models.axis(),n=a.models.axis(),g=a.models.axis(),J=a.models.axis(),s=a.models.axis(),D=a.models.legend(),L=d3.svg.brush();var i={top:30,right:30,bottom:30,left:60},M={top:0,right:30,bottom:20,left:60},c=null,f=null,K=function(x){return x.x},I=function(x){return x.y},u=a.utils.defaultColor(),o=true,N=true,w=false,y=true,E=50,h,j=null,H=true,B=function(Y,X,ab,aa,Z){return"<h3>"+Y+"</h3><p>"+ab+" at "+X+"</p>"},C,m,W,S,R,Q,l="No Data Available.",G=d3.dispatch("tooltipShow","tooltipHide","brush","stateChange","changeState"),O=0,V=a.utils.state(),t=null,e=" (left axis)",q=" (right axis)";A.clipEdge(true);p.interactive(false);r.orient("bottom").tickPadding(5);n.orient("left");g.orient("right");v.orient("bottom").tickPadding(5);J.orient("left");s.orient("right");var U=function(ac,Y){if(h){ac.pointIndex+=Math.ceil(h[0])}var ab=ac.pos[0]+(Y.offsetLeft||0),aa=ac.pos[1]+(Y.offsetTop||0),X=r.tickFormat()(A.x()(ac.point,ac.pointIndex)),ad=(ac.series.bar?n:g).tickFormat()(A.y()(ac.point,ac.pointIndex)),Z=B(ac.series.key,X,ad,ac,P);a.tooltip.show([ab,aa],Z,ac.value<0?"n":"s",null,Y)};var T=function(x){return function(){return{active:x.map(function(X){return !X.disabled})}}};var k=function(x){return function(X){if(X.active!==undefined){x.forEach(function(Z,Y){Z.disabled=!X.active[Y]})}}};function P(x){x.each(function(av){var ai=d3.select(this),ac=this;a.utils.initSVG(ai);var X=(c||parseInt(ai.style("width"))||960)-i.left-i.right,ad=(f||parseInt(ai.style("height"))||400)-i.top-i.bottom-(N?E:0),ab=E-M.top-M.bottom;P.update=function(){ai.transition().duration(O).call(P)};P.container=this;V.setter(k(av),P.update).getter(T(av)).update();V.disabled=av.map(function(ax){return !!ax.disabled});if(!t){var aw;t={};for(aw in V){if(V[aw] instanceof Array){t[aw]=V[aw].slice(0)}else{t[aw]=V[aw]}}}if(!av||!av.length||!av.filter(function(ax){return ax.values.length}).length){var ah=ai.selectAll(".nv-noData").data([l]);ah.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");ah.attr("x",i.left+X/2).attr("y",i.top+ad/2).text(function(ax){return ax});return P}else{ai.selectAll(".nv-noData").remove()}var Y=av.filter(function(ax){return !ax.disabled&&ax.bar});var ao=av.filter(function(ax){return !ax.bar});C=z.xScale();m=v.scale();W=z.yScale();S=A.yScale();R=F.yScale();Q=p.yScale();var af=av.filter(function(ax){return !ax.disabled&&ax.bar}).map(function(ax){return ax.values.map(function(az,ay){return{x:K(az,ay),y:I(az,ay)}})});var ae=av.filter(function(ax){return !ax.disabled&&!ax.bar}).map(function(ax){return ax.values.map(function(az,ay){return{x:K(az,ay),y:I(az,ay)}})});C.range([0,X]);m.domain(d3.extent(d3.merge(af.concat(ae)),function(ax){return ax.x})).range([0,X]);var ag=ai.selectAll("g.nv-wrap.nv-linePlusBar").data([av]);var al=ag.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g");var ap=ag.select("g");al.append("g").attr("class","nv-legendWrap");var aa=al.append("g").attr("class","nv-focus");aa.append("g").attr("class","nv-x nv-axis");aa.append("g").attr("class","nv-y1 nv-axis");aa.append("g").attr("class","nv-y2 nv-axis");aa.append("g").attr("class","nv-barsWrap");aa.append("g").attr("class","nv-linesWrap");var Z=al.append("g").attr("class","nv-context");Z.append("g").attr("class","nv-x nv-axis");Z.append("g").attr("class","nv-y1 nv-axis");Z.append("g").attr("class","nv-y2 nv-axis");Z.append("g").attr("class","nv-barsWrap");Z.append("g").attr("class","nv-linesWrap");Z.append("g").attr("class","nv-brushBackground");Z.append("g").attr("class","nv-x nv-brush");if(o){D.width(X/2);ap.select(".nv-legendWrap").datum(av.map(function(ax){ax.originalKey=ax.originalKey===undefined?ax.key:ax.originalKey;ax.key=ax.originalKey+(ax.bar?e:q);return ax})).call(D);if(i.top!=D.height()){i.top=D.height();ad=(f||parseInt(ai.style("height"))||400)-i.top-i.bottom-E}ap.select(".nv-legendWrap").attr("transform","translate("+(X/2)+","+(-i.top)+")")}ag.attr("transform","translate("+i.left+","+i.top+")");ap.select(".nv-context").style("display",N?"initial":"none");F.width(X).height(ab).color(av.map(function(ay,ax){return ay.color||u(ay,ax)}).filter(function(ay,ax){return !av[ax].disabled&&av[ax].bar}));p.width(X).height(ab).color(av.map(function(ay,ax){return ay.color||u(ay,ax)}).filter(function(ay,ax){return !av[ax].disabled&&!av[ax].bar}));var aq=ap.select(".nv-context .nv-barsWrap").datum(Y.length?Y:[{values:[]}]);var an=ap.select(".nv-context .nv-linesWrap").datum(!ao[0].disabled?ao:[{values:[]}]);ap.select(".nv-context").attr("transform","translate(0,"+(ad+i.bottom+M.top)+")");aq.transition().call(F);an.transition().call(p);if(y){v.ticks(a.utils.calcTicksX(X/100,av)).tickSize(-ab,0);ap.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+R.range()[0]+")");ap.select(".nv-context .nv-x.nv-axis").transition().call(v)}if(w){J.scale(R).ticks(ab/36).tickSize(-X,0);s.scale(Q).ticks(ab/36).tickSize(Y.length?0:-X,0);ap.select(".nv-context .nv-y3.nv-axis").style("opacity",Y.length?1:0).attr("transform","translate(0,"+m.range()[0]+")");ap.select(".nv-context .nv-y2.nv-axis").style("opacity",ao.length?1:0).attr("transform","translate("+m.range()[1]+",0)");ap.select(".nv-context .nv-y1.nv-axis").transition().call(J);ap.select(".nv-context .nv-y2.nv-axis").transition().call(s)}L.x(m).on("brush",ak);if(j){L.extent(j)}var au=ap.select(".nv-brushBackground").selectAll("g").data([j||L.extent()]);var ar=au.enter().append("g");ar.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",ab);ar.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",ab);var at=ap.select(".nv-x.nv-brush").call(L);at.selectAll("rect").attr("height",ab);at.selectAll(".resize").append("path").attr("d",aj);D.dispatch.on("stateChange",function(ay){for(var ax in ay){V[ax]=ay[ax]}G.stateChange(V);P.update()});G.on("tooltipShow",function(ax){if(H){U(ax,ac.parentNode)}});G.on("changeState",function(ax){if(typeof ax.disabled!=="undefined"){av.forEach(function(az,ay){az.disabled=ax.disabled[ay]});V.disabled=ax.disabled}P.update()});function aj(az){var ay=+(az=="e"),ax=ay?1:-1,aA=ab/3;return"M"+(0.5*ax)+","+aA+"A6,6 0 0 "+ay+" "+(6.5*ax)+","+(aA+6)+"V"+(2*aA-6)+"A6,6 0 0 "+ay+" "+(0.5*ax)+","+(2*aA)+"ZM"+(2.5*ax)+","+(aA+8)+"V"+(2*aA-8)+"M"+(4.5*ax)+","+(aA+8)+"V"+(2*aA-8)}function am(){if(!L.empty()){L.extent(j)}au.data([L.empty()?m.domain():j]).each(function(aA,ax){var ay=m(aA[0])-m.range()[0],az=m.range()[1]-m(aA[1]);d3.select(this).select(".left").attr("width",ay<0?0:ay);d3.select(this).select(".right").attr("x",m(aA[1])).attr("width",az<0?0:az)})}function ak(){j=L.empty()?null:L.extent();h=L.empty()?m.domain():L.extent();G.brush({extent:h,brush:L});am();z.width(X).height(ad).color(av.map(function(aA,az){return aA.color||u(aA,az)}).filter(function(aA,az){return !av[az].disabled&&av[az].bar}));A.width(X).height(ad).color(av.map(function(aA,az){return aA.color||u(aA,az)}).filter(function(aA,az){return !av[az].disabled&&!av[az].bar}));var ay=ap.select(".nv-focus .nv-barsWrap").datum(!Y.length?[{values:[]}]:Y.map(function(aA,az){return{key:aA.key,values:aA.values.filter(function(aC,aB){return z.x()(aC,aB)>=h[0]&&z.x()(aC,aB)<=h[1]})}}));var ax=ap.select(".nv-focus .nv-linesWrap").datum(ao[0].disabled?[{values:[]}]:ao.map(function(aA,az){return{key:aA.key,values:aA.values.filter(function(aC,aB){return A.x()(aC,aB)>=h[0]&&A.x()(aC,aB)<=h[1]})}}));if(Y.length){C=z.xScale()}else{C=A.xScale()}r.scale(C).ticks(a.utils.calcTicksX(X/100,av)).tickSize(-ad,0);r.domain([Math.ceil(h[0]),Math.floor(h[1])]);ap.select(".nv-x.nv-axis").transition().duration(O).call(r);ay.transition().duration(O).call(z);ax.transition().duration(O).call(A);ap.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+W.range()[0]+")");n.scale(W).ticks(a.utils.calcTicksY(ad/36,av)).tickSize(-X,0);g.scale(S).ticks(a.utils.calcTicksY(ad/36,av)).tickSize(Y.length?0:-X,0);ap.select(".nv-focus .nv-y1.nv-axis").style("opacity",Y.length?1:0);ap.select(".nv-focus .nv-y2.nv-axis").style("opacity",ao.length&&!ao[0].disabled?1:0).attr("transform","translate("+C.range()[1]+",0)");ap.select(".nv-focus .nv-y1.nv-axis").transition().duration(O).call(n);ap.select(".nv-focus .nv-y2.nv-axis").transition().duration(O).call(g)}ak()});return P}A.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+i.left,x.pos[1]+i.top];G.tooltipShow(x)});A.dispatch.on("elementMouseout.tooltip",function(x){G.tooltipHide(x)});z.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+i.left,x.pos[1]+i.top];G.tooltipShow(x)});z.dispatch.on("elementMouseout.tooltip",function(x){G.tooltipHide(x)});G.on("tooltipHide",function(){if(H){a.tooltip.cleanup()}});P.dispatch=G;P.legend=D;P.lines=A;P.lines2=p;P.bars=z;P.bars2=F;P.xAxis=r;P.x2Axis=v;P.y1Axis=n;P.y2Axis=g;P.y3Axis=J;P.y4Axis=s;P.options=a.utils.optionsFunc.bind(P);P._options=Object.create({},{width:{get:function(){return c},set:function(x){c=x}},height:{get:function(){return f},set:function(x){f=x}},showLegend:{get:function(){return o},set:function(x){o=x}},tooltips:{get:function(){return H},set:function(x){H=x}},tooltipContent:{get:function(){return B},set:function(x){B=x}},brushExtent:{get:function(){return j},set:function(x){j=x}},noData:{get:function(){return l},set:function(x){l=x}},focusEnable:{get:function(){return N},set:function(x){N=x}},focusHeight:{get:function(){return E},set:function(x){E=x}},focusShowAxisX:{get:function(){return y},set:function(x){y=x}},focusShowAxisY:{get:function(){return w},set:function(x){w=x}},legendLeftAxisHint:{get:function(){return e},set:function(x){e=x}},legendRightAxisHint:{get:function(){return q},set:function(x){q=x}},margin:{get:function(){return i},set:function(x){i.top=x.top!==undefined?x.top:i.top;i.right=x.right!==undefined?x.right:i.right;i.bottom=x.bottom!==undefined?x.bottom:i.bottom;i.left=x.left!==undefined?x.left:i.left}},duration:{get:function(){return O},set:function(x){O=x}},color:{get:function(){return u},set:function(x){u=a.utils.getColor(x);D.color(u)}},x:{get:function(){return K},set:function(x){K=x;A.x(x);p.x(x);z.x(x);F.x(x)}},y:{get:function(){return I},set:function(x){I=x;A.y(x);p.y(x);z.y(x);F.y(x)}}});a.utils.inheritOptions(P,A);a.utils.initOptions(P);return P};a.models.lineWithFocusChart=function(){var f=a.models.line(),r=a.models.line(),s=a.models.axis(),c=a.models.axis(),J=a.models.axis(),i=a.models.axis(),g=a.models.legend(),h=d3.svg.brush();var B={top:30,right:30,bottom:30,left:60},v={top:0,right:30,bottom:20,left:60},E=a.utils.defaultColor(),D=null,C=null,m=100,u,t,F,j,H=true,z=null,e=true,o=function(L,K,O,N,M){return"<h3>"+L+"</h3><p>"+O+" at "+K+"</p>"},l="No Data Available.",I=d3.dispatch("tooltipShow","tooltipHide","brush","stateChange","changeState"),w=250,n=a.utils.state(),p=null;f.clipEdge(true);r.interactive(false);s.orient("bottom").tickPadding(5);c.orient("left");J.orient("bottom").tickPadding(5);i.orient("left");var k=function(P,L){var O=P.pos[0]+(L.offsetLeft||0),N=P.pos[1]+(L.offsetTop||0),K=s.tickFormat()(f.x()(P.point,P.pointIndex)),Q=c.tickFormat()(f.y()(P.point,P.pointIndex)),M=o(P.series.key,K,Q,P,A);a.tooltip.show([O,N],M,null,null,L)};var q=function(x){return function(){return{active:x.map(function(y){return !y.disabled})}}};var G=function(x){return function(y){if(y.active!==undefined){x.forEach(function(L,K){L.disabled=!y.active[K]})}}};function A(x){x.each(function(ab){var S=d3.select(this),O=this;a.utils.initSVG(S);var y=(D||parseInt(S.style("width"))||960)-B.left-B.right,P=(C||parseInt(S.style("height"))||400)-B.top-B.bottom-m,N=m-v.top-v.bottom;A.update=function(){S.transition().duration(w).call(A)};A.container=this;n.setter(G(ab),A.update).getter(q(ab)).update();n.disabled=ab.map(function(ad){return !!ad.disabled});if(!p){var ac;p={};for(ac in n){if(n[ac] instanceof Array){p[ac]=n[ac].slice(0)}else{p[ac]=n[ac]}}}if(!ab||!ab.length||!ab.filter(function(ad){return ad.values.length}).length){var R=S.selectAll(".nv-noData").data([l]);R.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");R.attr("x",B.left+y/2).attr("y",B.top+P/2).text(function(ad){return ad});return A}else{S.selectAll(".nv-noData").remove()}u=f.xScale();t=f.yScale();F=r.xScale();j=r.yScale();var Q=S.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([ab]);var V=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g");var X=Q.select("g");V.append("g").attr("class","nv-legendWrap");var M=V.append("g").attr("class","nv-focus");M.append("g").attr("class","nv-x nv-axis");M.append("g").attr("class","nv-y nv-axis");M.append("g").attr("class","nv-linesWrap");var K=V.append("g").attr("class","nv-context");K.append("g").attr("class","nv-x nv-axis");K.append("g").attr("class","nv-y nv-axis");K.append("g").attr("class","nv-linesWrap");K.append("g").attr("class","nv-brushBackground");K.append("g").attr("class","nv-x nv-brush");if(H){g.width(y);X.select(".nv-legendWrap").datum(ab).call(g);if(B.top!=g.height()){B.top=g.height();P=(C||parseInt(S.style("height"))||400)-B.top-B.bottom-m}X.select(".nv-legendWrap").attr("transform","translate(0,"+(-B.top)+")")}Q.attr("transform","translate("+B.left+","+B.top+")");f.width(y).height(P).color(ab.map(function(ae,ad){return ae.color||E(ae,ad)}).filter(function(ae,ad){return !ab[ad].disabled}));r.defined(f.defined()).width(y).height(N).color(ab.map(function(ae,ad){return ae.color||E(ae,ad)}).filter(function(ae,ad){return !ab[ad].disabled}));X.select(".nv-context").attr("transform","translate(0,"+(P+B.bottom+v.top)+")");var L=X.select(".nv-context .nv-linesWrap").datum(ab.filter(function(ad){return !ad.disabled}));d3.transition(L).call(r);s.scale(u).ticks(a.utils.calcTicksX(y/100,ab)).tickSize(-P,0);c.scale(t).ticks(a.utils.calcTicksY(P/36,ab)).tickSize(-y,0);X.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+P+")");h.x(F).on("brush",function(){var ad=A.duration();A.duration(0);U();A.duration(ad)});if(z){h.extent(z)}var Z=X.select(".nv-brushBackground").selectAll("g").data([z||h.extent()]);var Y=Z.enter().append("g");Y.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",N);Y.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",N);var aa=X.select(".nv-x.nv-brush").call(h);aa.selectAll("rect").attr("height",N);aa.selectAll(".resize").append("path").attr("d",T);U();J.scale(F).ticks(a.utils.calcTicksX(y/100,ab)).tickSize(-N,0);X.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+j.range()[0]+")");d3.transition(X.select(".nv-context .nv-x.nv-axis")).call(J);i.scale(j).ticks(a.utils.calcTicksY(N/36,ab)).tickSize(-y,0);d3.transition(X.select(".nv-context .nv-y.nv-axis")).call(i);X.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+j.range()[0]+")");g.dispatch.on("stateChange",function(ae){for(var ad in ae){n[ad]=ae[ad]}I.stateChange(n);A.update()});I.on("tooltipShow",function(ad){if(e){k(ad,O.parentNode)}});I.on("changeState",function(ad){if(typeof ad.disabled!=="undefined"){ab.forEach(function(af,ae){af.disabled=ad.disabled[ae]})}A.update()});function T(af){var ae=+(af=="e"),ad=ae?1:-1,ag=N/3;return"M"+(0.5*ad)+","+ag+"A6,6 0 0 "+ae+" "+(6.5*ad)+","+(ag+6)+"V"+(2*ag-6)+"A6,6 0 0 "+ae+" "+(0.5*ad)+","+(2*ag)+"ZM"+(2.5*ad)+","+(ag+8)+"V"+(2*ag-8)+"M"+(4.5*ad)+","+(ag+8)+"V"+(2*ag-8)}function W(){if(!h.empty()){h.extent(z)}Z.data([h.empty()?F.domain():z]).each(function(ag,ad){var ae=F(ag[0])-u.range()[0],af=u.range()[1]-F(ag[1]);d3.select(this).select(".left").attr("width",ae<0?0:ae);d3.select(this).select(".right").attr("x",F(ag[1])).attr("width",af<0?0:af)})}function U(){z=h.empty()?null:h.extent();var ae=h.empty()?F.domain():h.extent();if(Math.abs(ae[0]-ae[1])<=1){return}I.brush({extent:ae,brush:h});W();var ad=X.select(".nv-focus .nv-linesWrap").datum(ab.filter(function(af){return !af.disabled}).map(function(ag,af){return{key:ag.key,area:ag.area,values:ag.values.filter(function(ai,ah){return f.x()(ai,ah)>=ae[0]&&f.x()(ai,ah)<=ae[1]})}}));ad.transition().duration(w).call(f);X.select(".nv-focus .nv-x.nv-axis").transition().duration(w).call(s);X.select(".nv-focus .nv-y.nv-axis").transition().duration(w).call(c)}});return A}f.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+B.left,x.pos[1]+B.top];I.tooltipShow(x)});f.dispatch.on("elementMouseout.tooltip",function(x){I.tooltipHide(x)});I.on("tooltipHide",function(){if(e){a.tooltip.cleanup()}});A.dispatch=I;A.legend=g;A.lines=f;A.lines2=r;A.xAxis=s;A.yAxis=c;A.x2Axis=J;A.y2Axis=i;A.options=a.utils.optionsFunc.bind(A);A._options=Object.create({},{width:{get:function(){return D},set:function(x){D=x}},height:{get:function(){return C},set:function(x){C=x}},focusHeight:{get:function(){return m},set:function(x){m=x}},showLegend:{get:function(){return H},set:function(x){H=x}},brushExtent:{get:function(){return z},set:function(x){z=x}},tooltips:{get:function(){return e},set:function(x){e=x}},tooltipContent:{get:function(){return o},set:function(x){o=x}},defaultState:{get:function(){return p},set:function(x){p=x}},noData:{get:function(){return l},set:function(x){l=x}},margin:{get:function(){return B},set:function(x){B.top=x.top!==undefined?x.top:B.top;B.right=x.right!==undefined?x.right:B.right;B.bottom=x.bottom!==undefined?x.bottom:B.bottom;B.left=x.left!==undefined?x.left:B.left}},color:{get:function(){return E},set:function(x){E=a.utils.getColor(x);g.color(E)}},interpolate:{get:function(){return f.interpolate()},set:function(x){f.interpolate(x);r.interpolate(x)}},xTickFormat:{get:function(){return s.xTickFormat()},set:function(x){s.xTickFormat(x);J.xTickFormat(x)}},yTickFormat:{get:function(){return c.yTickFormat()},set:function(x){c.yTickFormat(x);i.yTickFormat(x)}},duration:{get:function(){return w},set:function(x){w=x;c.duration(w);s.duration(w)}},x:{get:function(){return f.x()},set:function(x){f.x(x);r.x(x)}},y:{get:function(){return f.y()},set:function(x){f.y(x);r.y(x)}}});a.utils.inheritOptions(A,f);a.utils.initOptions(A);return A};a.models.multiBar=function(){var o={top:0,right:0,bottom:0,left:0},t=960,p=500,k=d3.scale.ordinal(),j=d3.scale.linear(),q=Math.floor(Math.random()*10000),B=function(x){return x.x},z=function(x){return x.y},f=[0],D=true,C=false,i="zero",w=a.utils.defaultColor(),E=false,r=null,g,c=500,v,s,n,u,G=0.1,F=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd");var A,e,h=a.utils.renderWatch(F,c);var m=0;function l(x){h.reset();x.each(function(S){var V=t-o.left-o.right,O=p-o.top-o.bottom,I=d3.select(this);a.utils.initSVG(I);var L=function(X,W){if(X.series===S.length-1&&W===S[0].values.length-1){return true}return false};if(E&&S.length){E=[{values:S[0].values.map(function(W){return{x:W.x,y:0,series:W.series,size:0.01}})}]}if(C){S=d3.layout.stack().offset(i).values(function(W){return W.values}).y(z)(!S.length&&E?E:S)}S.forEach(function(X,W){X.values.forEach(function(Y){Y.series=W})});if(C){S[0].values.map(function(Y,W){var Z=0,X=0;S.map(function(ab){var aa=ab.values[W];aa.size=Math.abs(aa.y);if(aa.y<0){aa.y1=X;X=X-aa.size}else{aa.y1=aa.size+Z;Z=Z+aa.size}})})}var M=(v&&s)?[]:S.map(function(W){return W.values.map(function(Y,X){return{x:B(Y,X),y:z(Y,X),y0:Y.y0,y1:Y.y1}})});k.domain(v||d3.merge(M).map(function(W){return W.x})).rangeBands(n||[0,V],G);j.domain(s||d3.extent(d3.merge(M).map(function(W){return C?(W.y>0?W.y1:W.y1+W.y):W.y}).concat(f))).range(u||[O,0]);if(k.domain()[0]===k.domain()[1]){k.domain()[0]?k.domain([k.domain()[0]-k.domain()[0]*0.01,k.domain()[1]+k.domain()[1]*0.01]):k.domain([-1,1])}if(j.domain()[0]===j.domain()[1]){j.domain()[0]?j.domain([j.domain()[0]+j.domain()[0]*0.01,j.domain()[1]-j.domain()[1]*0.01]):j.domain([-1,1])}A=A||k;e=e||j;var K=I.selectAll("g.nv-wrap.nv-multibar").data([S]);var Q=K.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar");var N=Q.append("defs");var H=Q.append("g");var T=K.select("g");H.append("g").attr("class","nv-groups");K.attr("transform","translate("+o.left+","+o.top+")");N.append("clipPath").attr("id","nv-edge-clip-"+q).append("rect");K.select("#nv-edge-clip-"+q+" rect").attr("width",V).attr("height",O);T.attr("clip-path",D?"url(#nv-edge-clip-"+q+")":"");var P=K.select(".nv-groups").selectAll(".nv-group").data(function(W){return W},function(X,W){return W});P.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);var y=h.transition(P.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,c)).attr("y",function(W){return(C?e(W.y0):e(0))||0}).attr("height",0).remove();if(y.delay){y.delay(function(Y,X){var W=X*(c/(m+1))-X;return W})}P.attr("class",function(X,W){return"nv-group nv-series-"+W}).classed("hover",function(W){return W.hover}).style("fill",function(X,W){return w(X,W)}).style("stroke",function(X,W){return w(X,W)});P.style("stroke-opacity",1).style("fill-opacity",0.75);var U=P.selectAll("rect.nv-bar").data(function(W){return(E&&!S.length)?E.values:W.values});U.exit().remove();var R=U.enter().append("rect").attr("class",function(X,W){return z(X,W)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(Y,X,W){return C?0:(W*k.rangeBand()/S.length)}).attr("y",function(W){return e(C?W.y0:0)||0}).attr("height",0).attr("width",k.rangeBand()/(C?1:S.length)).attr("transform",function(X,W){return"translate("+k(B(X,W))+",0)"});U.style("fill",function(Y,X,W){return w(Y,W,X)}).style("stroke",function(Y,X,W){return w(Y,W,X)}).on("mouseover",function(X,W){d3.select(this).classed("hover",true);F.elementMouseover({value:z(X,W),point:X,series:S[X.series],pos:[k(B(X,W))+(k.rangeBand()*(C?S.length/2:X.series+0.5)/S.length),j(z(X,W)+(C?X.y0:0))],pointIndex:W,seriesIndex:X.series,e:d3.event})}).on("mouseout",function(X,W){d3.select(this).classed("hover",false);F.elementMouseout({value:z(X,W),point:X,series:S[X.series],pointIndex:W,seriesIndex:X.series,e:d3.event})}).on("click",function(X,W){F.elementClick({value:z(X,W),point:X,series:S[X.series],pos:[k(B(X,W))+(k.rangeBand()*(C?S.length/2:X.series+0.5)/S.length),j(z(X,W)+(C?X.y0:0))],pointIndex:W,seriesIndex:X.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",function(X,W){F.elementDblClick({value:z(X,W),point:X,series:S[X.series],pos:[k(B(X,W))+(k.rangeBand()*(C?S.length/2:X.series+0.5)/S.length),j(z(X,W)+(C?X.y0:0))],pointIndex:W,seriesIndex:X.series,e:d3.event});d3.event.stopPropagation()});U.attr("class",function(X,W){return z(X,W)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(X,W){return"translate("+k(B(X,W))+",0)"});if(r){if(!g){g=S.map(function(){return true})}U.style("fill",function(Y,X,W){return d3.rgb(r(Y,X)).darker(g.map(function(aa,Z){return Z}).filter(function(aa,Z){return !g[Z]})[W]).toString()}).style("stroke",function(Y,X,W){return d3.rgb(r(Y,X)).darker(g.map(function(aa,Z){return Z}).filter(function(aa,Z){return !g[Z]})[W]).toString()})}var J=U.watchTransition(h,"multibar",Math.min(250,c)).delay(function(X,W){return W*c/S[0].values.length});if(C){J.attr("y",function(X,W){return j((C?X.y1:0))}).attr("height",function(X,W){return Math.max(Math.abs(j(X.y+(C?X.y0:0))-j((C?X.y0:0))),1)}).attr("x",function(X,W){return C?0:(X.series*k.rangeBand()/S.length)}).attr("width",k.rangeBand()/(C?1:S.length))}else{J.attr("x",function(X,W){return X.series*k.rangeBand()/S.length}).attr("width",k.rangeBand()/S.length).attr("y",function(X,W){return z(X,W)<0?j(0):j(0)-j(z(X,W))<1?j(0)-1:j(z(X,W))||0}).attr("height",function(X,W){return Math.max(Math.abs(j(z(X,W))-j(0)),1)||0})}A=k.copy();e=j.copy();if(S[0]&&S[0].values){m=S[0].values.length}});h.renderEnd("multibar immediate");return l}l.dispatch=F;l.options=a.utils.optionsFunc.bind(l);l._options=Object.create({},{width:{get:function(){return t},set:function(x){t=x}},height:{get:function(){return p},set:function(x){p=x}},x:{get:function(){return B},set:function(x){B=x}},y:{get:function(){return z},set:function(x){z=x}},xScale:{get:function(){return k},set:function(x){k=x}},yScale:{get:function(){return j},set:function(x){j=x}},xDomain:{get:function(){return v},set:function(x){v=x}},yDomain:{get:function(){return s},set:function(x){s=x}},xRange:{get:function(){return n},set:function(x){n=x}},yRange:{get:function(){return u},set:function(x){u=x}},forceY:{get:function(){return f},set:function(x){f=x}},stacked:{get:function(){return C},set:function(x){C=x}},stackOffset:{get:function(){return i},set:function(x){i=x}},clipEdge:{get:function(){return D},set:function(x){D=x}},disabled:{get:function(){return g},set:function(x){g=x}},id:{get:function(){return q},set:function(x){q=x}},hideable:{get:function(){return E},set:function(x){E=x}},groupSpacing:{get:function(){return G},set:function(x){G=x}},margin:{get:function(){return o},set:function(x){o.top=x.top!==undefined?x.top:o.top;o.right=x.right!==undefined?x.right:o.right;o.bottom=x.bottom!==undefined?x.bottom:o.bottom;o.left=x.left!==undefined?x.left:o.left}},duration:{get:function(){return c},set:function(x){c=x;h.reset(c)}},color:{get:function(){return w},set:function(x){w=a.utils.getColor(x)}},barColor:{get:function(){return r},set:function(x){r=a.utils.getColor(x)}}});a.utils.initOptions(l);return l};a.models.multiBarChart=function(){var j=a.models.multiBar(),t=a.models.axis(),f=a.models.axis(),i=a.models.legend(),A=a.models.legend();var C={top:30,right:20,bottom:50,left:60},E=null,D=null,F=a.utils.defaultColor(),L=true,G={},I=true,K=true,w=true,s=false,z=true,h=false,k=0,g=true,o=function(O,N,R,Q,P){return"<h3>"+O+"</h3><p>"+R+" on "+N+"</p>"},v,u,n=a.utils.state(),q=null,m="No Data Available.",M=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),e=function(){return L?180:0},c=250;n.stacked=false;j.stacked(false);t.orient("bottom").tickPadding(7).highlightZero(true).showMaxMin(false).tickFormat(function(x){return x});f.orient((s)?"right":"left").tickFormat(d3.format(",.1f"));A.updateState(false);var p=a.utils.renderWatch(M);var J=false;var l=function(S,O){var R=S.pos[0]+(O.offsetLeft||0),Q=S.pos[1]+(O.offsetTop||0),N=t.tickFormat()(j.x()(S.point,S.pointIndex)),T=f.tickFormat()(j.y()(S.point,S.pointIndex)),P=o(S.series.key,N,T,S,B);a.tooltip.show([R,Q],P,S.value<0?"n":"s",null,O)};var r=function(x){return function(){return{active:x.map(function(y){return !y.disabled}),stacked:J}}};var H=function(x){return function(y){if(y.stacked!==undefined){J=y.stacked}if(y.active!==undefined){x.forEach(function(O,N){O.disabled=!y.active[N]})}}};function B(x){p.reset();p.models(j);if(K){p.models(t)}if(w){p.models(f)}x.each(function(V){var O=d3.select(this),Y=this;a.utils.initSVG(O);var ac=(E||parseInt(O.style("width"))||960)-C.left-C.right,R=(D||parseInt(O.style("height"))||400)-C.top-C.bottom;B.update=function(){if(c===0){O.call(B)}else{O.transition().duration(c).call(B)}};B.container=this;n.setter(H(V),B.update).getter(r(V)).update();n.disabled=V.map(function(ad){return !!ad.disabled});if(!q){var ab;q={};for(ab in n){if(n[ab] instanceof Array){q[ab]=n[ab].slice(0)}else{q[ab]=n[ab]}}}if(!V||!V.length||!V.filter(function(ad){return ad.values.length}).length){var P=O.selectAll(".nv-noData").data([m]);P.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");P.attr("x",C.left+ac/2).attr("y",C.top+R/2).text(function(ad){return ad});return B}else{O.selectAll(".nv-noData").remove()}v=j.xScale();u=j.yScale();var Q=O.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([V]);var y=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g");var W=Q.select("g");y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis");y.append("g").attr("class","nv-barsWrap");y.append("g").attr("class","nv-legendWrap");y.append("g").attr("class","nv-controlsWrap");if(I){i.width(ac-e());if(j.barColor()){V.forEach(function(ae,ad){ae.color=d3.rgb("#ccc").darker(ad*1.5).toString()})}W.select(".nv-legendWrap").datum(V).call(i);if(C.top!=i.height()){C.top=i.height();R=(D||parseInt(O.style("height"))||400)-C.top-C.bottom}W.select(".nv-legendWrap").attr("transform","translate("+e()+","+(-C.top)+")")}if(L){var Z=[{key:G.grouped||"Grouped",disabled:j.stacked()},{key:G.stacked||"Stacked",disabled:!j.stacked()}];A.width(e()).color(["#444","#444","#444"]);W.select(".nv-controlsWrap").datum(Z).attr("transform","translate(0,"+(-C.top)+")").call(A)}Q.attr("transform","translate("+C.left+","+C.top+")");if(s){W.select(".nv-y.nv-axis").attr("transform","translate("+ac+",0)")}j.disabled(V.map(function(ad){return ad.disabled})).width(ac).height(R).color(V.map(function(ae,ad){return ae.color||F(ae,ad)}).filter(function(ae,ad){return !V[ad].disabled}));var X=W.select(".nv-barsWrap").datum(V.filter(function(ad){return !ad.disabled}));X.call(j);if(K){t.scale(v).ticks(a.utils.calcTicksX(ac/100,V)).tickSize(-R,0);W.select(".nv-x.nv-axis").attr("transform","translate(0,"+u.range()[0]+")");W.select(".nv-x.nv-axis").call(t);var U=W.select(".nv-x.nv-axis > g").selectAll("g");U.selectAll("line, text").style("opacity",1);if(h){var aa=function(ad,ae){return"translate("+ad+","+ae+")"};var N=5,T=17;U.selectAll("text").attr("transform",function(af,ae,ad){return aa(0,(ad%2==0?N:T))});var S=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;W.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(ae,ad){return aa(0,(ad===0||S%2!==0)?T:N)})}if(z){U.filter(function(ae,ad){return ad%Math.ceil(V[0].values.length/(ac/100))!==0}).selectAll("text, line").style("opacity",0)}if(k){U.selectAll(".tick text").attr("transform","rotate("+k+" 0,0)").style("text-anchor",k>0?"start":"end")}W.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}if(w){f.scale(u).ticks(a.utils.calcTicksY(R/36,V)).tickSize(-ac,0);W.select(".nv-y.nv-axis").call(f)}i.dispatch.on("stateChange",function(ae){for(var ad in ae){n[ad]=ae[ad]}M.stateChange(n);B.update()});A.dispatch.on("legendClick",function(ae,ad){if(!ae.disabled){return}Z=Z.map(function(af){af.disabled=true;return af});ae.disabled=false;switch(ae.key){case"Grouped":j.stacked(false);break;case"Stacked":j.stacked(true);break}n.stacked=j.stacked();M.stateChange(n);B.update()});M.on("tooltipShow",function(ad){if(g){l(ad,Y.parentNode)}});M.on("changeState",function(ad){if(typeof ad.disabled!=="undefined"){V.forEach(function(af,ae){af.disabled=ad.disabled[ae]});n.disabled=ad.disabled}if(typeof ad.stacked!=="undefined"){j.stacked(ad.stacked);n.stacked=ad.stacked;J=ad.stacked}B.update()})});p.renderEnd("multibarchart immediate");return B}j.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+C.left,x.pos[1]+C.top];M.tooltipShow(x)});j.dispatch.on("elementMouseout.tooltip",function(x){M.tooltipHide(x)});M.on("tooltipHide",function(){if(g){a.tooltip.cleanup()}});B.dispatch=M;B.multibar=j;B.legend=i;B.xAxis=t;B.yAxis=f;B.state=n;B.options=a.utils.optionsFunc.bind(B);B._options=Object.create({},{width:{get:function(){return E},set:function(x){E=x}},height:{get:function(){return D},set:function(x){D=x}},showLegend:{get:function(){return I},set:function(x){I=x}},showControls:{get:function(){return L},set:function(x){L=x}},controlLabels:{get:function(){return G},set:function(x){G=x}},showXAxis:{get:function(){return K},set:function(x){K=x}},showYAxis:{get:function(){return w},set:function(x){w=x}},tooltips:{get:function(){return g},set:function(x){g=x}},tooltipContent:{get:function(){return o},set:function(x){o=x}},defaultState:{get:function(){return q},set:function(x){q=x}},noData:{get:function(){return m},set:function(x){m=x}},reduceXTicks:{get:function(){return z},set:function(x){z=x}},rotateLabels:{get:function(){return k},set:function(x){k=x}},staggerLabels:{get:function(){return h},set:function(x){h=x}},margin:{get:function(){return C},set:function(x){C.top=x.top!==undefined?x.top:C.top;C.right=x.right!==undefined?x.right:C.right;C.bottom=x.bottom!==undefined?x.bottom:C.bottom;C.left=x.left!==undefined?x.left:C.left}},duration:{get:function(){return c},set:function(x){c=x;j.duration(c);t.duration(c);f.duration(c);p.reset(c)}},color:{get:function(){return F},set:function(x){F=a.utils.getColor(x);i.color(F)}},rightAlignYAxis:{get:function(){return s},set:function(x){s=x;f.orient(s?"right":"left")}}});a.utils.inheritOptions(B,j);a.utils.initOptions(B);return B};a.models.multiBarHorizontal=function(){var o={top:0,right:0,bottom:0,left:0},t=960,p=500,q=Math.floor(Math.random()*10000),k=d3.scale.ordinal(),j=d3.scale.linear(),C=function(x){return x.x},z=function(x){return x.y},A=function(x){return x.yErr},f=[0],w=a.utils.defaultColor(),r=null,g,E=false,D=false,F=false,l=60,i=d3.format(",.2f"),G=1200,v,s,n,u,c=250,H=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd");var B,e;var h=a.utils.renderWatch(H,c);function m(x){h.reset();x.each(function(Q){var T=t-o.left-o.right,L=p-o.top-o.bottom,I=d3.select(this);a.utils.initSVG(I);if(E){Q=d3.layout.stack().offset("zero").values(function(U){return U.values}).y(z)(Q)}Q.forEach(function(V,U){V.values.forEach(function(W){W.series=U})});if(E){Q[0].values.map(function(W,U){var X=0,V=0;Q.map(function(Z){var Y=Z.values[U];Y.size=Math.abs(Y.y);if(Y.y<0){Y.y1=V-Y.size;V=V-Y.size}else{Y.y1=X;X=X+Y.size}})})}var K=(v&&s)?[]:Q.map(function(U){return U.values.map(function(W,V){return{x:C(W,V),y:z(W,V),y0:W.y0,y1:W.y1}})});k.domain(v||d3.merge(K).map(function(U){return U.x})).rangeBands(n||[0,L],0.1);j.domain(s||d3.extent(d3.merge(K).map(function(U){return E?(U.y>0?U.y1+U.y:U.y1):U.y}).concat(f)));if(D&&!E){j.range(u||[(j.domain()[0]<0?l:0),T-(j.domain()[1]>0?l:0)])}else{j.range(u||[0,T])}B=B||k;e=e||d3.scale.linear().domain(j.domain()).range([j(0),j(0)]);var J=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([Q]);var O=J.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal");var M=O.append("defs");var y=O.append("g");var R=J.select("g");y.append("g").attr("class","nv-groups");J.attr("transform","translate("+o.left+","+o.top+")");var N=J.select(".nv-groups").selectAll(".nv-group").data(function(U){return U},function(V,U){return U});N.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);N.exit().watchTransition(h,"multibarhorizontal: exit groups").style("stroke-opacity",0.000001).style("fill-opacity",0.000001).remove();N.attr("class",function(V,U){return"nv-group nv-series-"+U}).classed("hover",function(U){return U.hover}).style("fill",function(V,U){return w(V,U)}).style("stroke",function(V,U){return w(V,U)});N.watchTransition(h,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",0.75);var S=N.selectAll("g.nv-bar").data(function(U){return U.values});S.exit().remove();var P=S.enter().append("g").attr("transform",function(W,V,U){return"translate("+e(E?W.y0:0)+","+(E?0:(U*k.rangeBand()/Q.length)+k(C(W,V)))+")"});P.append("rect").attr("width",0).attr("height",k.rangeBand()/(E?1:Q.length));S.on("mouseover",function(V,U){d3.select(this).classed("hover",true);H.elementMouseover({value:z(V,U),point:V,series:Q[V.series],pos:[j(z(V,U)+(E?V.y0:0)),k(C(V,U))+(k.rangeBand()*(E?Q.length/2:V.series+0.5)/Q.length)],pointIndex:U,seriesIndex:V.series,e:d3.event})}).on("mouseout",function(V,U){d3.select(this).classed("hover",false);H.elementMouseout({value:z(V,U),point:V,series:Q[V.series],pointIndex:U,seriesIndex:V.series,e:d3.event})}).on("click",function(V,U){H.elementClick({value:z(V,U),point:V,series:Q[V.series],pos:[k(C(V,U))+(k.rangeBand()*(E?Q.length/2:V.series+0.5)/Q.length),j(z(V,U)+(E?V.y0:0))],pointIndex:U,seriesIndex:V.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",function(V,U){H.elementDblClick({value:z(V,U),point:V,series:Q[V.series],pos:[k(C(V,U))+(k.rangeBand()*(E?Q.length/2:V.series+0.5)/Q.length),j(z(V,U)+(E?V.y0:0))],pointIndex:U,seriesIndex:V.series,e:d3.event});d3.event.stopPropagation()});if(A(Q[0],0)){P.append("polyline");S.select("polyline").attr("fill","none").attr("points",function(Y,W){var X=A(Y,W),V=0.8*k.rangeBand()/((E?1:Q.length)*2);X=X.length?X:[-Math.abs(X),Math.abs(X)];X=X.map(function(Z){return j(Z)-j(0)});var U=[[X[0],-V],[X[0],V],[X[0],0],[X[1],0],[X[1],-V],[X[1],V]];return U.map(function(Z){return Z.join(",")}).join(" ")}).attr("transform",function(W,V){var U=k.rangeBand()/((E?1:Q.length)*2);return"translate("+(z(W,V)<0?0:j(z(W,V))-j(0))+", "+U+")"})}P.append("text");if(D&&!E){S.select("text").attr("text-anchor",function(V,U){return z(V,U)<0?"end":"start"}).attr("y",k.rangeBand()/(Q.length*2)).attr("dy",".32em").html(function(X,V){var U=i(z(X,V)),W=A(X,V);if(W===undefined){return U}if(!W.length){return U+"&plusmn;"+i(Math.abs(W))}return U+"+"+i(Math.abs(W[1]))+"-"+i(Math.abs(W[0]))});S.watchTransition(h,"multibarhorizontal: bars").select("text").attr("x",function(V,U){return z(V,U)<0?-4:j(z(V,U))-j(0)+4})}else{S.selectAll("text").text("")}if(F&&!E){P.append("text").classed("nv-bar-label",true);S.select("text.nv-bar-label").attr("text-anchor",function(V,U){return z(V,U)<0?"start":"end"}).attr("y",k.rangeBand()/(Q.length*2)).attr("dy",".32em").text(function(V,U){return C(V,U)});S.watchTransition(h,"multibarhorizontal: bars").select("text.nv-bar-label").attr("x",function(V,U){return z(V,U)<0?j(0)-j(z(V,U))+4:-4})}else{S.selectAll("text.nv-bar-label").text("")}S.attr("class",function(V,U){return z(V,U)<0?"nv-bar negative":"nv-bar positive"});if(r){if(!g){g=Q.map(function(){return true})}S.style("fill",function(W,V,U){return d3.rgb(r(W,V)).darker(g.map(function(Y,X){return X}).filter(function(Y,X){return !g[X]})[U]).toString()}).style("stroke",function(W,V,U){return d3.rgb(r(W,V)).darker(g.map(function(Y,X){return X}).filter(function(Y,X){return !g[X]})[U]).toString()})}if(E){S.watchTransition(h,"multibarhorizontal: bars").attr("transform",function(V,U){return"translate("+j(V.y1)+","+k(C(V,U))+")"}).select("rect").attr("width",function(V,U){return Math.abs(j(z(V,U)+V.y0)-j(V.y0))}).attr("height",k.rangeBand())}else{S.watchTransition(h,"multibarhorizontal: bars").attr("transform",function(V,U){return"translate("+(z(V,U)<0?j(z(V,U)):j(0))+","+(V.series*k.rangeBand()/Q.length+k(C(V,U)))+")"}).select("rect").attr("height",k.rangeBand()/Q.length).attr("width",function(V,U){return Math.max(Math.abs(j(z(V,U))-j(0)),1)})}B=k.copy();e=j.copy()});h.renderEnd("multibarHorizontal immediate");return m}m.dispatch=H;m.options=a.utils.optionsFunc.bind(m);m._options=Object.create({},{width:{get:function(){return t},set:function(x){t=x}},height:{get:function(){return p},set:function(x){p=x}},x:{get:function(){return C},set:function(x){C=x}},y:{get:function(){return z},set:function(x){z=x}},yErr:{get:function(){return A},set:function(x){A=x}},xScale:{get:function(){return k},set:function(x){k=x}},yScale:{get:function(){return j},set:function(x){j=x}},xDomain:{get:function(){return v},set:function(x){v=x}},yDomain:{get:function(){return s},set:function(x){s=x}},xRange:{get:function(){return n},set:function(x){n=x}},yRange:{get:function(){return u},set:function(x){u=x}},forceY:{get:function(){return f},set:function(x){f=x}},stacked:{get:function(){return E},set:function(x){E=x}},showValues:{get:function(){return D},set:function(x){D=x}},disabled:{get:function(){return g},set:function(x){g=x}},id:{get:function(){return q},set:function(x){q=x}},valueFormat:{get:function(){return i},set:function(x){i=x}},valuePadding:{get:function(){return l},set:function(x){l=x}},margin:{get:function(){return o},set:function(x){o.top=x.top!==undefined?x.top:o.top;o.right=x.right!==undefined?x.right:o.right;o.bottom=x.bottom!==undefined?x.bottom:o.bottom;o.left=x.left!==undefined?x.left:o.left}},duration:{get:function(){return c},set:function(x){c=x;h.reset(c)}},color:{get:function(){return w},set:function(x){w=a.utils.getColor(x)}},barColor:{get:function(){return w},set:function(x){r=a.utils.getColor(x)}}});a.utils.initOptions(m);return m};a.models.multiBarHorizontalChart=function(){var i=a.models.multiBarHorizontal(),q=a.models.axis(),f=a.models.axis(),h=a.models.legend().height(30),u=a.models.legend().height(30);var w={top:30,right:20,bottom:50,left:60},A=null,z=null,B=a.utils.defaultColor(),H=true,C={},E=true,F=true,t=true,G=false,g=true,m=function(K,J,N,M,L){return"<h3>"+K+" - "+J+"</h3><p>"+N+"</p>"},s,r,l=a.utils.state(),o=null,k="No Data Available.",I=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),e=function(){return H?180:0},c=250;l.stacked=false;i.stacked(G);q.orient("left").tickPadding(5).highlightZero(false).showMaxMin(false).tickFormat(function(x){return x});f.orient("bottom").tickFormat(d3.format(",.1f"));u.updateState(false);var j=function(O,K){var N=O.pos[0]+(K.offsetLeft||0),M=O.pos[1]+(K.offsetTop||0),J=q.tickFormat()(i.x()(O.point,O.pointIndex)),P=f.tickFormat()(i.y()(O.point,O.pointIndex)),L=m(O.series.key,J,P,O,v);a.tooltip.show([N,M],L,O.value<0?"e":"w",null,K)};var p=function(x){return function(){return{active:x.map(function(y){return !y.disabled}),stacked:G}}};var D=function(x){return function(y){if(y.stacked!==undefined){G=y.stacked}if(y.active!==undefined){x.forEach(function(K,J){K.disabled=!y.active[J]})}}};var n=a.utils.renderWatch(I,c);function v(x){n.reset();n.models(i);if(F){n.models(q)}if(t){n.models(f)}x.each(function(O){var J=d3.select(this),R=this;a.utils.initSVG(J);var U=(A||parseInt(J.style("width"))||960)-w.left-w.right,M=(z||parseInt(J.style("height"))||400)-w.top-w.bottom;v.update=function(){J.transition().duration(c).call(v)};v.container=this;G=i.stacked();l.setter(D(O),v.update).getter(p(O)).update();l.disabled=O.map(function(V){return !!V.disabled});if(!o){var T;o={};for(T in l){if(l[T] instanceof Array){o[T]=l[T].slice(0)}else{o[T]=l[T]}}}if(!O||!O.length||!O.filter(function(V){return V.values.length}).length){var K=J.selectAll(".nv-noData").data([k]);K.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");K.attr("x",w.left+U/2).attr("y",w.top+M/2).text(function(V){return V});return v}else{J.selectAll(".nv-noData").remove()}s=i.xScale();r=i.yScale();var L=J.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([O]);var y=L.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g");var P=L.select("g");y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");y.append("g").attr("class","nv-barsWrap");y.append("g").attr("class","nv-legendWrap");y.append("g").attr("class","nv-controlsWrap");if(E){h.width(U-e());if(i.barColor()){O.forEach(function(W,V){W.color=d3.rgb("#ccc").darker(V*1.5).toString()})}P.select(".nv-legendWrap").datum(O).call(h);if(w.top!=h.height()){w.top=h.height();M=(z||parseInt(J.style("height"))||400)-w.top-w.bottom}P.select(".nv-legendWrap").attr("transform","translate("+e()+","+(-w.top)+")")}if(H){var S=[{key:C.grouped||"Grouped",disabled:i.stacked()},{key:C.stacked||"Stacked",disabled:!i.stacked()}];u.width(e()).color(["#444","#444","#444"]);P.select(".nv-controlsWrap").datum(S).attr("transform","translate(0,"+(-w.top)+")").call(u)}L.attr("transform","translate("+w.left+","+w.top+")");i.disabled(O.map(function(V){return V.disabled})).width(U).height(M).color(O.map(function(W,V){return W.color||B(W,V)}).filter(function(W,V){return !O[V].disabled}));var Q=P.select(".nv-barsWrap").datum(O.filter(function(V){return !V.disabled}));Q.transition().call(i);if(F){q.scale(s).ticks(a.utils.calcTicksY(M/24,O)).tickSize(-U,0);P.select(".nv-x.nv-axis").call(q);var N=P.select(".nv-x.nv-axis").selectAll("g");N.selectAll("line, text")}if(t){f.scale(r).ticks(a.utils.calcTicksX(U/100,O)).tickSize(-M,0);P.select(".nv-y.nv-axis").attr("transform","translate(0,"+M+")");P.select(".nv-y.nv-axis").call(f)}P.select(".nv-zeroLine line").attr("x1",r(0)).attr("x2",r(0)).attr("y1",0).attr("y2",-M);h.dispatch.on("stateChange",function(W){for(var V in W){l[V]=W[V]}I.stateChange(l);v.update()});u.dispatch.on("legendClick",function(W,V){if(!W.disabled){return}S=S.map(function(X){X.disabled=true;return X});W.disabled=false;switch(W.key){case"Grouped":i.stacked(false);break;case"Stacked":i.stacked(true);break}l.stacked=i.stacked();I.stateChange(l);G=i.stacked();v.update()});I.on("tooltipShow",function(V){if(g){j(V,R.parentNode)}});I.on("changeState",function(V){if(typeof V.disabled!=="undefined"){O.forEach(function(X,W){X.disabled=V.disabled[W]});l.disabled=V.disabled}if(typeof V.stacked!=="undefined"){i.stacked(V.stacked);l.stacked=V.stacked;G=V.stacked}v.update()})});n.renderEnd("multibar horizontal chart immediate");return v}i.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+w.left,x.pos[1]+w.top];I.tooltipShow(x)});i.dispatch.on("elementMouseout.tooltip",function(x){I.tooltipHide(x)});I.on("tooltipHide",function(){if(g){a.tooltip.cleanup()}});v.dispatch=I;v.multibar=i;v.legend=h;v.xAxis=q;v.yAxis=f;v.state=l;v.options=a.utils.optionsFunc.bind(v);v._options=Object.create({},{width:{get:function(){return A},set:function(x){A=x}},height:{get:function(){return z},set:function(x){z=x}},showLegend:{get:function(){return E},set:function(x){E=x}},showControls:{get:function(){return H},set:function(x){H=x}},controlLabels:{get:function(){return C},set:function(x){C=x}},showXAxis:{get:function(){return F},set:function(x){F=x}},showYAxis:{get:function(){return t},set:function(x){t=x}},tooltips:{get:function(){return g},set:function(x){g=x}},tooltipContent:{get:function(){return m},set:function(x){m=x}},defaultState:{get:function(){return o},set:function(x){o=x}},noData:{get:function(){return k},set:function(x){k=x}},margin:{get:function(){return w},set:function(x){w.top=x.top!==undefined?x.top:w.top;w.right=x.right!==undefined?x.right:w.right;w.bottom=x.bottom!==undefined?x.bottom:w.bottom;w.left=x.left!==undefined?x.left:w.left}},duration:{get:function(){return c},set:function(x){c=x;n.reset(c);i.duration(c);q.duration(c);f.duration(c)}},color:{get:function(){return B},set:function(x){B=a.utils.getColor(x);h.color(B)}}});a.utils.inheritOptions(v,i);a.utils.initOptions(v);return v};a.models.multiChart=function(){var z={top:30,right:20,bottom:50,left:60},C=a.utils.defaultColor(),B=null,A=null,E=true,g=true,l=function(K,J,N,M,L){return"<h3>"+K+"</h3><p>"+N+" at "+J+"</p>"},v,u,k="No Data Available.",q,o,F=function(x){return x.x},D=function(x){return x.y},r="monotone";var v=d3.scale.linear(),H=d3.scale.linear(),G=d3.scale.linear(),s=a.models.line().yScale(H),p=a.models.line().yScale(G),i=a.models.multiBar().stacked(false).yScale(H),f=a.models.multiBar().stacked(false).yScale(G),n=a.models.stackedArea().yScale(H),m=a.models.stackedArea().yScale(G),t=a.models.axis().scale(v).orient("bottom").tickPadding(5),e=a.models.axis().scale(H).orient("left"),c=a.models.axis().scale(G).orient("right"),h=a.models.legend().height(30),I=d3.dispatch("tooltipShow","tooltipHide");var j=function(O,K){var N=O.pos[0]+(K.offsetLeft||0),M=O.pos[1]+(K.offsetTop||0),J=t.tickFormat()(s.x()(O.point,O.pointIndex)),P=((O.series.yAxis==2)?c:e).tickFormat()(s.y()(O.point,O.pointIndex)),L=l(O.series.key,J,P,O,w);a.tooltip.show([N,M],L,undefined,undefined,K.offsetParent)};function w(x){x.each(function(ah){var V=d3.select(this),M=this;a.utils.initSVG(V);w.update=function(){V.transition().call(w)};w.container=this;var y=(B||parseInt(V.style("width"))||960)-z.left-z.right,K=(A||parseInt(V.style("height"))||400)-z.top-z.bottom;var Y=ah.filter(function(ai){return ai.type=="line"&&ai.yAxis==1});var X=ah.filter(function(ai){return ai.type=="line"&&ai.yAxis==2});var ac=ah.filter(function(ai){return ai.type=="bar"&&ai.yAxis==1});var ab=ah.filter(function(ai){return ai.type=="bar"&&ai.yAxis==2});var U=ah.filter(function(ai){return ai.type=="area"&&ai.yAxis==1});var R=ah.filter(function(ai){return ai.type=="area"&&ai.yAxis==2});if(!ah||!ah.length||!ah.filter(function(ai){return ai.values.length}).length){var S=V.selectAll(".nv-noData").data([k]);S.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");S.attr("x",z.left+y/2).attr("y",z.top+K/2).text(function(ai){return ai});return w}else{V.selectAll(".nv-noData").remove()}var O=ah.filter(function(ai){return !ai.disabled&&ai.yAxis==1}).map(function(ai){return ai.values.map(function(ak,aj){return{x:ak.x,y:ak.y}})});var N=ah.filter(function(ai){return !ai.disabled&&ai.yAxis==2}).map(function(ai){return ai.values.map(function(ak,aj){return{x:ak.x,y:ak.y}})});v.domain(d3.extent(d3.merge(O.concat(N)),function(ai){return ai.x})).range([0,y]);var P=V.selectAll("g.wrap.multiChart").data([ah]);var Z=P.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");Z.append("g").attr("class","x axis");Z.append("g").attr("class","y1 axis");Z.append("g").attr("class","y2 axis");Z.append("g").attr("class","lines1Wrap");Z.append("g").attr("class","lines2Wrap");Z.append("g").attr("class","bars1Wrap");Z.append("g").attr("class","bars2Wrap");Z.append("g").attr("class","stack1Wrap");Z.append("g").attr("class","stack2Wrap");Z.append("g").attr("class","legendWrap");var ad=P.select("g");var ag=ah.map(function(aj,ai){return ah[ai].color||C(aj,ai)});if(E){h.color(ag);h.width(y/2);ad.select(".legendWrap").datum(ah.map(function(ai){ai.originalKey=ai.originalKey===undefined?ai.key:ai.originalKey;ai.key=ai.originalKey+(ai.yAxis==1?"":" (right axis)");return ai})).call(h);if(z.top!=h.height()){z.top=h.height();K=(A||parseInt(V.style("height"))||400)-z.top-z.bottom}ad.select(".legendWrap").attr("transform","translate("+(y/2)+","+(-z.top)+")")}s.width(y).height(K).interpolate(r).color(ag.filter(function(aj,ai){return !ah[ai].disabled&&ah[ai].yAxis==1&&ah[ai].type=="line"}));p.width(y).height(K).interpolate(r).color(ag.filter(function(aj,ai){return !ah[ai].disabled&&ah[ai].yAxis==2&&ah[ai].type=="line"}));i.width(y).height(K).color(ag.filter(function(aj,ai){return !ah[ai].disabled&&ah[ai].yAxis==1&&ah[ai].type=="bar"}));f.width(y).height(K).color(ag.filter(function(aj,ai){return !ah[ai].disabled&&ah[ai].yAxis==2&&ah[ai].type=="bar"}));n.width(y).height(K).color(ag.filter(function(aj,ai){return !ah[ai].disabled&&ah[ai].yAxis==1&&ah[ai].type=="area"}));m.width(y).height(K).color(ag.filter(function(aj,ai){return !ah[ai].disabled&&ah[ai].yAxis==2&&ah[ai].type=="area"}));ad.attr("transform","translate("+z.left+","+z.top+")");var J=ad.select(".lines1Wrap").datum(Y.filter(function(ai){return !ai.disabled}));var L=ad.select(".bars1Wrap").datum(ac.filter(function(ai){return !ai.disabled}));var af=ad.select(".stack1Wrap").datum(U.filter(function(ai){return !ai.disabled}));var aa=ad.select(".lines2Wrap").datum(X.filter(function(ai){return !ai.disabled}));var ae=ad.select(".bars2Wrap").datum(ab.filter(function(ai){return !ai.disabled}));var W=ad.select(".stack2Wrap").datum(R.filter(function(ai){return !ai.disabled}));var T=U.length?U.map(function(ai){return ai.values}).reduce(function(aj,ai){return aj.map(function(ak,al){return{x:ak.x,y:ak.y+ai[al].y}})}).concat([{x:0,y:0}]):[];var Q=R.length?R.map(function(ai){return ai.values}).reduce(function(aj,ai){return aj.map(function(ak,al){return{x:ak.x,y:ak.y+ai[al].y}})}).concat([{x:0,y:0}]):[];H.domain(q||d3.extent(d3.merge(O).concat(T),function(ai){return ai.y})).range([0,K]);G.domain(o||d3.extent(d3.merge(N).concat(Q),function(ai){return ai.y})).range([0,K]);s.yDomain(H.domain());i.yDomain(H.domain());n.yDomain(H.domain());p.yDomain(G.domain());f.yDomain(G.domain());m.yDomain(G.domain());if(U.length){d3.transition(af).call(n)}if(R.length){d3.transition(W).call(m)}if(ac.length){d3.transition(L).call(i)}if(ab.length){d3.transition(ae).call(f)}if(Y.length){d3.transition(J).call(s)}if(X.length){d3.transition(aa).call(p)}t.ticks(a.utils.calcTicksX(y/100,ah)).tickSize(-K,0);ad.select(".x.axis").attr("transform","translate(0,"+K+")");d3.transition(ad.select(".x.axis")).call(t);e.ticks(a.utils.calcTicksY(K/36,ah)).tickSize(-y,0);d3.transition(ad.select(".y1.axis")).call(e);c.ticks(a.utils.calcTicksY(K/36,ah)).tickSize(-y,0);d3.transition(ad.select(".y2.axis")).call(c);ad.select(".y1.axis").classed("nv-disabled",O.length?false:true).attr("transform","translate("+v.range()[0]+",0)");ad.select(".y2.axis").classed("nv-disabled",N.length?false:true).attr("transform","translate("+v.range()[1]+",0)");h.dispatch.on("stateChange",function(ai){w.update()});I.on("tooltipShow",function(ai){if(g){j(ai,M.parentNode)}})});return w}s.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+z.left,x.pos[1]+z.top];I.tooltipShow(x)});s.dispatch.on("elementMouseout.tooltip",function(x){I.tooltipHide(x)});p.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+z.left,x.pos[1]+z.top];I.tooltipShow(x)});p.dispatch.on("elementMouseout.tooltip",function(x){I.tooltipHide(x)});i.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+z.left,x.pos[1]+z.top];I.tooltipShow(x)});i.dispatch.on("elementMouseout.tooltip",function(x){I.tooltipHide(x)});f.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+z.left,x.pos[1]+z.top];I.tooltipShow(x)});f.dispatch.on("elementMouseout.tooltip",function(x){I.tooltipHide(x)});n.dispatch.on("tooltipShow",function(x){if(!Math.round(n.y()(x.point)*100)){setTimeout(function(){d3.selectAll(".point.hover").classed("hover",false)},0);return false}x.pos=[x.pos[0]+z.left,x.pos[1]+z.top],I.tooltipShow(x)});n.dispatch.on("tooltipHide",function(x){I.tooltipHide(x)});m.dispatch.on("tooltipShow",function(x){if(!Math.round(m.y()(x.point)*100)){setTimeout(function(){d3.selectAll(".point.hover").classed("hover",false)},0);return false}x.pos=[x.pos[0]+z.left,x.pos[1]+z.top],I.tooltipShow(x)});m.dispatch.on("tooltipHide",function(x){I.tooltipHide(x)});s.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+z.left,x.pos[1]+z.top];I.tooltipShow(x)});s.dispatch.on("elementMouseout.tooltip",function(x){I.tooltipHide(x)});p.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+z.left,x.pos[1]+z.top];I.tooltipShow(x)});p.dispatch.on("elementMouseout.tooltip",function(x){I.tooltipHide(x)});I.on("tooltipHide",function(){if(g){a.tooltip.cleanup()}});w.dispatch=I;w.lines1=s;w.lines2=p;w.bars1=i;w.bars2=f;w.stack1=n;w.stack2=m;w.xAxis=t;w.yAxis1=e;w.yAxis2=c;w.options=a.utils.optionsFunc.bind(w);w._options=Object.create({},{width:{get:function(){return B},set:function(x){B=x}},height:{get:function(){return A},set:function(x){A=x}},showLegend:{get:function(){return E},set:function(x){E=x}},yDomain1:{get:function(){return q},set:function(x){q=x}},yDomain2:{get:function(){return o},set:function(x){o=x}},tooltips:{get:function(){return g},set:function(x){g=x}},tooltipContent:{get:function(){return l},set:function(x){l=x}},noData:{get:function(){return k},set:function(x){k=x}},interpolate:{get:function(){return r},set:function(x){r=x}},margin:{get:function(){return z},set:function(x){z.top=x.top!==undefined?x.top:z.top;z.right=x.right!==undefined?x.right:z.right;z.bottom=x.bottom!==undefined?x.bottom:z.bottom;z.left=x.left!==undefined?x.left:z.left}},color:{get:function(){return C},set:function(x){C=a.utils.getColor(x)}},x:{get:function(){return F},set:function(x){F=x;s.x(x);i.x(x)}},y:{get:function(){return D},set:function(x){D=x;s.y(x);i.y(x)}}});a.utils.initOptions(w);return w};a.models.ohlcBar=function(){var n={top:0,right:0,bottom:0,left:0},r=null,o=null,p=Math.floor(Math.random()*10000),i=d3.scale.linear(),h=d3.scale.linear(),w=function(x){return x.x},v=function(x){return x.y},e=function(x){return x.open},c=function(x){return x.close},B=function(x){return x.high},j=function(x){return x.low},g=[],f=[],k=false,A=true,u=a.utils.defaultColor(),z=false,t,q,m,s,C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");function l(x){x.each(function(J){var D=d3.select(this);var M=(r||parseInt(D.style("width"))||960)-n.left-n.right;var G=(o||parseInt(D.style("height"))||400)-n.top-n.bottom;a.utils.initSVG(D);i.domain(t||d3.extent(J[0].values.map(w).concat(g)));if(k){i.range(m||[M*0.5/J[0].values.length,M*(J[0].values.length-0.5)/J[0].values.length])}else{i.range(m||[0,M])}h.domain(q||[d3.min(J[0].values.map(j).concat(f)),d3.max(J[0].values.map(B).concat(f))]).range(s||[G,0]);if(i.domain()[0]===i.domain()[1]){i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*0.01,i.domain()[1]+i.domain()[1]*0.01]):i.domain([-1,1])}if(h.domain()[0]===h.domain()[1]){h.domain()[0]?h.domain([h.domain()[0]+h.domain()[0]*0.01,h.domain()[1]-h.domain()[1]*0.01]):h.domain([-1,1])}var E=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([J[0].values]);var I=E.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar");var H=I.append("defs");var y=I.append("g");var K=E.select("g");y.append("g").attr("class","nv-ticks");E.attr("transform","translate("+n.left+","+n.top+")");D.on("click",function(O,N){C.chartClick({data:O,index:N,pos:d3.event,id:p})});H.append("clipPath").attr("id","nv-chart-clip-path-"+p).append("rect");E.select("#nv-chart-clip-path-"+p+" rect").attr("width",M).attr("height",G);K.attr("clip-path",A?"url(#nv-chart-clip-path-"+p+")":"");var L=E.select(".nv-ticks").selectAll(".nv-tick").data(function(N){return N});L.exit().remove();var F=L.enter().append("path").attr("class",function(P,O,N){return(e(P,O)>c(P,O)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+N+"-"+O}).attr("d",function(P,O){var N=(M/J[0].values.length)*0.9;return"m0,0l0,"+(h(e(P,O))-h(B(P,O)))+"l"+(-N/2)+",0l"+(N/2)+",0l0,"+(h(j(P,O))-h(e(P,O)))+"l0,"+(h(c(P,O))-h(j(P,O)))+"l"+(N/2)+",0l"+(-N/2)+",0z"}).attr("transform",function(O,N){return"translate("+i(w(O,N))+","+h(B(O,N))+")"}).attr("fill",function(O,N){return u[0]}).attr("stroke",function(O,N){return u[0]}).attr("x",0).attr("y",function(O,N){return h(Math.max(0,v(O,N)))}).attr("height",function(O,N){return Math.abs(h(v(O,N))-h(0))});L.attr("class",function(P,O,N){return(e(P,O)>c(P,O)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+N+"-"+O});d3.transition(L).attr("transform",function(O,N){return"translate("+i(w(O,N))+","+h(B(O,N))+")"}).attr("d",function(P,O){var N=(M/J[0].values.length)*0.9;return"m0,0l0,"+(h(e(P,O))-h(B(P,O)))+"l"+(-N/2)+",0l"+(N/2)+",0l0,"+(h(j(P,O))-h(e(P,O)))+"l0,"+(h(c(P,O))-h(j(P,O)))+"l"+(N/2)+",0l"+(-N/2)+",0z"})});return l}l.highlightPoint=function(y,x){l.clearHighlights();d3.select(".nv-ohlcBar .nv-tick-0-"+y).classed("hover",x)};l.clearHighlights=function(){d3.select(".nv-ohlcBar .nv-tick.hover").classed("hover",false)};l.dispatch=C;l.options=a.utils.optionsFunc.bind(l);l._options=Object.create({},{width:{get:function(){return r},set:function(x){r=x}},height:{get:function(){return o},set:function(x){o=x}},xScale:{get:function(){return i},set:function(x){i=x}},yScale:{get:function(){return h},set:function(x){h=x}},xDomain:{get:function(){return t},set:function(x){t=x}},yDomain:{get:function(){return q},set:function(x){q=x}},xRange:{get:function(){return m},set:function(x){m=x}},yRange:{get:function(){return s},set:function(x){s=x}},forceX:{get:function(){return g},set:function(x){g=x}},forceY:{get:function(){return f},set:function(x){f=x}},padData:{get:function(){return k},set:function(x){k=x}},clipEdge:{get:function(){return A},set:function(x){A=x}},id:{get:function(){return p},set:function(x){p=x}},interactive:{get:function(){return z},set:function(x){z=x}},x:{get:function(){return w},set:function(x){w=x}},y:{get:function(){return v},set:function(x){v=x}},open:{get:function(){return e()},set:function(x){e=x}},close:{get:function(){return c()},set:function(x){c=x}},high:{get:function(){return B},set:function(x){B=x}},low:{get:function(){return j},set:function(x){j=x}},margin:{get:function(){return n},set:function(x){n.top=x.top!=undefined?x.top:n.top;n.right=x.right!=undefined?x.right:n.right;n.bottom=x.bottom!=undefined?x.bottom:n.bottom;n.left=x.left!=undefined?x.left:n.left}},color:{get:function(){return u},set:function(x){u=a.utils.getColor(x)}}});a.utils.initOptions(l);return l};a.models.parallelCoordinates=function(){var h={top:30,right:10,bottom:10,left:10},e=null,n=null,m=d3.scale.ordinal(),l={},c=[],i=a.utils.defaultColor(),f=[],g=[],j=d3.dispatch("brush");function k(o){o.each(function(x){var r=d3.select(this);var B=(e||parseInt(r.style("width"))||960)-h.left-h.right;var t=(n||parseInt(r.style("height"))||400)-h.top-h.bottom;a.utils.initSVG(r);g=x;k.update=function(){};m.rangePoints([0,B],1).domain(c);c.forEach(function(E){l[E]=d3.scale.linear().domain(d3.extent(x,function(F){return +F[E]})).range([t,0]);l[E].brush=d3.svg.brush().y(l[E]).on("brush",z);return E!="name"});var s=r.selectAll("g.nv-wrap.nv-parallelCoordinates").data([x]);var v=s.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates");var p=v.append("g");var y=s.select("g");p.append("g").attr("class","nv-parallelCoordinatesWrap");s.attr("transform","translate("+h.left+","+h.top+")");var D=d3.svg.line(),u=d3.svg.axis().orient("left"),q,A;q=p.append("g").attr("class","background").selectAll("path").data(x).enter().append("path").attr("d",C);A=p.append("g").attr("class","foreground").selectAll("path").data(x).enter().append("path").attr("d",C).attr("stroke",i);var w=y.selectAll(".dimension").data(c).enter().append("g").attr("class","dimension").attr("transform",function(E){return"translate("+m(E)+",0)"});w.append("g").attr("class","axis").each(function(E){d3.select(this).call(u.scale(l[E]))}).append("text").attr("text-anchor","middle").attr("y",-9).text(String);w.append("g").attr("class","brush").each(function(E){d3.select(this).call(l[E].brush)}).selectAll("rect").attr("x",-8).attr("width",16);function C(E){return D(c.map(function(F){return[m(F),l[F](E[F])]}))}function z(){var F=c.filter(function(G){return !l[G].brush.empty()}),E=F.map(function(G){return l[G].brush.extent()});f=[];F.forEach(function(H,G){f[G]={dimension:H,extent:E[G]}});g=[];A.style("display",function(H){var G=F.every(function(J,I){return E[I][0]<=H[J]&&H[J]<=E[I][1]});if(G){g.push(H)}return G?null:"none"});j.brush({filters:f,active:g})}});return k}k.dispatch=j;k.options=a.utils.optionsFunc.bind(k);k._options=Object.create({},{width:{get:function(){return e},set:function(o){e=o}},height:{get:function(){return n},set:function(o){n=o}},dimensions:{get:function(){return c},set:function(o){c=o}},margin:{get:function(){return h},set:function(o){h.top=typeof o.top!="undefined"?o.top:h.top;h.right=typeof o.right!="undefined"?o.right:h.right;h.bottom=typeof o.bottom!="undefined"?o.bottom:h.bottom;h.left=typeof o.left!="undefined"?o.left:h.left}},color:{get:function(){return i},set:function(o){i=a.utils.getColor(o)}}});a.utils.initOptions(k);return k};a.models.pie=function(){var p={top:0,right:0,bottom:0,left:0},u=500,q=500,A=function(F){return F.x},z=function(F){return F.y},s=Math.floor(Math.random()*10000),w=a.utils.defaultColor(),j=d3.format(",.2f"),i=d3.format("%"),r=true,k=true,v=false,D="key",x=0.02,l=false,E=false,B=true,f=0,e=false,y=false,m=false,t=false,g=0,n=0.5,c=250,C=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd");var h=a.utils.renderWatch(C);function o(F){h.reset();F.each(function(ag){var H=u-p.left-p.right,L=q-p.top-p.bottom,M=Math.min(H,L)/2,R=M-(M/5),V=d3.select(this);a.utils.initSVG(V);var U=V.selectAll(".nv-wrap.nv-pie").data(ag);var O=U.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+s);var Y=O.append("g");var Z=U.select("g");var N=Y.append("g").attr("class","nv-pie");Y.append("g").attr("class","nv-pieLabels");U.attr("transform","translate("+p.left+","+p.top+")");Z.select(".nv-pie").attr("transform","translate("+H/2+","+L/2+")");Z.select(".nv-pieLabels").attr("transform","translate("+H/2+","+L/2+")");V.on("click",function(ah,ae){C.chartClick({data:ah,index:ae,pos:d3.event,id:s})});var S=d3.svg.arc().outerRadius(R);var ab=d3.svg.arc().outerRadius(R+5);if(y){S.startAngle(y);ab.startAngle(y)}if(t){S.endAngle(t);ab.endAngle(t)}if(l){S.innerRadius(M*n);ab.innerRadius(M*n)}var W=d3.layout.pie().sort(null).value(function(ae){return ae.disabled?0:z(ae)});if(W.padAngle&&m){W.padAngle(m)}if(S.cornerRadius&&g){S.cornerRadius(g);ab.cornerRadius(g)}if(l&&E){var G=N.append("g").attr("class","nv-pie");G.append("text").style("text-anchor","middle").attr("class","nv-pie-title").text(function(ae){return E}).attr("dy","0.35em").attr("transform",function(ah,ae){return"translate(0, "+f+")"})}var J=U.select(".nv-pie").selectAll(".nv-slice").data(W);var I=U.select(".nv-pieLabels").selectAll(".nv-label").data(W);J.exit().remove();I.exit().remove();var ac=J.enter().append("g");ac.attr("class","nv-slice");ac.on("mouseover",function(ah,ae){d3.select(this).classed("hover",true);if(B){d3.select(this).select("path").transition().duration(70).attr("d",ab)}C.elementMouseover({label:A(ah.data),value:z(ah.data),point:ah.data,pointIndex:ae,pos:[d3.event.pageX,d3.event.pageY],id:s,color:d3.select(this).style("fill")})});ac.on("mouseout",function(ah,ae){d3.select(this).classed("hover",false);if(B){d3.select(this).select("path").transition().duration(50).attr("d",S)}C.elementMouseout({label:A(ah.data),value:z(ah.data),point:ah.data,index:ae,id:s})});J.attr("fill",function(ah,ae){return w(ah,ae)});J.attr("stroke",function(ah,ae){return w(ah,ae)});var X=ac.append("path").each(function(ae){this._current=ae});X.on("click",function(ah,ae){C.elementClick({label:A(ah.data),value:z(ah.data),point:ah.data,index:ae,pos:d3.event,id:s});d3.event.stopPropagation()});X.on("dblclick",function(ah,ae){C.elementDblClick({label:A(ah.data),value:z(ah.data),point:ah.data,index:ae,pos:d3.event,id:s});d3.event.stopPropagation()});J.select("path").transition().attr("d",S).attrTween("d",K);if(r){var P=d3.svg.arc().innerRadius(0);if(k){var P=S}if(v){P=d3.svg.arc().outerRadius(S.outerRadius())}I.enter().append("g").classed("nv-label",true).each(function(ai,ae){var ah=d3.select(this);ah.attr("transform",function(ak){if(e){ak.outerRadius=R+10;ak.innerRadius=R+15;var aj=(ak.startAngle+ak.endAngle)/2*(180/Math.PI);if((ak.startAngle+ak.endAngle)/2<Math.PI){aj-=90}else{aj+=90}return"translate("+P.centroid(ak)+") rotate("+aj+")"}else{ak.outerRadius=M+10;ak.innerRadius=M+15;return"translate("+P.centroid(ak)+")"}});ah.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);ah.append("text").style("text-anchor",e?((ai.startAngle+ai.endAngle)/2<Math.PI?"start":"end"):"middle").style("fill","#000")});var T={};var af=14;var Q=140;var ad=function(ae){return Math.floor(ae[0]/Q)*Q+","+Math.floor(ae[1]/af)*af};I.watchTransition(h,"pie labels").attr("transform",function(aj){if(e){aj.outerRadius=R+10;aj.innerRadius=R+15;var ah=(aj.startAngle+aj.endAngle)/2*(180/Math.PI);if((aj.startAngle+aj.endAngle)/2<Math.PI){ah-=90}else{ah+=90}return"translate("+P.centroid(aj)+") rotate("+ah+")"}else{aj.outerRadius=M+10;aj.innerRadius=M+15;var ae=P.centroid(aj);if(aj.value){var ai=ad(ae);if(T[ai]){ae[1]-=af}T[ad(ae)]=true}return"translate("+ae+")"}});I.select(".nv-label text").style("text-anchor",e?((d.startAngle+d.endAngle)/2<Math.PI?"start":"end"):"middle").text(function(ai,ae){var ah=(ai.endAngle-ai.startAngle)/(2*Math.PI);var aj={key:A(ai.data),value:z(ai.data),percent:i(ah)};return(ai.value&&ah>x)?aj[D]:""})}function aa(ah){var ae=(ah.startAngle+ah.endAngle)*90/Math.PI-90;return ae>90?ae-180:ae}function K(ae){ae.endAngle=isNaN(ae.endAngle)?0:ae.endAngle;ae.startAngle=isNaN(ae.startAngle)?0:ae.startAngle;if(!l){ae.innerRadius=0}var ah=d3.interpolate(this._current,ae);this._current=ah(0);return function(ai){return S(ah(ai))}}});h.renderEnd("pie immediate");return o}o.dispatch=C;o.options=a.utils.optionsFunc.bind(o);o._options=Object.create({},{width:{get:function(){return u},set:function(F){u=F}},height:{get:function(){return q},set:function(F){q=F}},showLabels:{get:function(){return r},set:function(F){r=F}},title:{get:function(){return E},set:function(F){E=F}},titleOffset:{get:function(){return f},set:function(F){f=F}},labelThreshold:{get:function(){return x},set:function(F){x=F}},labelFormat:{get:function(){return i},set:function(F){i=F}},valueFormat:{get:function(){return j},set:function(F){j=F}},x:{get:function(){return A},set:function(F){A=F}},id:{get:function(){return s},set:function(F){s=F}},endAngle:{get:function(){return t},set:function(F){t=F}},startAngle:{get:function(){return y},set:function(F){y=F}},padAngle:{get:function(){return m},set:function(F){m=F}},cornerRadius:{get:function(){return g},set:function(F){g=F}},donutRatio:{get:function(){return n},set:function(F){n=F}},pieLabelsOutside:{get:function(){return k},set:function(F){k=F}},donutLabelsOutside:{get:function(){return v},set:function(F){v=F}},labelSunbeamLayout:{get:function(){return e},set:function(F){e=F}},donut:{get:function(){return l},set:function(F){l=F}},growOnHover:{get:function(){return B},set:function(F){B=F}},margin:{get:function(){return p},set:function(F){p.top=typeof F.top!="undefined"?F.top:p.top;p.right=typeof F.right!="undefined"?F.right:p.right;p.bottom=typeof F.bottom!="undefined"?F.bottom:p.bottom;p.left=typeof F.left!="undefined"?F.left:p.left}},y:{get:function(){return z},set:function(F){z=d3.functor(F)}},color:{get:function(){return w},set:function(F){w=a.utils.getColor(F)}},labelType:{get:function(){return D},set:function(F){D=F||"key"}}});a.utils.initOptions(o);return o};a.models.pieChart=function(){var n=a.models.pie();var f=a.models.legend();var p={top:30,right:20,bottom:20,left:20},r=null,q=null,u=true,s=a.utils.defaultColor(),e=true,i=function(w,A,z,x){return'<h3 style="background-color: '+z.color+'">'+w+"</h3><p>"+A+"</p>"},j=a.utils.state(),k=null,g="No Data Available.",c=250,v=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd");var h=function(C,w){var x=n.x()(C.point);var B=C.pos[0]+((w&&w.offsetLeft)||0),A=C.pos[1]+((w&&w.offsetTop)||0),D=n.valueFormat()(n.y()(C.point)),z=i(x,D,C,o);a.tooltip.show([B,A],z,C.value<0?"n":"s",null,w)};var l=a.utils.renderWatch(v);var m=function(w){return function(){return{active:w.map(function(x){return !x.disabled})}}};var t=function(w){return function(x){if(x.active!==undefined){w.forEach(function(z,y){z.disabled=!x.active[y]})}}};function o(w){l.reset();l.models(n);w.each(function(C){var y=d3.select(this);a.utils.initSVG(y);var E=this;var H=(r||parseInt(y.style("width"),10)||960)-p.left-p.right,B=(q||parseInt(y.style("height"),10)||400)-p.top-p.bottom;o.update=function(){y.transition().call(o)};o.container=this;j.setter(t(C),o.update).getter(m(C)).update();j.disabled=C.map(function(I){return !!I.disabled});if(!k){var G;k={};for(G in j){if(j[G] instanceof Array){k[G]=j[G].slice(0)}else{k[G]=j[G]}}}if(!C||!C.length){var z=y.selectAll(".nv-noData").data([g]);z.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");z.attr("x",p.left+H/2).attr("y",p.top+B/2).text(function(I){return I});return o}else{y.selectAll(".nv-noData").remove()}var A=y.selectAll("g.nv-wrap.nv-pieChart").data([C]);var x=A.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g");var D=A.select("g");x.append("g").attr("class","nv-pieWrap");x.append("g").attr("class","nv-legendWrap");if(u){f.width(H).key(n.x());A.select(".nv-legendWrap").datum(C).call(f);if(p.top!=f.height()){p.top=f.height();B=(q||parseInt(y.style("height"))||400)-p.top-p.bottom}A.select(".nv-legendWrap").attr("transform","translate(0,"+(-p.top)+")")}A.attr("transform","translate("+p.left+","+p.top+")");n.width(H).height(B);var F=D.select(".nv-pieWrap").datum([C]);d3.transition(F).call(n);f.dispatch.on("stateChange",function(J){for(var I in J){j[I]=J[I]}v.stateChange(j);o.update()});n.dispatch.on("elementMouseout.tooltip",function(I){v.tooltipHide(I)});v.on("changeState",function(I){if(typeof I.disabled!=="undefined"){C.forEach(function(K,J){K.disabled=I.disabled[J]});j.disabled=I.disabled}o.update()})});l.renderEnd("pieChart immediate");return o}n.dispatch.on("elementMouseover.tooltip",function(w){w.pos=[w.pos[0]+p.left,w.pos[1]+p.top];v.tooltipShow(w)});v.on("tooltipShow",function(w){if(e){h(w)}});v.on("tooltipHide",function(){if(e){a.tooltip.cleanup()}});o.legend=f;o.dispatch=v;o.pie=n;o.options=a.utils.optionsFunc.bind(o);o._options=Object.create({},{noData:{get:function(){return g},set:function(w){g=w}},tooltipContent:{get:function(){return i},set:function(w){i=w}},tooltips:{get:function(){return e},set:function(w){e=w}},showLegend:{get:function(){return u},set:function(w){u=w}},defaultState:{get:function(){return k},set:function(w){k=w}},color:{get:function(){return s},set:function(w){s=w;f.color(s);n.color(s)}},duration:{get:function(){return c},set:function(w){c=w;l.reset(c)}}});a.utils.inheritOptions(o,n);a.utils.initOptions(o);return o};a.models.scatter=function(){var j={top:0,right:0,bottom:0,left:0},c=null,f=null,s=a.utils.defaultColor(),w=Math.floor(Math.random()*100000),H=d3.scale.linear(),F=d3.scale.linear(),C=d3.scale.linear(),M=function(x){return x.x},L=function(x){return x.y},v=function(x){return x.size||1},n=function(x){return x.shape||"circle"},D=[],B=[],O=[],i=true,P=function(x){return !x.notActive},J=false,l=0.1,u=false,R=true,p=function(){return 25},h=null,g=null,N=null,q=null,k=null,t=null,I=false,K=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),S=true,r=250;var o,e,A,G,m=false,E=a.utils.renderWatch(K,r);function Q(x){E.reset();x.each(function(Z){var z=d3.select(this);var ad=(c||parseInt(z.style("width"))||960)-j.left-j.right;var V=(f||parseInt(z.style("height"))||400)-j.top-j.bottom;a.utils.initSVG(z);Z.forEach(function(af,ae){af.values.forEach(function(ag){ag.series=ae})});var U=(h&&g&&k)?[]:d3.merge(Z.map(function(ae){return ae.values.map(function(ag,af){return{x:M(ag,af),y:L(ag,af),size:v(ag,af)}})}));H.domain(h||d3.extent(U.map(function(ae){return ae.x}).concat(D)));if(J&&Z[0]){H.range(N||[(ad*l+ad)/(2*Z[0].values.length),ad-ad*(1+l)/(2*Z[0].values.length)])}else{H.range(N||[0,ad])}F.domain(g||d3.extent(U.map(function(ae){return ae.y}).concat(B))).range(q||[V,0]);C.domain(k||d3.extent(U.map(function(ae){return ae.size}).concat(O))).range(t||[16,256]);if(H.domain()[0]===H.domain()[1]||F.domain()[0]===F.domain()[1]){I=true}if(H.domain()[0]===H.domain()[1]){H.domain()[0]?H.domain([H.domain()[0]-H.domain()[0]*0.01,H.domain()[1]+H.domain()[1]*0.01]):H.domain([-1,1])}if(F.domain()[0]===F.domain()[1]){F.domain()[0]?F.domain([F.domain()[0]-F.domain()[0]*0.01,F.domain()[1]+F.domain()[1]*0.01]):F.domain([-1,1])}if(isNaN(H.domain()[0])){H.domain([-1,1])}if(isNaN(F.domain()[0])){F.domain([-1,1])}o=o||H;e=e||F;A=A||C;var T=z.selectAll("g.nv-wrap.nv-scatter").data([Z]);var Y=T.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+w+(I?" nv-single-point":""));var W=Y.append("defs");var y=Y.append("g");var aa=T.select("g");y.append("g").attr("class","nv-groups");y.append("g").attr("class","nv-point-paths");T.attr("transform","translate("+j.left+","+j.top+")");W.append("clipPath").attr("id","nv-edge-clip-"+w).append("rect");T.select("#nv-edge-clip-"+w+" rect").attr("width",ad).attr("height",(V>0)?V:0);aa.attr("clip-path",u?"url(#nv-edge-clip-"+w+")":"");function ab(){if(!i){return false}var ai;var ag=d3.merge(Z.map(function(am,al){return am.values.map(function(an,aq){var ap=M(an,aq);var ao=L(an,aq);return[H(ap)+Math.random()*1e-7,F(ao)+Math.random()*1e-7,al,aq,an]}).filter(function(an,ao){return P(an[4],ao)})}));if(S===true){if(ag.length<3){ag.push([H.range()[0]-20,F.range()[0]-20,null,null]);ag.push([H.range()[1]+20,F.range()[1]+20,null,null]);ag.push([H.range()[0]-20,F.range()[0]+20,null,null]);ag.push([H.range()[1]+20,F.range()[1]-20,null,null])}var aj=d3.geom.polygon([[-10,-10],[-10,f+10],[c+10,f+10],[c+10,-10]]);var ak=d3.geom.voronoi(ag).map(function(am,al){return{data:aj.clip(am),series:ag[al][2],point:ag[al][3]}});T.select(".nv-point-paths").selectAll("path").remove();var ae=T.select(".nv-point-paths").selectAll("path").data(ak);ae.enter().append("svg:path").attr("d",function(al){if(!al||!al.data||al.data.length===0){return"M 0 0"}else{return"M"+al.data.join(",")+"Z"}}).attr("id",function(am,al){return"nv-path-"+al}).attr("clip-path",function(am,al){return"url(#nv-clip-"+al+")"});if(R){var af=T.append("svg:g").attr("id","nv-point-clips");af.selectAll("clipPath").data(ag).enter().append("svg:clipPath").attr("id",function(am,al){return"nv-clip-"+al}).append("svg:circle").attr("cx",function(al){return al[0]}).attr("cy",function(al){return al[1]}).attr("r",p)}var ah=function(ao,an){if(m){return 0}var am=Z[ao.series];if(typeof am==="undefined"){return}var al=am.values[ao.point];an({point:al,series:am,pos:[H(M(al,ao.point))+j.left,F(L(al,ao.point))+j.top],seriesIndex:ao.series,pointIndex:ao.point})};ae.on("click",function(al){ah(al,K.elementClick)}).on("dblclick",function(al){ah(al,K.elementDblClick)}).on("mouseover",function(al){ah(al,K.elementMouseover)}).on("mouseout",function(am,al){ah(am,K.elementMouseout)})}else{T.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(ao,an){if(m||!Z[ao.series]){return 0}var am=Z[ao.series],al=am.values[an];K.elementClick({point:al,series:am,pos:[H(M(al,an))+j.left,F(L(al,an))+j.top],seriesIndex:ao.series,pointIndex:an})}).on("mouseover",function(ao,an){if(m||!Z[ao.series]){return 0}var am=Z[ao.series],al=am.values[an];K.elementMouseover({point:al,series:am,pos:[H(M(al,an))+j.left,F(L(al,an))+j.top],seriesIndex:ao.series,pointIndex:an})}).on("mouseout",function(ao,an){if(m||!Z[ao.series]){return 0}var am=Z[ao.series],al=am.values[an];K.elementMouseout({point:al,series:am,seriesIndex:ao.series,pointIndex:an})})}m=false}m=true;var X=T.select(".nv-groups").selectAll(".nv-group").data(function(ae){return ae},function(ae){return ae.key});X.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);X.exit().remove();X.attr("class",function(af,ae){return"nv-group nv-series-"+ae}).classed("hover",function(ae){return ae.hover});X.watchTransition(E,"scatter: groups").style("fill",function(af,ae){return s(af,ae)}).style("stroke",function(af,ae){return s(af,ae)}).style("stroke-opacity",1).style("fill-opacity",0.5);var ac=X.selectAll("path.nv-point").data(function(ae){return ae.values});ac.enter().append("path").style("fill",function(af,ae){return af.color}).style("stroke",function(af,ae){return af.color}).attr("transform",function(af,ae){return"translate("+o(M(af,ae))+","+e(L(af,ae))+")"}).attr("d",a.utils.symbol().type(n).size(function(af,ae){return C(v(af,ae))}));ac.exit().remove();X.exit().selectAll("path.nv-point").watchTransition(E,"scatter exit").attr("transform",function(af,ae){return"translate("+H(M(af,ae))+","+F(L(af,ae))+")"}).remove();ac.each(function(af,ae){d3.select(this).classed("nv-point",true).classed("nv-point-"+ae,true).classed("hover",false)});ac.watchTransition(E,"scatter points").attr("transform",function(af,ae){return"translate("+H(M(af,ae))+","+F(L(af,ae))+")"}).attr("d",a.utils.symbol().type(n).size(function(af,ae){return C(v(af,ae))}));clearTimeout(G);G=setTimeout(ab,300);o=H.copy();e=F.copy();A=C.copy()});E.renderEnd("scatter immediate");return Q}Q.dispatch=K;Q.options=a.utils.optionsFunc.bind(Q);Q._calls=new function(){this.clearHighlights=function(){d3.selectAll(".nv-chart-"+w+" .nv-point.hover").classed("hover",false);return null};this.highlightPoint=function(y,z,x){d3.select(".nv-chart-"+w+" .nv-series-"+y+" .nv-point-"+z).classed("hover",x)}};K.on("elementMouseover.point",function(x){if(i){Q._calls.highlightPoint(x.seriesIndex,x.pointIndex,true)}});K.on("elementMouseout.point",function(x){if(i){Q._calls.highlightPoint(x.seriesIndex,x.pointIndex,false)}});Q._options=Object.create({},{width:{get:function(){return c},set:function(x){c=x}},height:{get:function(){return f},set:function(x){f=x}},xScale:{get:function(){return H},set:function(x){H=x}},yScale:{get:function(){return F},set:function(x){F=x}},pointScale:{get:function(){return C},set:function(x){C=x}},xDomain:{get:function(){return h},set:function(x){h=x}},yDomain:{get:function(){return g},set:function(x){g=x}},pointDomain:{get:function(){return k},set:function(x){k=x}},xRange:{get:function(){return N},set:function(x){N=x}},yRange:{get:function(){return q},set:function(x){q=x}},pointRange:{get:function(){return t},set:function(x){t=x}},forceX:{get:function(){return D},set:function(x){D=x}},forceY:{get:function(){return B},set:function(x){B=x}},forcePoint:{get:function(){return O},set:function(x){O=x}},interactive:{get:function(){return i},set:function(x){i=x}},pointActive:{get:function(){return P},set:function(x){P=x}},padDataOuter:{get:function(){return l},set:function(x){l=x}},padData:{get:function(){return J},set:function(x){J=x}},clipEdge:{get:function(){return u},set:function(x){u=x}},clipVoronoi:{get:function(){return R},set:function(x){R=x}},clipRadius:{get:function(){return p},set:function(x){p=x}},id:{get:function(){return w},set:function(x){w=x}},x:{get:function(){return M},set:function(x){M=d3.functor(x)}},y:{get:function(){return L},set:function(x){L=d3.functor(x)}},pointSize:{get:function(){return v},set:function(x){v=d3.functor(x)}},pointShape:{get:function(){return n},set:function(x){n=d3.functor(x)}},margin:{get:function(){return j},set:function(x){j.top=x.top!==undefined?x.top:j.top;j.right=x.right!==undefined?x.right:j.right;j.bottom=x.bottom!==undefined?x.bottom:j.bottom;j.left=x.left!==undefined?x.left:j.left}},duration:{get:function(){return r},set:function(x){r=x;E.reset(r)}},color:{get:function(){return s},set:function(x){s=a.utils.getColor(x)}},useVoronoi:{get:function(){return S},set:function(x){S=x;if(S===false){R=false}}}});a.utils.initOptions(Q);return Q};a.models.scatterChart=function(){var u=a.models.scatter(),r=a.models.axis(),f=a.models.axis(),h=a.models.legend(),A=a.models.distribution(),w=a.models.distribution();var B={top:30,right:20,bottom:50,left:75},F=null,C=null,G=a.utils.defaultColor(),t=u.xScale(),s=u.yScale(),e=false,M=false,J=true,K=true,v=true,q=false,g=true,E=function(O,N,P){return"<strong>"+N+"</strong>"},D=function(O,N,P){return"<strong>"+P+"</strong>"},m=function(P,N,Q,O){return"<h3>"+P+"</h3><p>"+O+"</p>"},l=a.utils.state(),o=null,L=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),k="No Data Available.",c=250;u.xScale(t).yScale(s);r.orient("bottom").tickPadding(10);f.orient((q)?"right":"left").tickPadding(10);A.axis("x");w.axis("y");var I,i,n=a.utils.renderWatch(L,c);var j=function(Q,T){var O=Q.pos[0]+(T.offsetLeft||0),S=Q.pos[1]+(T.offsetTop||0),P=Q.pos[0]+(T.offsetLeft||0),y=s.range()[0]+B.top+(T.offsetTop||0),N=t.range()[0]+B.left+(T.offsetLeft||0),x=Q.pos[1]+(T.offsetTop||0),U=r.tickFormat()(u.x()(Q.point,Q.pointIndex)),R=f.tickFormat()(u.y()(Q.point,Q.pointIndex));if(E!=null){a.tooltip.show([P,y],E(Q.series.key,U,R,Q,z),"n",1,T,"x-nvtooltip")}if(D!=null){a.tooltip.show([N,x],D(Q.series.key,U,R,Q,z),"e",1,T,"y-nvtooltip")}if(m!=null){a.tooltip.show([O,S],m(Q.series.key,U,R,Q.point.tooltip,Q,z),Q.value<0?"n":"s",null,T)}};var p=function(x){return function(){return{active:x.map(function(y){return !y.disabled})}}};var H=function(x){return function(y){if(y.active!==undefined){x.forEach(function(O,N){O.disabled=!y.active[N]})}}};function z(x){n.reset();n.models(u);if(K){n.models(r)}if(v){n.models(f)}if(e){n.models(A)}if(M){n.models(w)}x.each(function(U){var N=d3.select(this),W=this;a.utils.initSVG(N);var Y=(F||parseInt(N.style("width"))||960)-B.left-B.right,Q=(C||parseInt(N.style("height"))||400)-B.top-B.bottom;z.update=function(){if(c===0){N.call(z)}else{N.transition().duration(c).call(z)}};z.container=this;l.setter(H(U),z.update).getter(p(U)).update();l.disabled=U.map(function(Z){return !!Z.disabled});if(!o){var X;o={};for(X in l){if(l[X] instanceof Array){o[X]=l[X].slice(0)}else{o[X]=l[X]}}}if(!U||!U.length||!U.filter(function(Z){return Z.values.length}).length){var O=N.selectAll(".nv-noData").data([k]);O.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");O.attr("x",B.left+Y/2).attr("y",B.top+Q/2).text(function(Z){return Z});n.renderEnd("scatter immediate");return z}else{N.selectAll(".nv-noData").remove()}t=u.xScale();s=u.yScale();var P=N.selectAll("g.nv-wrap.nv-scatterChart").data([U]);var S=P.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+u.id());var y=S.append("g");var V=P.select("g");y.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none");y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis");y.append("g").attr("class","nv-scatterWrap");y.append("g").attr("class","nv-regressionLinesWrap");y.append("g").attr("class","nv-distWrap");y.append("g").attr("class","nv-legendWrap");P.attr("transform","translate("+B.left+","+B.top+")");if(q){V.select(".nv-y.nv-axis").attr("transform","translate("+Y+",0)")}if(J){h.width(Y/2);P.select(".nv-legendWrap").datum(U).call(h);if(B.top!=h.height()){B.top=h.height();Q=(C||parseInt(N.style("height"))||400)-B.top-B.bottom}P.select(".nv-legendWrap").attr("transform","translate("+(Y/2)+","+(-B.top)+")")}u.width(Y).height(Q).color(U.map(function(aa,Z){return aa.color||G(aa,Z)}).filter(function(aa,Z){return !U[Z].disabled}));P.select(".nv-scatterWrap").datum(U.filter(function(Z){return !Z.disabled})).call(u);P.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+u.id()+")");var T=P.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(Z){return Z});T.enter().append("g").attr("class","nv-regLines");var R=T.selectAll(".nv-regLine").data(function(Z){return[Z]});R.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);R.filter(function(Z){return Z.intercept&&Z.slope}).watchTransition(n,"scatterPlusLineChart: regline").attr("x1",t.range()[0]).attr("x2",t.range()[1]).attr("y1",function(aa,Z){return s(t.domain()[0]*aa.slope+aa.intercept)}).attr("y2",function(aa,Z){return s(t.domain()[1]*aa.slope+aa.intercept)}).style("stroke",function(ab,aa,Z){return G(ab,Z)}).style("stroke-opacity",function(aa,Z){return(aa.disabled||typeof aa.slope==="undefined"||typeof aa.intercept==="undefined")?0:1});if(K){r.scale(t).ticks(r.ticks()?r.ticks():a.utils.calcTicksX(Y/100,U)).tickSize(-Q,0);V.select(".nv-x.nv-axis").attr("transform","translate(0,"+s.range()[0]+")").call(r)}if(v){f.scale(s).ticks(f.ticks()?f.ticks():a.utils.calcTicksY(Q/36,U)).tickSize(-Y,0);V.select(".nv-y.nv-axis").call(f)}if(e){A.getData(u.x()).scale(t).width(Y).color(U.map(function(aa,Z){return aa.color||G(aa,Z)}).filter(function(aa,Z){return !U[Z].disabled}));y.select(".nv-distWrap").append("g").attr("class","nv-distributionX");V.select(".nv-distributionX").attr("transform","translate(0,"+s.range()[0]+")").datum(U.filter(function(Z){return !Z.disabled})).call(A)}if(M){w.getData(u.y()).scale(s).width(Q).color(U.map(function(aa,Z){return aa.color||G(aa,Z)}).filter(function(aa,Z){return !U[Z].disabled}));y.select(".nv-distWrap").append("g").attr("class","nv-distributionY");V.select(".nv-distributionY").attr("transform","translate("+(q?Y:-w.size())+",0)").datum(U.filter(function(Z){return !Z.disabled})).call(w)}h.dispatch.on("stateChange",function(aa){for(var Z in aa){l[Z]=aa[Z]}L.stateChange(l);z.update()});u.dispatch.on("elementMouseover.tooltip",function(Z){d3.select(".nv-chart-"+u.id()+" .nv-series-"+Z.seriesIndex+" .nv-distx-"+Z.pointIndex).attr("y1",Z.pos[1]-Q);d3.select(".nv-chart-"+u.id()+" .nv-series-"+Z.seriesIndex+" .nv-disty-"+Z.pointIndex).attr("x2",Z.pos[0]+A.size());Z.pos=[Z.pos[0]+B.left,Z.pos[1]+B.top];L.tooltipShow(Z)});L.on("tooltipShow",function(Z){if(g){j(Z,W.parentNode)}});L.on("changeState",function(Z){if(typeof Z.disabled!=="undefined"){U.forEach(function(ab,aa){ab.disabled=Z.disabled[aa]});l.disabled=Z.disabled}z.update()});I=t.copy();i=s.copy()});n.renderEnd("scatter with line immediate");return z}u.dispatch.on("elementMouseout.tooltip",function(x){L.tooltipHide(x);d3.select(".nv-chart-"+u.id()+" .nv-series-"+x.seriesIndex+" .nv-distx-"+x.pointIndex).attr("y1",0);d3.select(".nv-chart-"+u.id()+" .nv-series-"+x.seriesIndex+" .nv-disty-"+x.pointIndex).attr("x2",w.size())});L.on("tooltipHide",function(){if(g){a.tooltip.cleanup()}});z.dispatch=L;z.scatter=u;z.legend=h;z.xAxis=r;z.yAxis=f;z.distX=A;z.distY=w;z._options=Object.create({},{width:{get:function(){return F},set:function(x){F=x}},height:{get:function(){return C},set:function(x){C=x}},showDistX:{get:function(){return e},set:function(x){e=x}},showDistY:{get:function(){return M},set:function(x){M=x}},showLegend:{get:function(){return J},set:function(x){J=x}},showXAxis:{get:function(){return K},set:function(x){K=x}},showYAxis:{get:function(){return v},set:function(x){v=x}},tooltips:{get:function(){return g},set:function(x){g=x}},tooltipContent:{get:function(){return m},set:function(x){m=x}},tooltipXContent:{get:function(){return E},set:function(x){E=x}},tooltipYContent:{get:function(){return D},set:function(x){D=x}},defaultState:{get:function(){return o},set:function(x){o=x}},noData:{get:function(){return k},set:function(x){k=x}},duration:{get:function(){return c},set:function(x){c=x}},margin:{get:function(){return B},set:function(x){B.top=x.top!==undefined?x.top:B.top;B.right=x.right!==undefined?x.right:B.right;B.bottom=x.bottom!==undefined?x.bottom:B.bottom;B.left=x.left!==undefined?x.left:B.left}},rightAlignYAxis:{get:function(){return q},set:function(x){q=x;f.orient((x)?"right":"left")}},color:{get:function(){return G},set:function(x){G=a.utils.getColor(x);h.color(G);A.color(G);w.color(G)}}});a.utils.inheritOptions(z,u);a.utils.initOptions(z);return z};a.models.sparkline=function(){var j={top:2,right:0,bottom:2,left:0},f=400,q=32,g=true,n=d3.scale.linear(),m=d3.scale.linear(),p=function(r){return r.x},o=function(r){return r.y},i=a.utils.getColor(["#000"]),k,e,c,h;function l(r){r.each(function(x){var A=f-j.left-j.right,v=q-j.top-j.bottom,t=d3.select(this);a.utils.initSVG(t);n.domain(k||d3.extent(x,p)).range(c||[0,A]);m.domain(e||d3.extent(x,o)).range(h||[v,0]);var u=t.selectAll("g.nv-wrap.nv-sparkline").data([x]);var w=u.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline");var s=w.append("g");var y=u.select("g");u.attr("transform","translate("+j.left+","+j.top+")");var B=u.selectAll("path").data(function(C){return[C]});B.enter().append("path");B.exit().remove();B.style("stroke",function(D,C){return D.color||i(D,C)}).attr("d",d3.svg.line().x(function(D,C){return n(p(D,C))}).y(function(D,C){return m(o(D,C))}));var z=u.selectAll("circle.nv-point").data(function(G){var E=G.map(function(J,I){return o(J,I)});function F(J){if(J!=-1){var I=G[J];I.pointIndex=J;return I}else{return null}}var D=F(E.lastIndexOf(m.domain()[1])),C=F(E.indexOf(m.domain()[0])),H=F(E.length-1);return[C,D,H].filter(function(I){return I!=null})});z.enter().append("circle");z.exit().remove();z.attr("cx",function(D,C){return n(p(D,D.pointIndex))}).attr("cy",function(D,C){return m(o(D,D.pointIndex))}).attr("r",2).attr("class",function(D,C){return p(D,D.pointIndex)==n.domain()[1]?"nv-point nv-currentValue":o(D,D.pointIndex)==m.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})});return l}l.options=a.utils.optionsFunc.bind(l);l._options=Object.create({},{width:{get:function(){return f},set:function(r){f=r}},height:{get:function(){return q},set:function(r){q=r}},xDomain:{get:function(){return k},set:function(r){k=r}},yDomain:{get:function(){return e},set:function(r){e=r}},xRange:{get:function(){return c},set:function(r){c=r}},yRange:{get:function(){return h},set:function(r){h=r}},xScale:{get:function(){return n},set:function(r){n=r}},yScale:{get:function(){return m},set:function(r){m=r}},animate:{get:function(){return g},set:function(r){g=r}},x:{get:function(){return p},set:function(r){p=d3.functor(r)}},y:{get:function(){return o},set:function(r){o=d3.functor(r)}},margin:{get:function(){return j},set:function(r){j.top=r.top!==undefined?r.top:j.top;j.right=r.right!==undefined?r.right:j.right;j.bottom=r.bottom!==undefined?r.bottom:j.bottom;j.left=r.left!==undefined?r.left:j.left}},color:{get:function(){return i},set:function(r){i=a.utils.getColor(r)}}});a.utils.initOptions(l);return l};a.models.sparklinePlus=function(){var o=a.models.sparkline();var e={top:15,right:100,bottom:10,left:50},c=null,q=null,l,k,i=[],p=false,n=d3.format(",r"),h=d3.format(",.2f"),g=true,r=true,f=false,m="No Data Available.";function j(s){s.each(function(A){var u=d3.select(this);a.utils.initSVG(u);var H=(c||parseInt(u.style("width"))||960)-e.left-e.right,x=(q||parseInt(u.style("height"))||400)-e.top-e.bottom;j.update=function(){j(s)};j.container=this;if(!A||!A.length){var v=u.selectAll(".nv-noData").data([m]);v.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");v.attr("x",e.left+H/2).attr("y",e.top+x/2).text(function(I){return I});return j}else{u.selectAll(".nv-noData").remove()}var G=o.y()(A[A.length-1],A.length-1);l=o.xScale();k=o.yScale();var w=u.selectAll("g.nv-wrap.nv-sparklineplus").data([A]);var y=w.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus");var t=y.append("g");var B=w.select("g");t.append("g").attr("class","nv-sparklineWrap");t.append("g").attr("class","nv-valueWrap");t.append("g").attr("class","nv-hoverArea");w.attr("transform","translate("+e.left+","+e.top+")");var C=B.select(".nv-sparklineWrap");o.width(H).height(x);C.call(o);var E=B.select(".nv-valueWrap");var F=E.selectAll(".nv-currentValue").data([G]);F.enter().append("text").attr("class","nv-currentValue").attr("dx",f?-8:8).attr("dy",".9em").style("text-anchor",f?"end":"start");F.attr("x",H+(f?e.right:0)).attr("y",r?function(I){return k(I)}:0).style("fill",o.color()(A[A.length-1],A.length-1)).text(h(G));t.select(".nv-hoverArea").append("rect").on("mousemove",z).on("click",function(){p=!p}).on("mouseout",function(){i=[];D()});B.select(".nv-hoverArea rect").attr("transform",function(I){return"translate("+-e.left+","+-e.top+")"}).attr("width",H+e.left+e.right).attr("height",x+e.top);function D(){if(p){return}var J=B.selectAll(".nv-hoverValue").data(i);var I=J.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);J.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove();J.attr("transform",function(K){return"translate("+l(o.x()(A[K],K))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);if(!i.length){return}I.append("line").attr("x1",0).attr("y1",-e.top).attr("x2",0).attr("y2",x);I.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-e.top).attr("text-anchor","end").attr("dy",".9em");B.select(".nv-hoverValue .nv-xValue").text(n(o.x()(A[i[0]],i[0])));I.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-e.top).attr("text-anchor","start").attr("dy",".9em");B.select(".nv-hoverValue .nv-yValue").text(h(o.y()(A[i[0]],i[0])))}function z(){if(p){return}var J=d3.mouse(this)[0]-e.left;function I(N,K){var O=Math.abs(o.x()(N[0],0)-K);var M=0;for(var L=0;L<N.length;L++){if(Math.abs(o.x()(N[L],L)-K)<O){O=Math.abs(o.x()(N[L],L)-K);M=L}}return M}i=[I(A,Math.round(l.invert(J)))];D()}});return j}j.sparkline=o;j.options=a.utils.optionsFunc.bind(j);j._options=Object.create({},{width:{get:function(){return c},set:function(s){c=s}},height:{get:function(){return q},set:function(s){q=s}},xTickFormat:{get:function(){return n},set:function(s){n=s}},yTickFormat:{get:function(){return h},set:function(s){h=s}},showValue:{get:function(){return g},set:function(s){g=s}},alignValue:{get:function(){return r},set:function(s){r=s}},rightAlignValue:{get:function(){return f},set:function(s){f=s}},noData:{get:function(){return m},set:function(s){m=s}},margin:{get:function(){return e},set:function(s){e.top=s.top!==undefined?s.top:e.top;e.right=s.right!==undefined?s.right:e.right;e.bottom=s.bottom!==undefined?s.bottom:e.bottom;e.left=s.left!==undefined?s.left:e.left}}});a.utils.inheritOptions(j,o);a.utils.initOptions(j);return j};a.models.stackedArea=function(){var l={top:0,right:0,bottom:0,left:0},o=960,m=500,p=a.utils.defaultColor(),n=Math.floor(Math.random()*100000),t=function(w){return w.x},s=function(w){return w.y},r="stack",f="zero",q="default",g="linear",u=false,i,h,j=a.models.scatter(),c=250,v=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout","renderEnd");j.interactive(false);j.pointSize(2.2).pointDomain([2.2,2.2]);var e=a.utils.renderWatch(v,c);function k(w){e.reset();e.models(j);w.each(function(G){var K=o-l.left-l.right,D=m-l.top-l.bottom,y=d3.select(this);a.utils.initSVG(y);i=j.xScale();h=j.yScale();var H=G;G.forEach(function(M,N){M.seriesIndex=N;M.values=M.values.map(function(P,O){P.index=O;P.seriesIndex=N;return P})});var E=G.filter(function(M){return !M.disabled});G=d3.layout.stack().order(q).offset(f).values(function(M){return M.values}).x(t).y(s).out(function(O,N,P){var M=(s(O)===0)?0:P;O.display={y:M,y0:N}})(E);var A=y.selectAll("g.nv-wrap.nv-stackedarea").data([G]);var F=A.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea");var C=F.append("defs");var x=F.append("g");var I=A.select("g");x.append("g").attr("class","nv-areaWrap");x.append("g").attr("class","nv-scatterWrap");A.attr("transform","translate("+l.left+","+l.top+")");j.width(K).height(D).x(t).y(function(M){return M.display.y+M.display.y0}).forceY([0]).color(G.map(function(N,M){return N.color||p(N,N.seriesIndex)}));var B=I.select(".nv-scatterWrap").datum(G);B.call(j);C.append("clipPath").attr("id","nv-edge-clip-"+n).append("rect");A.select("#nv-edge-clip-"+n+" rect").attr("width",K).attr("height",D);I.attr("clip-path",u?"url(#nv-edge-clip-"+n+")":"");var z=d3.svg.area().x(function(N,M){return i(t(N,M))}).y0(function(M){return h(M.display.y0)}).y1(function(M){return h(M.display.y+M.display.y0)}).interpolate(g);var J=d3.svg.area().x(function(N,M){return i(t(N,M))}).y0(function(M){return h(M.display.y0)}).y1(function(M){return h(M.display.y0)});var L=I.select(".nv-areaWrap").selectAll("path.nv-area").data(function(M){return M});L.enter().append("path").attr("class",function(N,M){return"nv-area nv-area-"+M}).attr("d",function(N,M){return J(N.values,N.seriesIndex)}).on("mouseover",function(N,M){d3.select(this).classed("hover",true);v.areaMouseover({point:N,series:N.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:N.seriesIndex})}).on("mouseout",function(N,M){d3.select(this).classed("hover",false);v.areaMouseout({point:N,series:N.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:N.seriesIndex})}).on("click",function(N,M){d3.select(this).classed("hover",false);v.areaClick({point:N,series:N.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:N.seriesIndex})});L.exit().remove();L.style("fill",function(N,M){return N.color||p(N,N.seriesIndex)}).style("stroke",function(N,M){return N.color||p(N,N.seriesIndex)});L.watchTransition(e,"stackedArea path").attr("d",function(N,M){return z(N.values,M)});j.dispatch.on("elementMouseover.area",function(M){I.select(".nv-chart-"+n+" .nv-area-"+M.seriesIndex).classed("hover",true)});j.dispatch.on("elementMouseout.area",function(M){I.select(".nv-chart-"+n+" .nv-area-"+M.seriesIndex).classed("hover",false)});k.d3_stackedOffset_stackPercent=function(R){var T=R.length,M=R[0].length,N=1/T,P,O,S,Q=[];for(O=0;O<M;++O){for(P=0,S=0;P<H.length;P++){S+=s(H[P].values[O])}if(S){for(P=0;P<T;P++){R[P][O][1]/=S}}else{for(P=0;P<T;P++){R[P][O][1]=N}}}for(O=0;O<M;++O){Q[O]=0}return Q}});e.renderEnd("stackedArea immediate");return k}j.dispatch.on("elementClick.area",function(w){v.areaClick(w)});j.dispatch.on("elementMouseover.tooltip",function(w){w.pos=[w.pos[0]+l.left,w.pos[1]+l.top],v.tooltipShow(w)});j.dispatch.on("elementMouseout.tooltip",function(w){v.tooltipHide(w)});k.dispatch=v;k.scatter=j;k.interpolate=function(w){if(!arguments.length){return g}g=w;return k};k.duration=function(w){if(!arguments.length){return c}c=w;e.reset(c);j.duration(c);return k};k.dispatch=v;k.options=a.utils.optionsFunc.bind(k);k._options=Object.create({},{width:{get:function(){return o},set:function(w){o=w}},height:{get:function(){return m},set:function(w){m=w}},clipEdge:{get:function(){return u},set:function(w){u=w}},offset:{get:function(){return f},set:function(w){f=w}},order:{get:function(){return q},set:function(w){q=w}},interpolate:{get:function(){return g},set:function(w){g=w}},x:{get:function(){return t},set:function(w){t=d3.functor(w)}},y:{get:function(){return s},set:function(w){s=d3.functor(w)}},margin:{get:function(){return l},set:function(w){l.top=w.top!==undefined?w.top:l.top;l.right=w.right!==undefined?w.right:l.right;l.bottom=w.bottom!==undefined?w.bottom:l.bottom;l.left=w.left!==undefined?w.left:l.left}},color:{get:function(){return p},set:function(w){p=a.utils.getColor(w)}},style:{get:function(){return r},set:function(w){r=w;switch(r){case"stack":k.offset("zero");k.order("default");break;case"stream":k.offset("wiggle");k.order("inside-out");break;case"stream-center":k.offset("silhouette");k.order("inside-out");break;case"expand":k.offset("expand");k.order("default");break;case"stack_percent":k.offset(k.d3_stackedOffset_stackPercent);k.order("default");break}}},duration:{get:function(){return c},set:function(w){c=w;e.reset(c);j.duration(c)}}});a.utils.inheritOptions(k,j);a.utils.initOptions(k);return k};a.models.stackedAreaChart=function(){var L=a.models.stackedArea(),s=a.models.axis(),f=a.models.axis(),h=a.models.legend(),z=a.models.legend(),D=a.interactiveGuideline();var B={top:30,right:25,bottom:50,left:60},E=null,C=null,F=a.utils.defaultColor(),M=true,J=true,K=true,w=true,r=false,v=false,g=true,m=function(P,O,S,R,Q){return"<h3>"+P+"</h3><p>"+S+" on "+O+"</p>"},u,t,k=d3.format(",.2f"),l=a.utils.state(),o=null,j="No Data Available.",N=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),e=250,q=["Stacked","Stream","Expanded"],G={},c=250;l.style=L.style();s.orient("bottom").tickPadding(7);f.orient((r)?"right":"left");z.updateState(false);var n=a.utils.renderWatch(N);var H=L.style();var i=function(T,P){var S=T.pos[0]+(P.offsetLeft||0),R=T.pos[1]+(P.offsetTop||0),O=s.tickFormat()(L.x()(T.point,T.pointIndex)),U=f.tickFormat()(L.y()(T.point,T.pointIndex)),Q=m(T.series.key,O,U,T,A);a.tooltip.show([S,R],Q,T.value<0?"n":"s",null,P)};var p=function(x){return function(){return{active:x.map(function(y){return !y.disabled}),style:L.style()}}};var I=function(x){return function(y){if(y.style!==undefined){H=y.style}if(y.active!==undefined){x.forEach(function(P,O){P.disabled=!y.active[O]})}}};function A(x){n.reset();n.models(L);if(K){n.models(s)}if(w){n.models(f)}x.each(function(S){var O=d3.select(this),V=this;a.utils.initSVG(O);var Z=(E||parseInt(O.style("width"))||960)-B.left-B.right,R=(C||parseInt(O.style("height"))||400)-B.top-B.bottom;A.update=function(){O.transition().duration(c).call(A)};A.container=this;l.setter(I(S),A.update).getter(p(S)).update();l.disabled=S.map(function(aa){return !!aa.disabled});if(!o){var X;o={};for(X in l){if(l[X] instanceof Array){o[X]=l[X].slice(0)}else{o[X]=l[X]}}}if(!S||!S.length||!S.filter(function(aa){return aa.values.length}).length){var P=O.selectAll(".nv-noData").data([j]);P.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");P.attr("x",B.left+Z/2).attr("y",B.top+R/2).text(function(aa){return aa});return A}else{O.selectAll(".nv-noData").remove()}u=L.xScale();t=L.yScale();var Q=O.selectAll("g.nv-wrap.nv-stackedAreaChart").data([S]);var y=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g");var T=Q.select("g");y.append("rect").style("opacity",0);y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis");y.append("g").attr("class","nv-stackedWrap");y.append("g").attr("class","nv-legendWrap");y.append("g").attr("class","nv-controlsWrap");y.append("g").attr("class","nv-interactive");T.select("rect").attr("width",Z).attr("height",R);if(J){var Y=(M)?Z-e:Z;h.width(Y);T.select(".nv-legendWrap").datum(S).call(h);if(B.top!=h.height()){B.top=h.height();R=(C||parseInt(O.style("height"))||400)-B.top-B.bottom}T.select(".nv-legendWrap").attr("transform","translate("+(Z-Y)+","+(-B.top)+")")}if(M){var W=[{key:G.stacked||"Stacked",metaKey:"Stacked",disabled:L.style()!="stack",style:"stack"},{key:G.stream||"Stream",metaKey:"Stream",disabled:L.style()!="stream",style:"stream"},{key:G.expanded||"Expanded",metaKey:"Expanded",disabled:L.style()!="expand",style:"expand"},{key:G.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:L.style()!="stack_percent",style:"stack_percent"}];e=(q.length/3)*260;W=W.filter(function(aa){return q.indexOf(aa.metaKey)!==-1});z.width(e).color(["#444","#444","#444"]);T.select(".nv-controlsWrap").datum(W).call(z);if(B.top!=Math.max(z.height(),h.height())){B.top=Math.max(z.height(),h.height());R=(C||parseInt(O.style("height"))||400)-B.top-B.bottom}T.select(".nv-controlsWrap").attr("transform","translate(0,"+(-B.top)+")")}Q.attr("transform","translate("+B.left+","+B.top+")");if(r){T.select(".nv-y.nv-axis").attr("transform","translate("+Z+",0)")}if(v){D.width(Z).height(R).margin({left:B.left,top:B.top}).svgContainer(O).xScale(u);Q.select(".nv-interactive").call(D)}L.width(Z).height(R);var U=T.select(".nv-stackedWrap").datum(S);U.transition().call(L);if(K){s.scale(u).ticks(a.utils.calcTicksX(Z/100,S)).tickSize(-R,0);T.select(".nv-x.nv-axis").attr("transform","translate(0,"+R+")");T.select(".nv-x.nv-axis").transition().duration(0).call(s)}if(w){f.scale(t).ticks(L.offset()=="wiggle"?0:a.utils.calcTicksY(R/36,S)).tickSize(-Z,0).setTickFormat((L.style()=="expand"||L.style()=="stack_percent")?d3.format("%"):k);T.select(".nv-y.nv-axis").transition().duration(0).call(f)}L.dispatch.on("areaClick.toggle",function(aa){if(S.filter(function(ab){return !ab.disabled}).length===1){S.forEach(function(ab){ab.disabled=false})}else{S.forEach(function(ac,ab){ac.disabled=(ab!=aa.seriesIndex)})}l.disabled=S.map(function(ab){return !!ab.disabled});N.stateChange(l);A.update()});h.dispatch.on("stateChange",function(ab){for(var aa in ab){l[aa]=ab[aa]}N.stateChange(l);A.update()});z.dispatch.on("legendClick",function(ab,aa){if(!ab.disabled){return}W=W.map(function(ac){ac.disabled=true;return ac});ab.disabled=false;L.style(ab.style);l.style=L.style();N.stateChange(l);A.update()});D.dispatch.on("elementMousemove",function(ae){L.clearHighlights();var ad,ai,ab,aa=[];S.filter(function(al,ak){al.seriesIndex=ak;return !al.disabled}).forEach(function(am,al){ai=a.interactiveBisect(am.values,ae.pointXValue,A.x());L.highlightPoint(al,ai,true);var ak=am.values[ai];if(typeof ak==="undefined"){return}if(typeof ad==="undefined"){ad=ak}if(typeof ab==="undefined"){ab=A.xScale()(A.x()(ak,ai))}var an=(L.style()=="expand")?ak.display.y:A.y()(ak,ai);aa.push({key:am.key,value:an,color:F(am,am.seriesIndex),stackedValue:ak.display})});aa.reverse();if(aa.length>2){var ah=A.yScale().invert(ae.mouseY);var aj=Infinity,af=null;aa.forEach(function(an,am){ah=Math.abs(ah);var ak=Math.abs(an.stackedValue.y0);var al=Math.abs(an.stackedValue.y);if(ah>=ak&&ah<=(al+ak)){af=am;return}});if(af!=null){aa[af].highlight=true}}var ac=s.tickFormat()(A.x()(ad,ai));var ag=(L.style()=="expand")?function(al,ak){return d3.format(".1%")(al)}:function(al,ak){return f.tickFormat()(al)};D.tooltip.position({left:ab+B.left,top:ae.mouseY+B.top}).chartContainer(V.parentNode).enabled(g).valueFormatter(ag).data({value:ac,series:aa})();D.renderGuideLine(ab)});D.dispatch.on("elementMouseout",function(aa){N.tooltipHide();L.clearHighlights()});N.on("tooltipShow",function(aa){if(g){i(aa,V.parentNode)}});N.on("changeState",function(aa){if(typeof aa.disabled!=="undefined"&&S.length===aa.disabled.length){S.forEach(function(ac,ab){ac.disabled=aa.disabled[ab]});l.disabled=aa.disabled}if(typeof aa.style!=="undefined"){L.style(aa.style);H=aa.style}A.update()})});n.renderEnd("stacked Area chart immediate");return A}L.dispatch.on("tooltipShow",function(x){x.pos=[x.pos[0]+B.left,x.pos[1]+B.top];N.tooltipShow(x)});L.dispatch.on("tooltipHide",function(x){N.tooltipHide(x)});N.on("tooltipHide",function(){if(g){a.tooltip.cleanup()}});A.dispatch=N;A.stacked=L;A.legend=h;A.controls=z;A.xAxis=s;A.yAxis=f;A.interactiveLayer=D;f.setTickFormat=f.tickFormat;A.dispatch=N;A.options=a.utils.optionsFunc.bind(A);A._options=Object.create({},{width:{get:function(){return E},set:function(x){E=x}},height:{get:function(){return C},set:function(x){C=x}},showLegend:{get:function(){return J},set:function(x){J=x}},showXAxis:{get:function(){return K},set:function(x){K=x}},showYAxis:{get:function(){return w},set:function(x){w=x}},tooltips:{get:function(){return g},set:function(x){g=x}},tooltipContent:{get:function(){return m},set:function(x){m=x}},defaultState:{get:function(){return o},set:function(x){o=x}},noData:{get:function(){return j},set:function(x){j=x}},showControls:{get:function(){return M},set:function(x){M=x}},controlLabels:{get:function(){return G},set:function(x){G=x}},yAxisTickFormat:{get:function(){return k},set:function(x){k=x}},margin:{get:function(){return B},set:function(x){B.top=x.top!==undefined?x.top:B.top;B.right=x.right!==undefined?x.right:B.right;B.bottom=x.bottom!==undefined?x.bottom:B.bottom;B.left=x.left!==undefined?x.left:B.left}},duration:{get:function(){return c},set:function(x){c=x;n.reset(c);L.duration(c);s.duration(c);f.duration(c)}},color:{get:function(){return F},set:function(x){F=a.utils.getColor(x);h.color(F);L.color(F)}},rightAlignYAxis:{get:function(){return r},set:function(x){r=x;f.orient(r?"right":"left")}},useInteractiveGuideline:{get:function(){return v},set:function(x){v=!!x;if(x){A.interactive(false);A.useVoronoi(false)}}}});a.utils.inheritOptions(A,L);a.utils.initOptions(A);return A};a.version="1.7.1"})();